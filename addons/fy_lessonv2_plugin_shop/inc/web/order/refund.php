<?php
 goto mLumz; JCwcd: message("\xe9\x80\200\xe6\xac\276\350\xae\xb0\xe5\275\x95\xe4\270\215\345\xad\x98\xe5\234\xa8"); goto iTrIe; aL5Rc: $refund_log = pdo_fetchall("\x53\x45\114\105\x43\x54\40\x2a\x20\106\x52\x4f\115\x20" . tablename($this->table_shop_refund_log) . "\x20\x57\110\x45\x52\x45\x20\x75\x6e\151\x61\x63\151\x64\x3d\x3a\165\156\x69\x61\x63\x69\144\x20\x41\x4e\x44\x20\x72\145\x66\165\156\x64\x5f\151\144\x3d\x3a\x72\145\x66\x75\156\144\x5f\x69\x64\x20\117\x52\104\105\x52\40\102\131\x20\x69\x64\40\104\105\x53\x43", array("\72\165\156\x69\x61\143\151\144" => $uniacid, "\x3a\x72\x65\x66\165\x6e\144\137\151\144" => $refund["\x69\144"])); goto ap7Px; ybB8c: if ($res) { goto BX0TQ; } goto LisnY; XGjUN: FEsKG: goto NEy1b; Wem7f: Uu53m: goto a2JEe; mLumz: $id = intval($_GPC["\151\x64"]); goto FXHNF; asxXw: message("\346\x82\xa8\350\xbe\x93\xe5\205\245\xe7\232\x84\351\x80\200\346\xac\276\xe6\200\xbb\xe9\207\x91\351\xa2\235\xe9\224\231\xe8\257\xaf"); goto dAHVO; aE4FQ: goto iuqoM; goto sADY3; FT7j5: if (!empty($refund)) { goto OEUR0; } goto JCwcd; LLMVh: $shop_common->addSysLog($_W["\165\151\144"], $_W["\x75\163\145\162\156\141\155\145"], 2, "\xe5\225\x86\345\x9f\216\350\256\242\xe5\x8d\225", "\350\xae\xa2\xe5\215\225\351\x80\200\346\254\276\xef\274\x8c\xe4\277\xae\xe6\x94\xb9\345\225\x86\xe5\237\x8e\350\256\242\xe5\x8d\x95\347\274\226\xe5\217\xb7\72{$order["\x6f\x72\144\x65\162\x73\x6e"]}\xe7\x9a\204\xe9\x80\200\xe6\254\xbe\xe6\x80\273\351\207\221\xe9\242\x9d\xe4\270\272\72\x20{$refund_amount}\x20\345\x85\x83"); goto hW2GC; ElLNt: if (!empty($order)) { goto Uu53m; } goto O4q1f; hW2GC: itoast("\xe4\277\xae\346\224\271\351\x80\x80\xe6\254\xbe\351\x87\221\351\xa2\235\346\x88\220\xe5\212\237", '', "\163\x75\143\143\x65\x73\163"); goto GeGRs; h5nJ6: $refund = pdo_get($this->table_shop_refund, array("\x75\x6e\x69\141\x63\151\144" => $uniacid, "\x6f\162\x64\x65\162\151\144" => $id)); goto FT7j5; sADY3: BX0TQ: goto kfKry; LisnY: message("\347\xb3\273\xe7\273\237\347\271\201\345\277\231\357\xbc\214\350\xaf\267\347\250\x8d\xe5\220\216\xe9\x87\x8d\xe8\257\x95"); goto aE4FQ; V3Dgk: if (!($refund_amount > $order["\x74\157\x74\x61\154\x5f\x61\155\x6f\165\156\x74"])) { goto FEsKG; } goto hKDSO; VJAK8: BKtTv: goto h5nJ6; GeGRs: iuqoM: goto E6OFK; kfKry: $refund_log = array("\165\156\x69\141\143\x69\144" => $uniacid, "\x72\145\x66\165\156\x64\137\151\144" => $refund["\151\x64"], "\164\x69\x74\x6c\x65" => "\345\x95\x86\xe5\256\266\344\xbf\xae\xe6\224\271\351\200\200\346\254\276\xe6\x80\xbb\xe9\x87\x91\351\xa2\x9d", "\143\157\156\164\145\156\x74" => "\xe5\225\206\345\xae\xb6\344\xbf\xae\346\x94\xb9\xe9\x80\200\346\xac\xbe\346\200\xbb\xe9\207\221\351\xa2\x9d\344\270\xba\72\x20{$refund_amount}\40\xe5\205\203", "\x72\157\x6c\x65" => 0, "\141\144\x64\x74\x69\155\x65" => time()); goto pgs9A; FXHNF: $order = pdo_get($this->table_shop_order, array("\x75\156\151\x61\143\x69\x64" => $uniacid, "\x69\x64" => $id)); goto ElLNt; ap7Px: foreach ($refund_log as &$v) { goto Y3xzQ; S3C2e: $v["\x70\151\143\x74\165\x72\145"] = json_decode($v["\x70\151\x63\x74\x75\x72\x65"], true); goto P5pk0; P5pk0: DVww0: goto VhNcA; Y3xzQ: if (!$v["\x70\151\143\164\x75\x72\145"]) { goto DVww0; } goto S3C2e; VhNcA: kBSwY: goto o38Ey; o38Ey: } goto VWFhc; GcME_: if (!empty($goods_list)) { goto BKtTv; } goto WRG22; t0RD1: $refund_amount = $_GPC["\x72\145\146\165\x6e\144\137\x61\x6d\x6f\x75\x6e\x74"]; goto rmrxS; O4q1f: message("\350\xae\xa2\345\215\225\xe4\xb8\215\xe5\xad\x98\xe5\x9c\250"); goto Wem7f; NEy1b: $res = pdo_update($this->table_shop_refund, array("\x72\145\146\x75\156\144\137\x61\155\157\x75\156\164" => $refund_amount), array("\165\156\151\x61\143\x69\144" => $uniacid, "\151\144" => $refund["\x69\x64"])); goto ybB8c; hKDSO: message("\351\200\200\346\xac\xbe\xe6\x80\xbb\xe9\207\x91\351\242\x9d\344\270\x8d\xe8\x83\xbd\345\244\xa7\xe4\xba\x8e\xe8\xae\xa2\xe5\x8d\x95\xe6\x80\xbb\xe9\207\x91\xe9\242\235"); goto XGjUN; BpEuJ: if (!checksubmit()) { goto qp0xL; } goto t0RD1; dAHVO: VQ_ap: goto V3Dgk; iTrIe: OEUR0: goto aL5Rc; rmrxS: if (is_numeric($refund_amount)) { goto VQ_ap; } goto asxXw; WRG22: message("\350\xae\xa2\345\215\225\xe5\x95\x86\345\x93\x81\xe4\xb8\215\345\255\x98\345\x9c\250"); goto VJAK8; pgs9A: pdo_insert($this->table_shop_refund_log, $refund_log); goto LLMVh; a2JEe: $goods_list = pdo_fetchall("\x53\105\114\x45\x43\124\x20\x2a\x20\106\122\117\115\x20" . tablename($this->table_shop_order_goods) . "\40\x57\110\x45\x52\105\x20\x75\x6e\151\x61\x63\x69\144\x3d\72\165\156\151\141\143\x69\x64\40\x41\x4e\104\40\x6f\162\144\145\162\151\144\x3d\x3a\x6f\162\x64\x65\x72\x69\x64\x20\117\x52\x44\x45\x52\40\x42\131\40\x69\144\x20\x44\105\x53\x43", array("\72\165\x6e\x69\141\143\151\x64" => $uniacid, "\x3a\157\162\x64\145\162\151\x64" => $id)); goto GcME_; VWFhc: JDT1E: goto BpEuJ; E6OFK: qp0xL: