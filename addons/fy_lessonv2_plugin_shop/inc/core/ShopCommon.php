<?php
 defined("\111\116\137\x49\101") or exit("\x41\143\x63\x65\163\163\40\x44\x65\156\151\x65\144"); class ShopCommon extends WeModuleSite { public $table_aliyun_upload = "\146\x79\137\x6c\145\x73\163\x6f\x6e\x5f\141\154\151\x79\165\x6e\137\x75\x70\154\157\141\x64"; public $table_aliyunoss_upload = "\x66\x79\x5f\154\x65\x73\163\157\156\x5f\x61\x6c\151\171\165\156\x6f\x73\x73\137\165\160\x6c\x6f\141\144"; public $table_article = "\x66\x79\137\154\145\163\x73\x6f\x6e\x5f\x61\x72\x74\151\143\x6c\145"; public $table_article_category = "\x66\171\137\154\145\x73\x73\157\x6e\137\x61\162\164\x69\143\154\145\x5f\143\x61\164\x65\147\x6f\x72\171"; public $table_attribute = "\x66\171\x5f\x6c\x65\163\163\x6f\x6e\137\x61\x74\164\x72\x69\142\x75\164\x65"; public $table_banner = "\146\171\137\154\145\163\163\157\156\137\142\141\x6e\x6e\145\162"; public $table_cashlog = "\x66\171\x5f\x6c\x65\163\163\157\156\x5f\x63\x61\x73\150\x6c\157\147"; public $table_category = "\x66\171\137\154\x65\x73\x73\157\156\137\x63\x61\164\x65\147\157\x72\171"; public $table_lesson_collect = "\x66\171\x5f\x6c\145\x73\163\157\x6e\x5f\143\157\x6c\154\x65\x63\164"; public $table_commission_level = "\146\171\137\x6c\145\x73\x73\157\156\137\143\x6f\155\x6d\151\x73\x73\x69\157\156\137\154\145\166\x65\154"; public $table_commission_log = "\146\x79\x5f\154\145\x73\163\157\156\x5f\x63\157\x6d\155\151\163\x73\151\x6f\156\x5f\x6c\x6f\x67"; public $table_commission_setting = "\x66\171\x5f\154\145\x73\163\x6f\156\x5f\x63\157\x6d\155\x69\163\163\x69\x6f\156\x5f\163\x65\164\x74\x69\x6e\147"; public $table_coupon = "\x66\x79\137\x6c\145\x73\163\157\x6e\137\143\157\165\x70\x6f\156"; public $table_discount = "\x66\171\x5f\154\145\x73\x73\x6f\156\137\144\x69\x73\x63\157\165\156\x74"; public $table_discount_lesson = "\146\x79\137\154\x65\163\163\157\156\137\144\151\163\143\157\x75\156\x74\137\154\145\163\163\157\156"; public $table_diy_template = "\x66\171\x5f\x6c\x65\x73\x73\157\x6e\137\x64\x69\x79\x5f\x74\x65\x6d\x70\x6c\141\x74\145"; public $table_document = "\146\x79\x5f\x6c\145\x73\163\157\x6e\137\144\157\143\x75\155\x65\x6e\x74"; public $table_evaluate = "\x66\171\x5f\154\x65\x73\x73\x6f\x6e\x5f\x65\x76\141\154\x75\141\164\145"; public $table_evaluate_score = "\x66\x79\x5f\x6c\x65\163\163\x6f\x6e\137\145\166\141\x6c\165\x61\x74\x65\137\x73\143\157\162\145"; public $table_footer_group = "\146\171\x5f\154\145\x73\x73\157\156\137\x66\x6f\x6f\164\x65\x72\x5f\x67\x72\x6f\x75\x70"; public $table_lesson_history = "\146\x79\137\154\145\x73\x73\157\x6e\x5f\x68\151\163\x74\x6f\162\171"; public $table_index_module = "\x66\x79\137\154\145\163\x73\157\x6e\x5f\151\x6e\x64\145\170\137\x6d\157\144\x75\x6c\x65"; public $table_inform = "\146\x79\137\x6c\x65\x73\163\157\156\137\151\x6e\146\157\x72\155"; public $table_inform_fans = "\146\171\137\154\145\x73\x73\x6f\156\137\151\156\x66\x6f\162\155\x5f\146\141\x6e\x73"; public $table_login_pc = "\146\171\137\x6c\x65\x73\x73\x6f\x6e\x5f\x6c\157\x67\151\x6e\x5f\x70\x63"; public $table_recommend_junior = "\x66\171\x5f\x6c\145\163\x73\157\x6e\x5f\x72\145\x63\157\x6d\x6d\145\156\144\x5f\x6a\x75\156\151\x6f\162"; public $table_recommend_activity = "\x66\x79\137\154\x65\163\x73\157\x6e\137\162\145\x63\x6f\x6d\x6d\x65\x6e\144\137\141\143\x74\151\x76\151\164\171"; public $table_market = "\146\x79\x5f\154\145\163\163\157\156\x5f\x6d\141\x72\x6b\x65\164"; public $table_mcoupon = "\146\171\x5f\x6c\x65\163\163\x6f\156\x5f\x6d\143\x6f\165\x70\157\x6e"; public $table_member = "\x66\x79\x5f\x6c\x65\163\163\157\x6e\x5f\x6d\x65\155\x62\145\162"; public $table_member_bind = "\x66\171\137\x6c\145\163\163\157\x6e\x5f\x6d\145\x6d\x62\x65\162\137\x62\x69\156\x64"; public $table_member_buyteacher = "\x66\171\x5f\154\x65\163\163\157\x6e\137\155\145\x6d\142\145\x72\x5f\142\165\171\x74\145\x61\x63\150\x65\162"; public $table_member_coupon = "\146\x79\137\x6c\145\x73\x73\x6f\156\137\x6d\x65\x6d\142\x65\162\137\143\x6f\165\x70\157\156"; public $table_member_order = "\x66\x79\x5f\154\145\163\x73\x6f\x6e\x5f\155\145\x6d\x62\145\x72\x5f\x6f\x72\144\x65\x72"; public $table_member_vip = "\146\x79\137\154\145\163\x73\157\x6e\x5f\x6d\145\155\142\145\x72\x5f\166\151\x70"; public $table_navigation = "\x66\x79\137\x6c\x65\163\163\157\x6e\x5f\x6e\x61\166\x69\x67\141\x74\x69\x6f\156"; public $table_order = "\x66\171\137\154\145\163\x73\157\156\137\x6f\x72\x64\145\162"; public $table_order_verify = "\x66\x79\x5f\x6c\x65\x73\x73\x6f\156\x5f\x6f\162\x64\x65\x72\x5f\166\x65\x72\151\146\x79"; public $table_lesson_parent = "\146\171\x5f\154\x65\163\163\x6f\156\137\x70\x61\x72\145\156\164"; public $table_playrecord = "\x66\x79\137\154\x65\163\x73\x6f\156\137\x70\154\x61\171\162\145\x63\x6f\162\144"; public $table_poster = "\x66\x79\137\154\145\x73\x73\157\x6e\137\160\157\163\164\145\x72"; public $table_qcloudvod_upload = "\146\171\137\x6c\x65\163\x73\x6f\x6e\137\161\x63\x6c\157\x75\144\166\x6f\144\137\x75\x70\x6c\157\x61\144"; public $table_qcloud_upload = "\146\x79\x5f\154\x65\x73\163\157\x6e\137\x71\143\x6c\x6f\x75\144\x5f\165\160\154\157\x61\x64"; public $table_qiniu_upload = "\x66\171\x5f\x6c\145\x73\163\x6f\x6e\x5f\x71\151\x6e\x69\165\x5f\x75\160\x6c\157\x61\144"; public $table_recommend = "\x66\x79\137\154\x65\x73\163\x6f\156\137\162\145\x63\x6f\155\155\145\156\144"; public $table_setting = "\x66\x79\137\x6c\x65\163\x73\157\156\137\163\x65\164\x74\151\156\147"; public $table_setting_pc = "\x66\171\137\x6c\145\163\x73\x6f\x6e\137\x73\145\164\x74\x69\156\147\x5f\x70\x63"; public $table_signin = "\146\171\137\x6c\145\x73\x73\x6f\x6e\x5f\x73\x69\147\x6e\x69\156"; public $table_lesson_son = "\146\x79\137\154\x65\163\163\x6f\156\137\x73\x6f\x6e"; public $table_lesson_title = "\146\171\x5f\x6c\x65\x73\163\157\156\137\x74\151\164\154\145"; public $table_lesson_spec = "\x66\171\137\154\x65\163\163\157\x6e\x5f\x73\160\145\x63"; public $table_static = "\146\x79\x5f\154\x65\163\163\157\156\137\x73\164\141\x74\151\143"; public $table_study_duration = "\146\x79\x5f\x6c\x65\163\x73\157\156\x5f\x73\164\165\144\x79\137\144\165\x72\141\x74\151\x6f\x6e"; public $table_subscribe_msg = "\x66\x79\137\x6c\145\163\x73\157\x6e\137\163\x75\x62\x73\143\162\x69\x62\145\x5f\x6d\163\147"; public $table_syslog = "\146\x79\137\154\x65\x73\x73\157\156\137\163\171\163\154\157\147"; public $table_teacher = "\x66\171\137\x6c\x65\x73\x73\x6f\x6e\x5f\164\x65\141\143\x68\145\x72"; public $table_teacher_category = "\146\171\137\x6c\x65\163\163\157\x6e\137\164\x65\x61\x63\150\145\162\x5f\143\x61\164\145\x67\x6f\x72\x79"; public $table_teacher_income = "\x66\171\137\154\145\x73\x73\157\x6e\137\164\145\x61\143\x68\x65\162\x5f\x69\x6e\143\x6f\x6d\145"; public $table_teacher_order = "\x66\171\x5f\154\x65\163\163\157\x6e\x5f\x74\145\x61\x63\x68\x65\x72\x5f\157\162\x64\145\x72"; public $table_teacher_price = "\x66\171\137\x6c\145\x73\x73\x6f\156\x5f\164\x65\x61\143\150\x65\x72\x5f\160\x72\x69\x63\x65"; public $table_tplmessage = "\146\171\137\x6c\145\163\163\157\156\137\x74\160\154\x6d\x65\163\x73\141\147\145"; public $table_vip_level = "\146\x79\x5f\154\145\163\x73\157\x6e\x5f\x76\151\160\x5f\154\x65\166\x65\154"; public $table_vipcard = "\x66\171\137\x6c\x65\x73\163\157\156\137\x76\151\160\143\141\x72\144"; public $table_mc_members = "\155\143\137\155\x65\x6d\x62\145\162\163"; public $table_fans = "\x6d\143\137\x6d\141\x70\160\x69\x6e\x67\137\x66\141\156\x73"; public $table_core_paylog = "\143\157\x72\x65\137\x70\141\171\x6c\x6f\x67"; public $table_users = "\165\x73\145\x72\x73"; public $table_shop_address = "\x66\171\137\154\145\x73\163\157\x6e\x5f\160\x6c\x75\x67\151\156\137\x73\150\157\160\137\141\x64\x64\162\145\163\x73"; public $table_shop_attr = "\146\171\137\154\145\163\x73\157\156\137\x70\x6c\x75\x67\x69\x6e\137\x73\150\x6f\x70\137\x61\164\x74\162"; public $table_shop_banner = "\x66\171\x5f\x6c\145\163\x73\x6f\x6e\x5f\160\x6c\x75\x67\x69\x6e\x5f\x73\x68\157\x70\137\x62\x61\x6e\x6e\145\162"; public $table_shop_cart = "\x66\x79\137\154\x65\x73\x73\x6f\156\x5f\x70\x6c\165\147\x69\x6e\137\x73\x68\157\160\137\x63\141\x72\x74"; public $table_shop_category = "\x66\x79\x5f\154\145\163\x73\157\156\x5f\x70\154\165\x67\x69\156\137\163\x68\x6f\160\x5f\143\141\x74\x65\x67\x6f\162\x79"; public $table_shop_commission_log = "\x66\x79\137\x6c\x65\x73\163\x6f\x6e\137\x70\x6c\165\147\151\156\137\163\x68\157\x70\x5f\x63\157\x6d\x6d\x69\x73\x73\x69\x6f\156\x5f\154\157\x67"; public $table_shop_diy_template = "\x66\171\x5f\x6c\x65\163\163\x6f\x6e\137\160\154\x75\x67\x69\156\137\x73\150\x6f\160\x5f\x64\x69\x79\x5f\x74\145\x6d\160\x6c\x61\164\145"; public $table_shop_express = "\x66\x79\137\154\x65\x73\163\157\x6e\x5f\160\x6c\x75\x67\x69\156\x5f\163\150\x6f\x70\137\x65\170\x70\x72\145\x73\163"; public $table_shop_goods = "\146\x79\x5f\154\x65\x73\x73\157\x6e\137\160\154\165\x67\151\156\x5f\163\x68\157\x70\137\x67\157\x6f\x64\163"; public $table_shop_goods_comment = "\x66\171\x5f\154\x65\163\x73\157\x6e\x5f\x70\154\x75\147\x69\156\x5f\163\150\157\160\137\x67\157\x6f\144\163\x5f\x63\x6f\x6d\x6d\x65\x6e\164"; public $table_shop_navigation = "\x66\171\x5f\154\x65\x73\163\157\x6e\137\x70\x6c\x75\x67\151\x6e\137\163\150\157\160\x5f\x6e\141\166\151\x67\x61\x74\x69\x6f\x6e"; public $table_shop_notice = "\x66\x79\137\x6c\145\x73\163\x6f\156\x5f\x70\x6c\165\x67\x69\156\x5f\x73\150\x6f\160\137\x6e\x6f\x74\x69\143\145"; public $table_shop_notice_category = "\x66\x79\137\x6c\145\163\163\x6f\x6e\x5f\x70\154\x75\147\x69\x6e\137\163\x68\x6f\x70\137\156\x6f\164\x69\143\x65\x5f\143\141\164\145\147\157\x72\x79"; public $table_shop_order = "\146\171\x5f\x6c\x65\163\163\157\156\x5f\160\x6c\165\147\151\156\137\x73\150\x6f\x70\x5f\x6f\162\144\x65\162"; public $table_shop_order_goods = "\x66\x79\x5f\x6c\145\x73\x73\x6f\x6e\137\x70\x6c\165\x67\151\156\x5f\x73\x68\x6f\160\137\157\x72\144\145\x72\137\x67\157\157\x64\163"; public $table_shop_refund = "\x66\x79\x5f\x6c\145\x73\x73\x6f\x6e\x5f\x70\154\165\147\151\156\137\163\150\157\160\x5f\x72\145\146\x75\156\x64"; public $table_shop_refund_log = "\x66\171\x5f\154\145\x73\163\157\156\x5f\160\x6c\165\147\x69\156\x5f\x73\150\x6f\x70\137\162\x65\x66\165\x6e\x64\x5f\154\x6f\147"; public $table_shop_refund_reason = "\146\x79\137\154\x65\x73\163\x6f\x6e\x5f\160\154\165\147\x69\x6e\x5f\x73\150\157\160\x5f\x72\145\x66\x75\x6e\x64\x5f\x72\145\141\163\157\156"; public $table_shop_setting = "\x66\171\137\154\145\163\163\157\156\137\160\x6c\165\147\151\156\137\x73\150\157\x70\x5f\x73\145\164\164\151\x6e\x67"; public $table_shop_sku = "\146\171\137\154\145\x73\163\x6f\x6e\x5f\x70\154\x75\x67\x69\156\x5f\x73\150\x6f\160\137\x73\x6b\x75"; public $table_shop_syslog = "\x66\x79\137\154\x65\x73\x73\x6f\156\137\x70\x6c\x75\x67\x69\x6e\137\x73\x68\157\160\137\x73\x79\163\154\157\x67"; public $table_shop_value = "\x66\171\137\154\145\x73\x73\x6f\x6e\137\x70\x6c\165\x67\151\156\137\x73\x68\x6f\160\x5f\x76\141\x6c\x75\145"; public $table_shop_virtual = "\x66\171\x5f\x6c\x65\163\x73\x6f\x6e\137\160\154\x75\x67\151\x6e\x5f\163\x68\x6f\x70\x5f\x76\151\162\164\x75\x61\154"; public function redefineUrl($url) { $new_url = str_replace("\x26\x6d\x3d", '', $url); return $new_url . "\x26\155\75\146\x79\137\154\145\163\x73\x6f\x6e\x76\x32\x5f\x70\x6c\x75\147\151\x6e\137\x73\150\x6f\x70"; } public function getDiyTemplate($id = '', $page_type = 1) { goto YMzj6; PSC3m: if ($page_type == 1) { goto CSp_t; } goto O6DS7; Cq1pk: zybvp: goto JeHI9; vm8PJ: goto vbqn0; goto c0MSd; nVZ3n: $diy_tpl = pdo_get($this->table_shop_diy_template, array("\x75\x6e\151\x61\x63\151\x64" => $uniacid, "\160\x61\147\145\x5f\164\171\160\145" => $page_type, "\x69\x64" => $id)); goto J7B5c; lcfwj: EYdC0: goto C8F8Q; aN7cf: $diy_data = json_decode($diy_tpl["\x64\141\164\x61"], true); goto vc1r7; J7B5c: if (!empty($diy_tpl)) { goto q4y08; } goto uiBJ7; GrW3r: q4y08: goto Z8D9r; d7ewV: gmnXs: goto wdazK; RXOzW: if (!empty($diy_data)) { goto La6oH; } goto HK6Zl; vc1r7: j4maI: goto Clgeu; gbV7j: return $diy_data; goto d7ewV; X4JbZ: $diy_data = cache_load("\x66\171\x5f\x6c\x65\163\163\x6f\x6e\x5f" . $uniacid . "\x5f\163\150\157\x70\x5f\144\x69\171\x5f\x74\145\155\x70\x6c\141\x74\x65"); goto RXOzW; O6DS7: if ($page_type == 2) { goto VAhvZ; } goto DP19A; eQ3V2: if (!$id) { goto h1unH; } goto wWw3Z; C8F8Q: return $diy_data; goto Fo9Ad; HK6Zl: $diy_tpl = pdo_get($this->table_shop_diy_template, array("\165\x6e\x69\141\x63\151\x64" => $uniacid, "\x70\x61\147\145\x5f\x74\171\x70\x65" => $page_type, "\x73\164\141\x74\165\163" => 1)); goto qdMRk; X9Nv1: XIMQS: goto AkVu1; XWKZV: if (!empty($diy_data)) { goto XIMQS; } goto EQtoP; cQj68: $uniacid = $_W["\165\156\x69\141\x63\x69\x64"]; goto PSC3m; wdazK: goto zybvp; goto L7fQJ; DP19A: goto zybvp; goto eJxbZ; QtoOr: RiogE: goto XWKZV; Ir3hy: goto gmnXs; goto wFMLr; L7fQJ: VAhvZ: goto yOpb9; Z8D9r: $diy_data = json_decode($diy_tpl["\x64\141\x74\x61"], true); goto QtoOr; qdMRk: if (empty($diy_tpl)) { goto j4maI; } goto aN7cf; nDHd4: return; goto rkCYI; wWw3Z: cache_write("\146\x79\137\x6c\x65\163\x73\157\156\x5f" . $uniacid . "\137\163\x68\x6f\160\x5f\x64\x69\171\x5f\x74\x65\155\160\x6c\x61\x74\x65\137" . $id, $diy_data); goto vm8PJ; Dq7PV: goto RiogE; goto GrW3r; VA8Wk: vbqn0: goto LmJEN; LmJEN: return $diy_data; goto PgR5o; rkCYI: WqspE: goto Ir3hy; yOpb9: $diy_data = cache_load("\146\171\137\154\145\x73\x73\x6f\x6e\x5f" . $uniacid . "\137\x64\x69\171\x5f\164\x65\x6d\160\154\x61\x74\x65\x5f" . $id); goto hez7h; nDjZL: QoNQA: goto eQ3V2; EQtoP: return; goto X9Nv1; eJxbZ: CSp_t: goto X4JbZ; Fo9Ad: ctgdG: goto Cq1pk; c0MSd: h1unH: goto jbt3a; YMzj6: global $_W; goto cQj68; AkVu1: goto ctgdG; goto lcfwj; jbt3a: cache_write("\x66\171\x5f\x6c\x65\x73\x73\x6f\156\137" . $uniacid . "\x5f\x73\150\157\160\x5f\144\x69\x79\x5f\164\x65\155\x70\154\x61\164\145", $diy_data); goto VA8Wk; wFMLr: La6oH: goto gbV7j; hez7h: if (!empty($diy_data)) { goto EYdC0; } goto nVZ3n; JeHI9: foreach ($diy_data as $k => $v) { goto zN16P; re8hk: $v["\x64\x61\164\x61"] = array(); goto RANzv; jxabd: foreach ($notice_list as $v1) { goto H6__L; TrJs4: unset($identify); goto cEIav; cEIav: DiCDf: goto atthV; re0oJ: $v["\x64\141\164\x61"][] = array("\x74\151\164\154\145" => $v1["\x74\151\x74\154\145"], "\x63\157\154\157\x72" => $v1["\x74\151\x74\154\145\137\143\x6f\x6c\x6f\162"], "\x6c\x69\156\153" => $this->redefineUrl($this->createMobileUrl("\163\x68\157\x70\x6e\x6f\x74\151\143\145", array("\x69\144" => $v1["\x69\144"]))), "\145\155\137\164\151\164\154\x65" => $identify["\164\151\x74\154\145"], "\x65\x6d\x5f\143\157\x6c\157\162" => $identify["\143\157\x6c\157\162"]); goto TrJs4; H6__L: $identify = json_decode($v1["\x69\x64\x65\x6e\x74\151\146\171"], true); goto re0oJ; atthV: } goto sOuSz; f1YIm: y6RG2: goto sUqJX; M7r4r: if (!$v["\163\x74\x79\154\x65"]["\x63\x63\151\x64"]) { goto HnLi6; } goto kd0jW; tGtvl: if ($v["\x73\164\171\x6c\145"]["\x67\x6f\x6f\x64\x73\137\146\162\157\155"] == 1) { goto pPNZ4; } goto NnurM; MnLj6: $g_params = array("\x3a\165\156\x69\x61\x63\151\x64" => $uniacid, "\72\x73\x74\141\164\165\x73" => 1); goto TL4JR; oVyuO: UlsqO: goto Ofxfc; bYD0y: HnLi6: goto hpfSy; Oc2qZ: if (!$v["\163\164\171\x6c\145"]["\x6e\157\x74\x69\143\145\137\x66\x72\x6f\x6d"]) { goto hdw_T; } goto GDC7N; IHTx6: pPNZ4: goto re8hk; SkpLJ: foreach ($v["\x64\x61\164\x61"] as $k1 => $v1) { goto Fh7Gx; Fh7Gx: parse_str(@array_pop(explode("\x3f", $v1["\154\x69\156\153"])), $params); goto PWtP3; ypgix: cqpiX: goto Czy0g; FEy_o: $v1["\156\141\x76\137\x6f\160"] = $params["\157\160"] ? $params["\157\160"] : "\x64\151\x73\160\x6c\141\171"; goto plux9; PWtP3: $v1["\156\141\166\x5f\144\157"] = $params["\x64\157"]; goto FEy_o; plux9: $v["\x64\x61\164\141"][$k1] = $v1; goto ypgix; Czy0g: } goto oVyuO; hpfSy: HuVzk: goto ASj6U; sOuSz: OMzhw: goto rABrS; iBgAH: $g_condition .= "\x20\101\x4e\104\40\x70\151\144\x3d\72\160\x69\x64\40"; goto LhOvS; I9Za2: if (!($v["\x6e\141\x6d\x65"] == "\x66\x6f\x6f\x74\156\141\166")) { goto SD1Yx; } goto SkpLJ; SLRzp: SD1Yx: goto yf5XZ; kd0jW: $g_condition .= "\x20\101\116\104\40\143\x63\151\144\x3d\72\143\x63\x69\x64\40"; goto n__gK; NnurM: foreach ($v["\x64\141\164\x61"] as $k1 => $v1) { goto WnOqS; nTuHh: top8c: goto HIjsg; Kw0r1: iV8O1: goto l19Vr; meU9j: kO0fC: goto hd62X; WnOqS: $v1 = pdo_get($this->table_shop_goods, array("\x75\156\151\141\143\151\144" => $uniacid, "\x69\144" => $v1["\147\x6f\x6f\144\x73\x69\144"])); goto ln6_f; AfqlR: $v1["\163\x68\157\x77\137\x70\x72\x69\x63\x65"] = "\357\277\245" . $v1["\160\162\x69\x63\x65"]; goto Vvsaw; dWoZL: goto iV8O1; goto fU4uo; fU4uo: nRhJ9: goto uQ2om; AEc0V: $v["\144\x61\x74\141"][$k1] = $v1; goto NCtGh; NCtGh: unset($v1); goto nTuHh; Bhqpz: if ($v1["\160\x72\x69\x63\x65"] * 10 == round($v1["\160\162\151\x63\x65"], 1) * 10) { goto nRhJ9; } goto IEVNf; Vvsaw: goto tdJep; goto MLGef; AfyCE: UmBOG: goto AfqlR; ZRoZJ: if ($v1["\x73\x65\x6c\154\137\x74\x79\x70\x65"] == 3) { goto qYC2x; } goto oCUus; IEVNf: goto iV8O1; goto IwMZ0; LBHKk: tdJep: goto AEc0V; uQ2om: $v1["\160\x72\151\143\x65"] = round($v1["\x70\x72\x69\143\145"], 1); goto Kw0r1; hd62X: $v1["\x73\x68\157\167\x5f\x70\162\151\143\145"] = $v1["\151\x6e\164\145\147\x72\141\x6c"] . "\xe7\xa7\257\345\x88\x86"; goto EBNor; IwMZ0: E0ApU: goto SVF5e; ln6_f: $v1["\163\150\x6f\167\137\x73\x61\154\x65\x73"] = $v1["\x73\x61\x6c\x65\x73"] + $v1["\166\151\162\164\165\141\154\137\163\x61\x6c\x65\163"]; goto N9Moo; p1Wn6: $v1["\x73\150\157\x77\137\160\162\x69\143\145"] = "\xef\xbf\xa5" . $v1["\160\162\151\x63\145"] . "\53" . $v1["\x69\x6e\x74\145\x67\x72\x61\x6c"] . "\xe7\xa7\257\345\x88\x86"; goto LBHKk; N9Moo: if ($v1["\160\x72\x69\143\145"] * 100 == intval($v1["\160\162\x69\143\x65"]) * 100) { goto E0ApU; } goto Bhqpz; oCUus: goto tdJep; goto meU9j; MLGef: qYC2x: goto p1Wn6; EBNor: goto tdJep; goto AfyCE; xNaBP: if ($v1["\163\145\154\154\137\164\x79\x70\x65"] == 2) { goto UmBOG; } goto ZRoZJ; l19Vr: if ($v1["\x73\x65\x6c\154\137\164\171\x70\145"] == 1) { goto kO0fC; } goto xNaBP; SVF5e: $v1["\160\x72\x69\x63\145"] = intval($v1["\160\162\151\x63\145"]); goto dWoZL; HIjsg: } goto aQvKF; Q347i: if (!($v["\156\141\155\145"] == "\163\x6c\x69\144\x65\x67\157\x6f\x64\163" || $v["\x6e\x61\155\145"] == "\x73\164\141\x74\x69\x63\x67\x6f\x6f\x64\x73")) { goto VQ10A; } goto tGtvl; LhOvS: $g_params["\x3a\160\151\x64"] = intval($v["\x73\x74\x79\154\x65"]["\x70\151\x64"]); goto cwkLq; phehm: VQ10A: goto I9Za2; B53s0: if (!$v["\163\164\x79\x6c\145"]["\160\151\x64"]) { goto tZ2v6; } goto iBgAH; cwkLq: if (!$v["\x73\x74\171\154\x65"]["\143\151\x64"]) { goto HuVzk; } goto o6n5L; ASj6U: tZ2v6: goto IWINX; zN16P: if (!($v["\x6e\x61\x6d\x65"] == "\x6e\157\164\x69\143\x65")) { goto X6gJb; } goto Oc2qZ; n__gK: $g_params["\x3a\143\x63\151\x64"] = intval($v["\163\164\x79\154\145"]["\x63\143\151\144"]); goto bYD0y; ecvwc: $g_params["\x3a\143\x69\x64"] = intval($v["\163\164\171\x6c\145"]["\143\151\x64"]); goto M7r4r; o6n5L: $g_condition .= "\40\101\x4e\x44\x20\x63\151\x64\x3d\x3a\x63\x69\x64\x20"; goto ecvwc; FAfHq: $article_params = array("\72\165\x6e\151\141\143\x69\x64" => $uniacid, "\x3a\151\163\x73\x68\x6f\167" => 1); goto DzsaW; RANzv: $g_condition = "\40\x75\156\x69\141\x63\151\144\x3d\72\x75\x6e\151\x61\143\x69\144\x20\x41\116\x44\40\x73\164\x61\x74\165\x73\75\72\x73\164\x61\164\x75\x73\x20"; goto MnLj6; opE6f: goto eTMMM; goto IHTx6; TL4JR: $limit = intval($v["\163\164\x79\154\x65"]["\163\150\x6f\x77\137\156\165\x6d\x62\145\x72"]) ? intval($v["\163\164\171\154\x65"]["\163\150\157\167\x5f\x6e\165\x6d\x62\x65\x72"]) : 10; goto B53s0; IWINX: $goods_list = pdo_fetchall("\123\105\x4c\105\x43\x54\x20\x2a\40\x46\122\117\115\40" . tablename($this->table_shop_goods) . "\x20\x57\x48\x45\x52\x45\x20{$g_condition}\x20\x4f\122\x44\x45\x52\x20\102\131\x20\144\151\163\160\x6c\141\x79\157\162\144\145\162\40\x44\105\x53\x43\54\151\x64\40\104\x45\123\x43\40\114\x49\115\x49\x54\x20\x30\54{$limit}", $g_params); goto Pb0k6; jp34u: X6gJb: goto Q347i; DzQQ_: $diy_data[$k] = $v; goto jp34u; o2t6X: wnYCi: goto MhJzw; mO8CS: $diy_data[$k] = $v; goto phehm; GDC7N: $notice_condition = "\x20\165\x6e\151\141\x63\x69\144\75\x3a\165\156\x69\x61\143\x69\144\40\x41\116\104\40\151\163\x73\x68\x6f\x77\x3d\x3a\151\163\163\x68\x6f\x77\x20"; goto FAfHq; Pb0k6: foreach ($goods_list as $k1 => $v1) { goto gf_Qr; Mh11f: $v1["\163\150\157\167\x5f\x70\162\151\143\x65"] = "\357\277\xa5" . $v1["\160\162\x69\x63\x65"]; goto CEaSu; ouLeO: unset($v1); goto J_Imw; Fv8v0: if ($v1["\x73\x65\x6c\154\x5f\164\171\x70\x65"] == 3) { goto wMWCE; } goto mqH3H; P9Imz: VKamu: goto BwLgb; PDIeP: if ($v1["\163\145\x6c\x6c\x5f\164\171\160\145"] == 2) { goto lOXh9; } goto Fv8v0; BwLgb: $v["\144\x61\x74\141"][$k1] = $v1; goto ouLeO; NO3Qn: PqsKQ: goto H4uez; mqH3H: goto VKamu; goto RljBn; hFvrk: $v1["\x73\150\x6f\x77\137\x70\162\151\143\145"] = $v1["\151\x6e\164\x65\x67\162\x61\x6c"] . "\xe7\247\xaf\345\210\206"; goto AzaMt; RljBn: Dm6w2: goto hFvrk; CEaSu: goto VKamu; goto q13yY; lhY06: if ($v1["\x70\x72\x69\143\x65"] * 100 == intval($v1["\x70\162\151\x63\x65"]) * 100) { goto IDoLr; } goto NQAIA; f0ll9: $v1["\x70\x72\151\143\x65"] = intval($v1["\x70\x72\151\x63\x65"]); goto STmVf; NQAIA: if ($v1["\x70\162\151\143\x65"] * 10 == round($v1["\x70\x72\x69\x63\145"], 1) * 10) { goto u2qL9; } goto SRSdR; T0dPR: IDoLr: goto f0ll9; H4uez: if ($v1["\x73\x65\x6c\154\137\164\x79\160\x65"] == 1) { goto Dm6w2; } goto PDIeP; SRSdR: goto PqsKQ; goto T0dPR; FMkAR: $v1["\160\x72\x69\143\145"] = round($v1["\160\x72\x69\143\145"], 1); goto NO3Qn; gf_Qr: $v1["\x73\x68\x6f\x77\137\x73\x61\x6c\x65\x73"] = $v1["\163\x61\154\145\x73"] + $v1["\x76\151\162\164\165\x61\154\x5f\163\x61\154\x65\x73"]; goto lhY06; q13yY: wMWCE: goto htUzE; SBGKZ: u2qL9: goto FMkAR; l1Ru1: lOXh9: goto Mh11f; J_Imw: dSgKW: goto qG1LC; htUzE: $v1["\x73\x68\157\167\137\x70\162\151\143\x65"] = "\357\xbf\245" . $v1["\160\x72\151\143\x65"] . "\53" . $v1["\151\156\164\x65\x67\x72\141\x6c"] . "\xe7\247\257\345\x88\206"; goto P9Imz; AzaMt: goto VKamu; goto l1Ru1; STmVf: goto PqsKQ; goto SBGKZ; qG1LC: } goto o2t6X; DzsaW: $notice_list = pdo_fetchall("\123\105\114\105\103\x54\40\151\x64\x2c\164\x69\164\x6c\145\x2c\x74\x69\164\x6c\x65\x5f\x63\x6f\x6c\x6f\x72\54\x69\144\x65\156\x74\151\146\x79\x20\106\122\x4f\x4d\40" . tablename($this->table_shop_notice) . "\x20\127\110\105\x52\x45\40{$notice_condition}\x20\117\122\104\105\122\x20\102\131\x20\x64\151\163\160\x6c\x61\171\157\x72\144\x65\162\x20\x44\105\x53\x43\54\151\144\x20\104\x45\x53\x43", $article_params); goto TJuGE; rABrS: hdw_T: goto DzQQ_; aQvKF: QUptP: goto opE6f; TJuGE: unset($v["\144\141\x74\x61"]); goto jxabd; MhJzw: eTMMM: goto mO8CS; Ofxfc: $diy_data["\x66\157\157\164\156\141\x76"] = $v; goto SLRzp; yf5XZ: $diy_data[$k]["\164\x70\154\x5f\156\141\155\145"] = random(10); goto f1YIm; sUqJX: } goto nDjZL; uiBJ7: message("\xe9\xa1\xb5\xe9\x9d\242\344\xb8\x8d\345\xad\x98\xe5\x9c\250"); goto Dq7PV; Clgeu: if (!empty($diy_data)) { goto WqspE; } goto nDHd4; PgR5o: } public function saveVirtualStock($virtual_data = '', $goods_id) { goto yZ6MQ; gClCv: $virtual_keys = explode("\xa", trim($virtual_data)); goto kvxsr; eVSFi: $uniacid = $_W["\x75\156\x69\x61\143\x69\x64"]; goto nckTj; bFdt3: VGiE7: goto NUDV3; kvxsr: foreach ($virtual_keys as $v) { goto gqVML; nLaa8: goto GWi3b; goto Ttzly; Ttzly: djFOZ: goto dSFAF; gqVML: if (!empty($v)) { goto djFOZ; } goto nLaa8; pjpJD: pdo_insert($this->table_shop_virtual, $data); goto wu_l1; dSFAF: $data = array("\x75\156\x69\141\x63\151\x64" => $uniacid, "\x67\157\157\144\163\137\x69\x64" => $goods_id, "\166\x61\x6c\165\145" => $v, "\163\164\x61\x74\x75\x73" => 0); goto pjpJD; wu_l1: GWi3b: goto WeoDp; WeoDp: } goto BNxFJ; yZ6MQ: global $_W; goto eVSFi; BNxFJ: RBSVz: goto bFdt3; Dx4LC: pdo_update($this->table_shop_goods, array("\x73\164\x6f\x63\153" => $total), array("\165\x6e\x69\x61\x63\x69\x64" => $uniacid, "\151\x64" => $goods_id)); goto Q9mm5; NUDV3: $total = pdo_fetchcolumn("\x53\x45\114\105\x43\x54\40\x43\x4f\125\116\x54\x28\52\51\x20\x46\122\x4f\115\40" . tablename($this->table_shop_virtual) . "\40\x57\x48\x45\x52\x45\40\165\x6e\151\141\x63\x69\x64\x3d\72\x75\x6e\151\141\x63\x69\144\40\x41\116\104\40\147\157\x6f\x64\163\137\x69\x64\75\72\x67\x6f\157\x64\x73\137\151\144\40\101\x4e\x44\40\163\x74\x61\164\x75\163\75\72\163\164\x61\164\165\x73", array("\72\165\156\x69\x61\143\x69\x64" => $uniacid, "\x3a\147\157\157\144\x73\x5f\x69\144" => $goods_id, "\x3a\163\x74\141\x74\165\x73" => 0)); goto Dx4LC; nckTj: if (empty($virtual_data)) { goto VGiE7; } goto gClCv; Q9mm5: } public function deleteGoodsSku($goods_id) { goto smqvL; smre1: $uniacid = $_W["\x75\156\151\141\x63\x69\144"]; goto s5xJY; smqvL: global $_W; goto smre1; s5xJY: pdo_delete($this->table_shop_sku, array("\165\x6e\151\141\x63\x69\x64" => $uniacid, "\147\x6f\157\144\x73\x5f\x69\144" => $goods_id)); goto gyYga; gyYga: } public function addSysLog($admin_uid, $admin_username, $log_type, $function, $content) { goto HcQuh; HcQuh: global $_W; goto F51Db; NBgo6: goto G6K6j; goto UY2JJ; UY2JJ: BliNg: goto eRQBJ; wNNQ8: G6K6j: goto eWuqW; S9sQI: $log_data = array("\x75\156\151\x61\x63\x69\x64" => $_W["\x75\156\x69\x61\143\x69\x64"], "\x61\x64\x6d\151\x6e\137\165\x69\144" => $admin_uid, "\141\x64\x6d\151\x6e\x5f\165\163\145\x72\156\x61\x6d\145" => $admin_username, "\154\x6f\x67\137\164\x79\x70\x65" => $log_type, "\x66\165\156\x63\x74\x69\x6f\x6e" => $function, "\143\157\x6e\164\x65\156\164" => $content, "\x69\160" => $ip, "\x61\144\144\164\x69\x6d\145" => time()); goto zJXI8; wb3M2: o2bz7: goto UFp6h; UFp6h: $ip = getenv("\x48\x54\124\x50\x5f\103\114\x49\105\116\124\x5f\111\120"); goto vie2X; zJXI8: return pdo_insert($this->table_shop_syslog, $log_data); goto PyUAY; bWq3l: if (getenv("\x48\124\124\120\137\130\137\x46\x4f\x52\127\x41\x52\104\x45\x44\137\x46\117\122")) { goto pyL4u; } goto Yyimn; eRQBJ: $ip = getenv("\122\105\x4d\x4f\124\105\x5f\x41\104\104\x52"); goto wNNQ8; iGW8O: $ip = $_SERVER["\122\105\115\117\124\x45\137\x41\104\104\x52"]; goto NBgo6; F51Db: if (getenv("\110\124\124\x50\137\x43\x4c\111\x45\x4e\x54\137\111\120")) { goto o2bz7; } goto bWq3l; JI0Li: UzcOb: goto S9sQI; Yyimn: if (getenv("\x52\105\x4d\117\124\x45\137\101\x44\x44\122")) { goto BliNg; } goto iGW8O; eWuqW: goto UzcOb; goto wb3M2; VfI2I: pyL4u: goto lVdQT; vie2X: goto UzcOb; goto VfI2I; lVdQT: $ip = getenv("\110\x54\x54\x50\137\130\137\x46\x4f\122\127\101\x52\x44\105\x44\x5f\x46\117\122"); goto JI0Li; PyUAY: } public function getNoticeCategory() { goto drPf0; g0cDE: if (!empty($list)) { goto m_9DQ; } goto j84L8; OO2Eu: $list = cache_load("\146\171\137\x6c\x65\163\163\x6f\x6e\137" . $_W["\x75\156\151\141\x63\151\x64"] . "\x5f\x73\150\x6f\160\137\x6e\157\x74\x69\143\145\137\143\141\x74\x65\147\157\162\x79\x6c\151\x73\x74"); goto g0cDE; cTYkY: m_9DQ: goto fmx8g; j84L8: $list = pdo_fetchall("\123\x45\x4c\x45\x43\124\x20\x2a\x20\x46\122\117\115\x20" . tablename($this->table_shop_notice_category) . "\40\127\110\105\122\x45\x20\165\x6e\x69\x61\x63\x69\x64\x3d\x3a\x75\156\151\x61\143\151\144\x20\101\116\104\40\x73\164\x61\x74\x75\163\75\72\163\164\x61\x74\x75\x73\40\x4f\122\104\x45\x52\x20\102\x59\40\144\x69\163\x70\x6c\x61\171\157\x72\x64\145\x72\x20\x44\105\x53\x43\x2c\x20\x69\144\x20\101\x53\x43", array("\x3a\165\x6e\x69\x61\143\151\x64" => $_W["\165\x6e\151\x61\x63\x69\x64"], "\72\x73\164\x61\164\165\163" => 1)); goto h5xeI; fmx8g: return $list; goto w4Gts; drPf0: global $_W; goto OO2Eu; h5xeI: cache_write("\146\x79\x5f\154\145\163\x73\157\x6e\137" . $_W["\x75\156\x69\x61\x63\x69\144"] . "\x5f\163\150\157\160\x5f\156\157\x74\151\x63\145\x5f\x63\141\164\x65\147\x6f\x72\x79\154\151\163\164", $list); goto cTYkY; w4Gts: } public function getCategoryList() { goto tOFRw; v2fhA: foreach ($list as $k1 => $v1) { goto L8tEL; NH3D_: VgnAW: goto csow7; Vcmth: f1rtu: goto htIpz; htIpz: $list[$k1] = $v1; goto NH3D_; yYaPf: foreach ($v1["\x73\x65\x63\x6f\x6e\x64"] as $k2 => $v2) { goto zatzJ; LEs_n: epN3C: goto Bd6n6; e2Bj9: $v1["\x73\145\x63\x6f\156\144"][$k2] = $v2; goto LEs_n; zatzJ: $v2["\x74\x68\x69\162\x64"] = pdo_fetchall("\x53\x45\x4c\105\x43\124\x20\x2a\x20\106\122\x4f\x4d\x20" . tablename($this->table_shop_category) . "\40\x57\110\x45\x52\x45\40\x75\156\151\141\143\151\144\x3d\x3a\x75\156\x69\141\x63\x69\x64\x20\x41\116\x44\40\x70\141\x72\145\x6e\x74\x69\144\75\x3a\160\x61\x72\145\x6e\x74\151\x64\40\x4f\x52\104\x45\x52\x20\102\131\x20\x64\x69\x73\x70\x6c\141\171\x6f\162\144\x65\162\40\104\x45\123\103\54\40\151\144\40\104\x45\x53\x43", array("\72\x75\156\151\141\x63\151\144" => $_W["\165\156\x69\141\143\151\x64"], "\72\x70\141\162\145\x6e\164\151\144" => $v2["\x69\144"])); goto e2Bj9; Bd6n6: } goto Vcmth; L8tEL: $v1["\163\x65\x63\157\x6e\144"] = pdo_fetchall("\x53\105\x4c\x45\103\124\40\52\40\106\122\x4f\115\40" . tablename($this->table_shop_category) . "\x20\127\x48\105\x52\x45\40\x75\156\151\x61\x63\x69\x64\75\72\x75\156\x69\x61\x63\151\144\40\101\116\104\x20\160\x61\x72\x65\x6e\164\x69\x64\x3d\72\160\141\162\x65\156\164\151\x64\40\x41\x4e\104\x20\x73\164\x61\x74\x75\x73\x3d\72\163\164\x61\x74\x75\163\40\117\122\104\105\x52\x20\x42\131\40\144\x69\x73\x70\x6c\141\x79\x6f\162\144\x65\162\40\x44\x45\123\x43\54\x20\151\144\40\104\105\x53\x43\40", array("\72\x75\156\151\141\143\x69\x64" => $_W["\x75\156\x69\x61\x63\151\144"], "\72\160\x61\x72\145\x6e\164\x69\x64" => $v1["\151\144"], "\72\x73\x74\141\x74\165\163" => 1)); goto yYaPf; csow7: } goto t8WpD; pVNGw: $list = cache_load("\x66\171\x5f\x6c\145\x73\x73\157\x6e\x5f" . $_W["\165\x6e\151\x61\x63\x69\x64"] . "\137\163\150\157\x70\x5f\143\141\164\x65\147\x6f\162\x79\x6c\x69\x73\164"); goto Ac6ys; xH0XA: cache_write("\146\x79\x5f\x6c\x65\163\x73\157\156\137" . $_W["\x75\156\151\141\143\x69\x64"] . "\137\x73\150\157\x70\x5f\143\141\164\145\147\x6f\x72\171\154\151\163\164", $list); goto Vliib; Vliib: H6izG: goto ooDKi; tOFRw: global $_W; goto pVNGw; Ac6ys: if (!empty($list)) { goto H6izG; } goto tLvnL; ooDKi: return $list; goto QC2PO; tLvnL: $list = pdo_fetchall("\x53\105\114\105\x43\x54\x20\52\40\x46\x52\x4f\x4d\40" . tablename($this->table_shop_category) . "\x20\x57\110\105\122\x45\x20\165\x6e\x69\x61\x63\x69\x64\75\72\x75\x6e\151\x61\x63\151\x64\40\x41\x4e\x44\x20\x70\x61\162\145\156\164\151\x64\x3d\72\x70\x61\162\145\x6e\164\x69\x64\x20\x41\116\104\x20\163\164\141\x74\165\163\75\x3a\x73\164\141\164\165\x73\40\x4f\122\x44\x45\122\x20\x42\x59\x20\x64\x69\x73\x70\x6c\141\x79\157\162\144\145\x72\x20\104\x45\x53\x43\x2c\40\151\x64\x20\104\105\x53\103", array("\x3a\165\156\x69\141\143\151\144" => $_W["\x75\156\151\141\143\x69\x64"], "\72\160\x61\162\145\156\x74\151\144" => 0, "\72\x73\164\x61\164\165\163" => 1)); goto v2fhA; t8WpD: nNlDE: goto xH0XA; QC2PO: } public function getNavigationMenu($location) { goto QvojO; QvojO: global $_W; goto UayBY; bS8pO: if (!empty($list)) { goto oaZkd; } goto x41cq; qgsHE: cache_write("\146\171\137\154\x65\x73\x73\157\x6e\x5f" . $_W["\x75\x6e\151\x61\143\x69\144"] . "\137\x73\150\157\160\137\x6e\x61\x76\x69\147\x61\x74\x69\157\156\137" . $location, $list); goto UZRC3; x41cq: $list = pdo_fetchall("\123\105\x4c\105\103\124\x20\52\40\106\x52\x4f\x4d\40" . tablename($this->table_shop_navigation) . "\40\x57\110\105\x52\x45\40\x75\x6e\x69\x61\143\151\144\x3d\x3a\165\156\151\x61\x63\x69\144\40\101\x4e\104\40\x6c\157\143\x61\x74\x69\157\x6e\75\72\x6c\x6f\x63\x61\x74\151\x6f\156\40\x4f\122\104\x45\122\x20\102\x59\40\144\x69\163\160\154\x61\171\x6f\162\x64\x65\x72\x20\104\x45\123\x43\54\40\x6e\x61\x76\x5f\151\x64\x20\104\x45\x53\103", array("\72\165\x6e\151\x61\x63\x69\144" => $_W["\x75\x6e\151\x61\x63\x69\x64"], "\72\x6c\x6f\143\141\164\151\157\156" => $location)); goto qgsHE; UZRC3: oaZkd: goto HJD90; HJD90: return $list; goto Yass6; UayBY: $list = cache_load("\x66\171\137\x6c\x65\x73\x73\x6f\x6e\x5f" . $_W["\165\x6e\x69\141\x63\x69\144"] . "\x5f\163\x68\157\160\137\156\x61\166\151\x67\141\164\151\x6f\x6e\x5f" . $location); goto bS8pO; Yass6: } public function getGoodsDetailsAdv() { goto NICHv; NICHv: global $_W; goto pAkcD; DaKxF: return $list; goto D_fsp; Sknbq: if (!empty($list)) { goto aHPg3; } goto fVP76; pAkcD: $list = cache_load("\x66\171\137\154\x65\x73\163\x6f\x6e\137" . $_W["\x75\156\151\141\x63\151\x64"] . "\x5f\163\150\x6f\160\137\147\x6f\x6f\x64\163\x5f\144\145\x74\141\x69\154\x73\x5f\x61\144\x76"); goto Sknbq; fVP76: $list = pdo_fetchall("\x53\105\114\105\103\x54\40\x2a\40\x46\122\117\x4d\40" . tablename($this->table_shop_banner) . "\40\127\x48\x45\x52\105\x20\165\x6e\151\x61\143\151\144\75\72\x75\x6e\x69\x61\x63\151\144\x20\101\x4e\104\40\x62\x61\156\156\x65\162\x5f\x74\x79\160\x65\75\x3a\142\141\156\156\145\162\x5f\x74\x79\160\x65\x20\x41\x4e\x44\x20\x69\x73\137\163\150\x6f\x77\75\72\x69\163\x5f\163\x68\x6f\x77\40\x4f\x52\x44\105\122\x20\x42\x59\40\144\151\x73\160\x6c\x61\171\x6f\x72\144\145\x72\40\x44\x45\x53\x43\x2c\40\x62\x61\156\x6e\145\162\137\x69\144\x20\104\x45\x53\103", array("\72\x75\156\x69\141\143\x69\x64" => $_W["\x75\x6e\151\141\143\x69\144"], "\72\142\141\156\156\x65\x72\x5f\164\171\x70\145" => 0, "\72\151\163\x5f\x73\x68\157\167" => 1)); goto T0Pci; T0Pci: cache_write("\x66\171\137\154\145\x73\x73\157\x6e\x5f" . $_W["\165\156\151\141\143\151\144"] . "\137\x73\x68\157\160\x5f\147\157\x6f\144\163\137\x64\145\x74\x61\151\154\163\x5f\141\144\166", $list); goto DZaHA; DZaHA: aHPg3: goto DaKxF; D_fsp: } public function getAttrByValues($value_ids) { goto AxaUE; AxaUE: global $_W; goto W0IwX; vA5JL: $list = pdo_fetchall("\x53\105\x4c\x45\x43\124\40\x61\56\x74\151\164\154\x65\x2c\142\56\x76\141\x6c\165\145\54\x62\56\141\164\164\x72\137\x69\144\x2c\142\x2e\x69\144\40\101\123\x20\x76\141\154\165\145\x5f\151\x64\40\x46\122\x4f\x4d\x20" . tablename($this->table_shop_attr) . "\x20\x61\x20\122\111\x47\x48\124\x20\112\117\111\116\40" . tablename($this->table_shop_value) . "\x20\x62\x20\x4f\x4e\40\x61\x2e\151\144\x3d\142\56\141\x74\x74\162\x5f\x69\144\x20\x57\110\105\x52\105\x20\142\x2e\165\156\x69\141\143\x69\144\75" . $_W["\x75\156\x69\141\x63\151\144"] . "\40\101\x4e\x44\40\x62\x2e\x69\x64\x20\111\116\x20\x28" . implode("\54", $value_ids) . "\51\40\x4f\x52\x44\105\x52\x20\x42\x59\x20\141\56\144\x69\163\x70\154\x61\171\157\x72\144\145\x72\x20\x44\105\123\103\x2c\40\x61\x2e\x69\144\x20\x44\105\123\x43"); goto aAtHm; QHkNk: return $list; goto QqKq8; QqKq8: yndP5: goto vA5JL; W0IwX: $list = array(); goto pAIr1; pAIr1: if (is_array($value_ids)) { goto yndP5; } goto QHkNk; aAtHm: return $list; goto a1BM4; a1BM4: } public function getAttrByAttrIds($attr_ids) { goto aGy2O; O4j27: NrX0p: goto rRHz8; LY0Eu: return $list; goto CgePS; HyuOC: if (is_array($attr_ids)) { goto NrX0p; } goto O73Sw; aGy2O: global $_W; goto RftCk; rRHz8: $list = pdo_fetchall("\x53\105\x4c\105\x43\124\x20\52\x20\x46\122\x4f\115\x20" . tablename($this->table_shop_attr) . "\x20\x57\110\x45\x52\105\x20\x75\156\151\141\143\x69\x64\x3d" . $_W["\165\156\151\141\x63\151\144"] . "\40\x41\x4e\x44\40\x69\144\x20\x49\x4e\x20\x28" . implode("\54", $attr_ids) . "\51\x20\x4f\122\104\x45\x52\x20\x42\x59\x20\144\x69\x73\160\154\x61\171\x6f\162\x64\x65\162\40\x44\x45\x53\x43\54\x20\x69\144\40\104\105\x53\x43"); goto LY0Eu; RftCk: $list = array(); goto HyuOC; O73Sw: return $list; goto O4j27; CgePS: } public function getGoodsLikeById($goods_id) { goto GHor8; yLFj0: $goods = pdo_get($this->table_shop_goods, array("\165\x6e\151\x61\143\151\x64" => $_W["\x75\x6e\x69\x61\143\151\144"], "\163\x74\141\164\x75\163" => 1, "\x69\x64" => $goods_id), array("\154\151\x6b\x65\x5f\147\157\x6f\144\x73\137\151\144\163")); goto vBnBK; TYLn1: cache_write("\x66\x79\137\154\145\x73\163\x6f\156\137" . $_W["\165\156\151\x61\x63\x69\144"] . "\x5f\163\150\x6f\x70\x5f\154\x69\x6b\x65\x5f\147\157\x6f\x64\x73\137" . $goods_id, $list); goto PLlBd; xKW6A: return $list; goto rkuzP; pFiEs: $list = array(); goto yLFj0; GHor8: global $_W; goto lC2J4; PLlBd: igWDu: goto xKW6A; lC2J4: $list = cache_load("\146\171\x5f\154\145\x73\x73\157\156\137" . $_W["\165\x6e\x69\x61\143\x69\x64"] . "\137\163\150\x6f\x70\x5f\x6c\x69\153\145\137\147\157\157\x64\x73\x5f" . $goods_id); goto KLhHw; jgBIl: ePuFD: goto TYLn1; vBnBK: $like_goods_ids = json_decode($goods["\x6c\x69\x6b\x65\x5f\x67\x6f\x6f\144\163\x5f\x69\144\163"], true); goto Vr10l; EjJbR: nLgAU: goto jgBIl; Vr10l: if (!$like_goods_ids) { goto ePuFD; } goto TYZfS; TYZfS: foreach ($like_goods_ids as $v) { $list[] = pdo_get($this->table_shop_goods, array("\x75\x6e\x69\x61\143\151\144" => $_W["\165\x6e\x69\x61\x63\151\144"], "\151\144" => $v), array("\151\144", "\x74\x69\164\x6c\x65", "\x63\157\x76\145\x72", "\x73\145\154\x6c\137\164\x79\x70\145", "\x70\x72\x69\143\x65", "\x69\x6e\x74\x65\x67\162\141\x6c")); ypUi9: } goto EjJbR; KLhHw: if (!empty($list)) { goto igWDu; } goto pFiEs; rkuzP: } public function getRefundReasonList() { goto nU_pb; Nnf_P: cache_write("\146\171\x5f\x6c\x65\163\x73\x6f\156\137" . $_W["\165\x6e\x69\x61\143\151\x64"] . "\137\163\x68\x6f\160\137\162\x65\146\165\x6e\x64\x5f\x72\145\x61\163\x6f\x6e", $list); goto hJZy_; x9Dbw: if (!empty($list)) { goto qOuJY; } goto OMPPd; hJZy_: qOuJY: goto jv4me; AyBGg: $list = cache_load("\146\x79\x5f\x6c\145\163\163\157\x6e\137" . $_W["\x75\156\x69\x61\x63\x69\x64"] . "\137\x73\x68\x6f\160\x5f\162\145\146\x75\x6e\x64\x5f\162\145\141\163\157\156"); goto x9Dbw; nU_pb: global $_W; goto AyBGg; OMPPd: $list = pdo_fetchall("\123\x45\114\105\103\124\x20\52\x20\x46\122\117\x4d\x20" . tablename($this->table_shop_refund_reason) . "\40\127\110\105\122\105\x20\165\156\151\141\x63\151\x64\75\72\x75\x6e\x69\x61\143\x69\144\x20\x4f\122\x44\105\122\x20\x42\x59\40\x64\x69\x73\x70\x6c\x61\171\157\162\x64\x65\162\x20\x44\x45\123\103\54\40\151\144\x20\x41\x53\x43", array("\72\x75\x6e\151\141\x63\x69\x64" => $_W["\165\156\151\x61\x63\x69\x64"])); goto Nnf_P; jv4me: return $list; goto sDhX1; sDhX1: } public function updateMemberCart($uid) { goto ySmdD; omBGw: foreach ($check_list as $v1) { goto JJerf; jmaMl: pdo_delete($this->table_shop_cart, array("\x69\144" => $v1["\x69\144"])); goto pemqg; rPaCN: pdo_update($this->table_shop_cart, $cart_data, array("\x69\144" => $v1["\151\x64"])); goto AY0Zj; su5Kq: if ($goods["\x73\160\145\x63\x5f\x73\x77\151\164\x63\150"]) { goto Oh0UO; } goto QI6Op; NmD3e: iRTLJ: goto MWdtC; o8mTG: pdo_update($this->table_shop_cart, $cart_data, array("\151\x64" => $v1["\x69\144"])); goto r7C56; a_bsC: foreach ($value_ids as $v2) { goto NRTwC; FU_gw: pdo_update($this->table_shop_cart, array("\163\x74\x61\x74\x75\x73" => "\55\61"), array("\x69\x64" => $v1["\x69\x64"])); goto UHBEn; A3atK: goto Zzv6y; goto RV5Vo; VO9sQ: D2ftl: goto zXNFM; PhwaR: if (empty($value)) { goto Dv2bh; } goto xNpAF; NRTwC: $value = pdo_get($this->table_shop_value, array("\x75\x6e\x69\141\x63\151\x64" => $uniacid, "\151\144" => $v2)); goto PhwaR; WsN5O: goto D2ftl; goto eRNl7; WJWmX: if (!empty($attr)) { goto CWhBn; } goto XdZXA; eRNl7: Dv2bh: goto FU_gw; RV5Vo: CWhBn: goto WsN5O; UHBEn: goto Zzv6y; goto VO9sQ; zXNFM: WXIwW: goto zrb3I; XdZXA: pdo_update($this->table_shop_cart, array("\163\164\x61\x74\x75\163" => "\x2d\x31"), array("\151\144" => $v1["\x69\x64"])); goto A3atK; xNpAF: $attr = pdo_get($this->table_shop_attr, array("\x75\x6e\x69\x61\143\x69\144" => $uniacid, "\151\x64" => $value["\x61\x74\164\162\x5f\x69\144"])); goto WJWmX; zrb3I: } goto v313A; k_m2q: goto pUpJc; goto gCP8a; QI6Op: if (!$goods["\x73\164\x6f\x63\153"]) { goto l_JJF; } goto t0yi6; TZ2CF: goto VIGD5; goto Dsjrh; Xed86: if (!$value_ids) { goto sDfYP; } goto a_bsC; t0yi6: $cart_data = array("\x70\162\151\x63\x65" => $goods["\160\x72\151\x63\145"], "\151\x6e\x74\x65\147\162\x61\154" => $goods["\x69\156\164\145\147\162\x61\154"], "\x74\x6f\x74\x61\x6c" => $v1["\x74\x6f\164\141\154"] <= $goods["\163\x74\x6f\x63\x6b"] ? $v1["\164\x6f\164\x61\154"] : $goods["\x73\164\x6f\x63\x6b"], "\163\164\x61\x74\x75\163" => 1); goto rPaCN; baEWh: $goods = pdo_get($this->table_shop_goods, array("\165\x6e\151\141\143\x69\x64" => $uniacid, "\x69\144" => $v1["\147\157\157\x64\163\137\151\144"], "\x73\164\141\x74\x75\x73" => 1)); goto sXKU7; Dsjrh: HR7jQ: goto qklBx; hqGMa: l_JJF: goto AKQ2c; sm8nU: if (empty($sku)) { goto HR7jQ; } goto GY4gG; AY0Zj: goto XKupH; goto hqGMa; tzPn1: goto pUpJc; goto sxyOv; JeGTU: $cart_data = array("\x70\x72\x69\143\145" => $sku["\160\162\x69\x63\145"], "\x69\156\x74\145\147\x72\x61\154" => $sku["\x69\x6e\164\145\147\x72\141\154"], "\x74\x6f\x74\141\154" => $v1["\164\x6f\x74\141\154"] <= $sku["\164\x6f\164\141\x6c"] ? $v1["\164\157\x74\x61\154"] : $sku["\164\157\x74\141\154"], "\163\164\141\x74\165\x73" => 1); goto o8mTG; kn66o: Oh0UO: goto QiLgn; qklBx: pdo_update($this->table_shop_cart, array("\x73\164\x61\x74\x75\163" => "\55\61"), array("\151\x64" => $v1["\151\x64"])); goto V5ZUy; AKQ2c: pdo_update($this->table_shop_cart, array("\x73\x74\x61\164\165\163" => "\55\61"), array("\x69\x64" => $v1["\x69\144"])); goto e4mml; v313A: Zzv6y: goto ZrDK8; GY4gG: if (!$sku["\164\157\164\x61\154"]) { goto iRTLJ; } goto JeGTU; QiLgn: $sku = pdo_get($this->table_shop_sku, array("\x75\156\151\141\143\151\x64" => $uniacid, "\151\144" => $v1["\163\153\x75\137\151\x64"], "\x67\157\x6f\x64\163\137\x69\144" => $v1["\x67\157\157\144\x73\137\151\x64"])); goto sm8nU; CIOBz: pdo_delete($this->table_shop_cart, array("\151\x64" => $v1["\151\x64"])); goto tzPn1; V5ZUy: goto pUpJc; goto A1KOl; A1KOl: VIGD5: goto YeOIn; MWdtC: pdo_update($this->table_shop_cart, array("\163\x74\x61\164\165\163" => "\x2d\61"), array("\x69\x64" => $v1["\151\x64"])); goto o2NRj; r7C56: goto QeXxY; goto NmD3e; eYngW: GIvyd: goto su5Kq; ershR: $value_ids = explode("\54", $sku["\x76\141\154\x75\145\137\151\x64\x73"]); goto Xed86; YeOIn: pUpJc: goto tAv1b; ZrDK8: sDfYP: goto TZ2CF; gCP8a: m9ovs: goto UlVp2; UlVp2: if (!($goods["\147\x6f\157\144\163\137\x74\x79\160\x65"] != 1)) { goto GIvyd; } goto jmaMl; e4mml: XKupH: goto G8KBE; pemqg: goto pUpJc; goto eYngW; JJerf: if (!($v1["\147\157\x6f\144\x73\137\164\x79\x70\145"] != 1)) { goto BLvey; } goto CIOBz; sXKU7: if (!($goods["\163\164\x61\164\165\163"] != 1)) { goto m9ovs; } goto uhbJw; G8KBE: goto pUpJc; goto kn66o; uhbJw: pdo_update($this->table_shop_cart, array("\163\x74\x61\164\x75\163" => "\x2d\61"), array("\151\x64" => $v1["\151\x64"])); goto k_m2q; o2NRj: goto pUpJc; goto su8Wx; su8Wx: QeXxY: goto ershR; sxyOv: BLvey: goto baEWh; tAv1b: } goto p0_5r; ncAhx: if (!$check_list) { goto Q5ebp; } goto omBGw; cEQUm: Q5ebp: goto LOzmb; YeBXd: $uniacid = $_W["\x75\156\x69\141\143\151\144"]; goto Mv_o2; ySmdD: global $_W; goto YeBXd; p0_5r: Uon1l: goto cEQUm; Mv_o2: $check_list = pdo_getall($this->table_shop_cart, array("\x75\x6e\151\141\x63\151\144" => $uniacid, "\x75\x69\144" => $uid)); goto ncAhx; LOzmb: } public function getParentid($uid) { goto YJvnM; fK3l4: $parent = pdo_get($this->table_member, array("\x75\x6e\x69\x61\143\x69\x64" => $_W["\x75\x6e\151\141\x63\151\144"], "\x75\x69\x64" => $uid), array("\160\141\x72\x65\156\164\151\x64")); goto D59Id; PH659: goto T3Qrc; goto F0wxo; F0wxo: nCV02: goto QzxI1; YJvnM: global $_W; goto fK3l4; QzxI1: return $parent["\x70\x61\162\x65\156\x74\x69\144"]; goto UYP9s; D59Id: if ($parent) { goto nCV02; } goto pspOi; UYP9s: T3Qrc: goto sC_Ne; pspOi: return "\x30"; goto PH659; sC_Ne: } public function getAgentCommission1($goods, $goods_commossion, $setting_commossion, $uid) { goto FGd2J; Y5HQE: $commission = round($goods["\x70\162\x69\143\145"] * $setting_commossion["\143\x6f\155\155\151\x73\163\151\157\156\61"] * 0.01, 2); goto hxqha; bTB45: if (!($goods_commossion["\143\157\155\155\151\163\x73\x69\157\x6e\137\164\x79\160\145"] == 0)) { goto KQFFT; } goto ey0LZ; MahXX: XNH1d: goto qhwy1; ey0LZ: if ($goods_commossion["\x63\157\155\x6d\x69\163\x73\151\x6f\x6e\x31"]) { goto Mf8V5; } goto VM4RF; JawYg: if ($member["\163\164\x61\x74\165\163"]) { goto TKywg; } goto cT35w; lSMl0: TKywg: goto v5ynH; Zo7l2: return $commission = round($goods["\160\x72\x69\x63\x65"] * $goods_commossion["\143\x6f\x6d\x6d\151\x73\x73\x69\x6f\x6e\61"] * 0.01, 2); goto uDyH2; dPqwP: $member = pdo_get($this->table_member, array("\165\x6e\151\x61\143\x69\x64" => $_W["\x75\x6e\151\x61\x63\x69\x64"], "\165\151\144" => $uid), array("\163\x74\141\164\165\163")); goto JawYg; Fmlw_: goto nzS6f; goto nFl22; tgn63: if (!($goods_commossion["\143\x6f\155\x6d\151\163\163\x69\x6f\x6e\137\164\x79\x70\x65"] == 0)) { goto j3PaD; } goto d22kD; pvnCF: return $commission = $goods_commossion["\x63\157\x6d\155\x69\163\x73\x69\x6f\x6e\x31"]; goto ZHTRy; VM4RF: $member = pdo_fetch("\x53\105\114\x45\x43\124\40\142\56\143\157\x6d\x6d\x69\163\163\151\157\x6e\61\40\106\x52\117\115\40" . tablename($this->table_member) . "\x20\x61\x20\x4c\x45\x46\124\x20\x4a\x4f\x49\x4e\40" . tablename($this->table_commission_level) . "\x20\x62\40\117\x4e\x20\141\x2e\141\147\x65\x6e\164\x5f\154\x65\x76\145\x6c\x3d\x62\x2e\151\144\40\x57\110\x45\x52\105\x20\141\56\x75\x6e\x69\141\x63\151\x64\x3d\72\165\156\151\x61\x63\x69\x64\x20\101\116\x44\40\x61\x2e\x75\x69\x64\x3d\72\165\x69\144", array("\72\165\x6e\x69\141\x63\x69\x64" => $_W["\x75\x6e\x69\x61\143\151\x64"], "\72\165\151\x64" => $uid)); goto PUmOU; nFl22: Mf8V5: goto Zo7l2; tai5I: ws5AB: goto H7OCR; H7OCR: $commission = round($goods["\160\162\151\x63\145"] * $member["\x63\x6f\155\155\151\x73\163\x69\157\156\x31"] * 0.01, 2); goto PreJb; ZHTRy: WPUED: goto sHFHv; d22kD: return $commission = 0; goto Wtso0; FGd2J: global $_W; goto dPqwP; v5ynH: if (!($goods_commossion["\143\157\x6d\x6d\x69\x73\163\151\x6f\156\137\164\171\x70\x65"] == 1)) { goto WPUED; } goto pvnCF; BrLK9: goto XNH1d; goto pAT2u; cT35w: return 0; goto lSMl0; xCWZw: return $commission; goto Fmlw_; PUmOU: if ($member["\143\157\155\155\151\x73\163\151\157\x6e\61"]) { goto ws5AB; } goto Y5HQE; S7rDI: KQFFT: goto BrLK9; Wtso0: j3PaD: goto MahXX; pAT2u: VujpI: goto tgn63; uDyH2: nzS6f: goto S7rDI; hxqha: goto ppT20; goto tai5I; PreJb: ppT20: goto xCWZw; sHFHv: if ($goods["\x73\x65\154\154\x5f\164\171\160\x65"] == 1) { goto VujpI; } goto bTB45; qhwy1: } public function getAgentCommission2($goods, $goods_commossion, $setting_commossion, $uid) { goto XtoWW; p3qmL: $member = pdo_fetch("\x53\x45\114\x45\x43\124\x20\x62\x2e\143\157\x6d\x6d\x69\163\163\151\157\x6e\x32\40\x46\122\117\115\x20" . tablename($this->table_member) . "\x20\x61\40\x4c\105\106\x54\x20\112\117\x49\116\40" . tablename($this->table_commission_level) . "\x20\x62\x20\117\x4e\x20\x61\56\141\147\145\156\x74\x5f\154\x65\x76\x65\154\75\x62\x2e\151\x64\x20\x57\110\105\122\105\40\141\x2e\x75\x6e\151\x61\x63\x69\144\75\x3a\165\x6e\151\x61\143\x69\x64\x20\x41\116\104\40\x61\x2e\x75\x69\144\x3d\x3a\x75\151\x64", array("\72\x75\x6e\x69\141\143\x69\144" => $_W["\x75\156\151\x61\143\151\144"], "\x3a\165\151\x64" => $uid)); goto zv9P2; NUfyK: lQB2U: goto eSppE; wqOls: if (!($goods_commossion["\x63\157\x6d\x6d\x69\x73\163\x69\x6f\156\137\164\x79\x70\145"] == 0)) { goto SOwBE; } goto NeWoV; KlBz8: $commission = round($goods["\160\x72\x69\x63\x65"] * $setting_commossion["\x63\157\x6d\x6d\x69\x73\x73\x69\x6f\156\62"] * 0.01, 2); goto BZrWb; bQpuO: if ($member["\163\164\x61\x74\x75\163"]) { goto jXmkD; } goto J3YoF; XtoWW: global $_W; goto UFnl6; ceG1B: U6qDS: goto cFEYF; xKT4y: jXmkD: goto q4PtS; UFnl6: $member = pdo_get($this->table_member, array("\165\156\151\x61\143\x69\x64" => $_W["\165\156\151\141\143\x69\x64"], "\x75\x69\144" => $uid), array("\x73\x74\x61\164\x75\x73")); goto nyrlZ; CiEto: $commission = round($goods["\x70\x72\151\x63\x65"] * $member["\x63\x6f\x6d\155\151\163\x73\151\157\156\x32"] * 0.01, 2); goto O76Dv; KqyZy: return $commission = round($goods["\x70\x72\x69\143\145"] * $goods_commossion["\143\157\155\x6d\151\x73\x73\151\x6f\x6e\x32"] * 0.01, 2); goto uPsGo; eSppE: if ($goods["\x73\145\x6c\x6c\137\164\x79\160\145"] == 1) { goto Rb4_v; } goto ZFVE7; ZFVE7: if (!($goods_commossion["\x63\157\x6d\155\x69\163\163\x69\157\x6e\x5f\164\171\x70\145"] == 0)) { goto amGFY; } goto Hm91G; VL97J: return 0; goto ceG1B; nyrlZ: if ($member["\163\164\141\164\x75\163"]) { goto U6qDS; } goto VL97J; BZrWb: goto mbM39; goto LNZu1; iwHEE: F_hTX: goto MkomI; Hm91G: if ($goods_commossion["\143\157\155\x6d\151\163\x73\151\157\x6e\x32"]) { goto NgIs3; } goto p3qmL; NeWoV: return $commission = 0; goto ygJH7; zv9P2: if ($member["\x63\x6f\x6d\x6d\x69\163\x73\x69\157\x6e\62"]) { goto w7thr; } goto KlBz8; J3YoF: return 0; goto xKT4y; okM2W: goto F_hTX; goto EIze3; O76Dv: mbM39: goto ofi1k; R5poE: amGFY: goto okM2W; TV6YM: return $commission = $goods_commossion["\143\x6f\155\155\151\163\x73\x69\x6f\x6e\62"]; goto NUfyK; LNZu1: w7thr: goto CiEto; q4PtS: if (!($goods_commossion["\x63\x6f\155\x6d\x69\163\163\151\x6f\x6e\137\x74\171\160\145"] == 1)) { goto lQB2U; } goto TV6YM; ABMGw: NgIs3: goto KqyZy; cFEYF: $member = pdo_get($this->table_member, array("\x75\156\x69\x61\x63\x69\x64" => $_W["\x75\x6e\x69\141\143\x69\x64"], "\x75\x69\x64" => $uid), array("\163\x74\x61\164\165\x73")); goto bQpuO; EIze3: Rb4_v: goto wqOls; ofi1k: return $commission; goto hGplh; uPsGo: kzA_v: goto R5poE; hGplh: goto kzA_v; goto ABMGw; ygJH7: SOwBE: goto iwHEE; MkomI: } public function getAgentCommission3($goods, $goods_commossion, $setting_commossion, $uid) { goto teno_; V1LUM: goto jz26K; goto cblCO; KgvjK: if ($goods_commossion["\143\x6f\x6d\155\x69\x73\163\x69\157\156\63"]) { goto voiYw; } goto mn6Zw; auztb: Kr1Ml: goto iPoAH; hzimi: C01k2: goto sBJEQ; RasT9: goto AwMCX; goto wdFwQ; sBJEQ: if (!($goods_commossion["\143\157\155\x6d\x69\163\x73\151\157\156\137\x74\x79\x70\x65"] == 1)) { goto MSB0F; } goto eS_qK; HsrUc: if (!($goods_commossion["\x63\157\155\155\x69\x73\163\151\157\x6e\137\164\171\160\145"] == 0)) { goto QITf7; } goto KD39o; It_aQ: return $commission = round($goods["\160\x72\151\x63\145"] * $goods_commossion["\x63\x6f\155\x6d\x69\x73\163\151\157\156\63"] * 0.01, 2); goto auztb; mn6Zw: $member = pdo_fetch("\x53\x45\114\105\x43\124\x20\142\56\143\x6f\155\155\x69\163\x73\151\x6f\156\x33\x20\106\122\x4f\115\x20" . tablename($this->table_member) . "\40\x61\40\114\x45\106\124\x20\112\x4f\x49\116\x20" . tablename($this->table_commission_level) . "\40\x62\x20\117\x4e\x20\x61\x2e\x61\x67\x65\x6e\164\137\x6c\x65\x76\x65\x6c\x3d\142\x2e\x69\x64\40\x57\x48\105\122\x45\x20\141\56\x75\156\151\141\x63\x69\144\75\x3a\x75\156\x69\x61\143\151\144\40\101\116\104\40\141\56\165\x69\144\75\x3a\165\x69\144", array("\x3a\165\156\151\141\143\151\144" => $_W["\165\156\151\x61\143\x69\144"], "\x3a\x75\x69\144" => $uid)); goto Hxn2Y; eWCjk: QITf7: goto kN1C0; yF90k: $commission = round($goods["\x70\162\x69\143\145"] * $setting_commossion["\143\x6f\155\155\x69\x73\x73\x69\x6f\x6e\63"] * 0.01, 2); goto RasT9; yo4YC: goto Kr1Ml; goto ug7OG; d2HhH: $commission = round($goods["\160\x72\151\143\x65"] * $member["\x63\x6f\x6d\155\151\x73\163\151\157\156\x33"] * 0.01, 2); goto Z0X2V; UOVQ0: return $commission; goto yo4YC; ug7OG: voiYw: goto It_aQ; teno_: global $_W; goto gF6eX; XnzE0: if (!($goods_commossion["\x63\x6f\155\155\151\163\163\151\x6f\x6e\x5f\164\x79\x70\x65"] == 0)) { goto lzzvM; } goto KgvjK; Z0X2V: AwMCX: goto UOVQ0; wdFwQ: MBL2v: goto d2HhH; kJugY: if ($member["\x73\x74\141\x74\x75\163"]) { goto C01k2; } goto l1x4Q; TB_kl: MSB0F: goto O5BPS; eS_qK: return $commission = $goods_commossion["\143\x6f\155\x6d\151\163\x73\151\157\x6e\x33"]; goto TB_kl; O5BPS: if ($goods["\x73\x65\154\154\x5f\164\171\160\x65"] == 1) { goto guWsF; } goto XnzE0; KD39o: return $commission = 0; goto eWCjk; kN1C0: jz26K: goto lPIVB; cblCO: guWsF: goto HsrUc; Hxn2Y: if ($member["\x63\x6f\155\x6d\x69\163\x73\151\157\156\63"]) { goto MBL2v; } goto yF90k; l1x4Q: return 0; goto hzimi; gF6eX: $member = pdo_get($this->table_member, array("\x75\x6e\x69\x61\143\151\144" => $_W["\x75\x6e\151\141\x63\x69\x64"], "\165\x69\144" => $uid), array("\x73\164\141\x74\165\x73")); goto kJugY; iPoAH: lzzvM: goto V1LUM; lPIVB: } public function minusTotal($goods, $total) { goto ierHC; XbAB8: AHCVr: goto uF_Am; r6RZi: $update_goods["\165\x70\x64\141\164\x65\137\164\x69\x6d\145"] = time(); goto eAaPs; Ov_ZH: if (!$goods["\163\x70\x65\143\x5f\x73\167\151\164\143\x68"]) { goto AHCVr; } goto PHZJ5; PHZJ5: pdo_update($this->table_shop_sku, array("\x74\157\164\x61\x6c\x20\x2d\75" => $total), array("\x75\156\x69\x61\143\x69\144" => $_W["\165\156\151\x61\143\x69\x64"], "\x69\144" => $goods["\x73\x6b\x75\137\x69\144"])); goto XbAB8; eAaPs: pdo_update($this->table_shop_goods, $update_goods, array("\x75\x6e\x69\141\x63\151\144" => $_W["\165\156\151\x61\143\x69\144"], "\151\x64" => $goods["\147\157\x6f\x64\x73\x5f\151\144"])); goto AKi0J; ierHC: global $_W; goto WERlZ; WERlZ: $update_goods = array(); goto Ov_ZH; uF_Am: $update_goods["\163\164\157\143\153\40\55\x3d"] = $total; goto r6RZi; AKi0J: } public function addTotal($goods, $total) { goto O4WKf; X5CaP: N3rYJ: goto lnX_q; IM9A8: if (!$goods["\163\160\145\x63\137\163\167\x69\x74\143\150"]) { goto N3rYJ; } goto teAgU; lnX_q: $update_goods["\163\x74\157\x63\x6b\x20\x2b\x3d"] = $total; goto FI3F6; teAgU: pdo_update($this->table_shop_sku, array("\164\x6f\x74\141\154\x20\53\x3d" => $total), array("\165\156\x69\141\143\151\144" => $_W["\165\156\x69\141\x63\x69\x64"], "\x69\x64" => $goods["\x73\x6b\165\x5f\x69\144"])); goto X5CaP; O4WKf: global $_W; goto vfAtM; MKQYK: pdo_update($this->table_shop_goods, $update_goods, array("\x75\x6e\151\141\x63\151\144" => $_W["\165\156\x69\141\143\151\144"], "\151\x64" => $goods["\x67\157\x6f\x64\x73\137\x69\144"])); goto nJwKE; FI3F6: $update_goods["\x75\160\x64\141\164\145\137\164\151\x6d\x65"] = time(); goto MKQYK; vfAtM: $update_goods = array(); goto IM9A8; nJwKE: } public function recordShopCommission($order, $comsetting) { goto je5BF; BQe2R: goto mz67c; goto IEdaJ; o4u8J: gtWsl: goto KR3sC; KR3sC: SO3DX: goto zkTNI; mOtUo: mz67c: goto o4u8J; Q10z7: $item = array("\165\x69\144" => $order["\x6d\x65\155\142\145\162\61"], "\143\x6f\x6d\155\x69\x73\163\x69\x6f\x6e" => $order["\143\157\155\x6d\x69\163\163\x69\157\x6e\61"], "\147\162\x61\x64\145" => 1, "\x72\x65\155\x61\x72\x6b" => "\61\347\xba\247\xe4\xbd\xa3\xe9\x87\x91\72\xe8\xae\xa2\345\x8d\225\xe5\x8f\267" . $order["\x6f\162\144\x65\162\163\156"] . "\357\274\x8c\347\224\250\xe6\x88\xb7\xe4\xbf\xa1\xe6\201\257\72\x5b\x75\x69\x64\x3a" . $order["\165\151\144"] . "\x5d"); goto rstWb; YW13T: $memberVip1 = pdo_fetchall("\123\x45\114\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\40" . tablename($this->table_member_vip) . "\x20\127\x48\x45\x52\x45\x20\x75\x69\x64\x3d\72\165\x69\x64\40\101\x4e\x44\x20\166\141\154\151\x64\151\x74\171\x3e\x3a\x76\x61\154\x69\144\x69\x74\x79", array("\72\x75\x69\144" => $order["\x6d\x65\x6d\142\145\162\x31"], "\72\x76\x61\x6c\151\x64\151\164\x79" => time())); goto Ut5gb; tQedo: $this->insertToShopCommission($order, $item); goto T6iS_; Xdd9w: pdo_update($this->table_shop_order_goods, $update_order, array("\x6f\162\144\x65\162\x69\144" => $order["\151\144"])); goto SbxId; VHW1F: goto pc5az; goto pq5Sy; VbGsR: dUQQH: goto YW13T; A4QCQ: RP86i: goto IZWrD; SISRY: $this->insertToShopCommission($order, $item); goto HexMg; HexMg: goto YEAyX; goto By7Wr; fw62g: if ($comsetting["\x73\x61\154\x65\137\162\141\156\x6b"] == 2) { goto u0PLC; } goto GesPK; zkTNI: if (empty($update_order)) { goto SYaFT; } goto iZRhw; V19ya: $update_order["\143\x6f\155\x6d\x69\x73\163\151\157\156\63"] = 0; goto mOtUo; MJ7DE: $item = array("\165\151\144" => $order["\155\x65\155\x62\x65\x72\x32"], "\x63\x6f\x6d\155\x69\x73\163\x69\x6f\156" => $order["\x63\157\x6d\155\x69\163\163\x69\x6f\x6e\x32"], "\147\x72\141\x64\145" => 2, "\x72\x65\x6d\141\162\153" => "\62\xe7\272\xa7\xe4\xbd\xa3\351\207\221\72\350\256\xa2\345\x8d\225\xe5\217\xb7" . $order["\x6f\x72\144\x65\162\x73\156"] . "\357\274\x8c\347\x94\xa8\xe6\210\267\344\277\241\xe6\x81\257\x3a\133\165\151\144\x3a" . $order["\x75\x69\144"] . "\x5d"); goto hhEK6; iZRhw: pdo_update($this->table_shop_order, $update_order, array("\151\x64" => $order["\151\x64"])); goto Xdd9w; T6iS_: goto h1MlF; goto eJHyi; By7Wr: TNTYf: goto dS0_k; cXqzA: h1MlF: goto bCbqV; je5BF: $update_order = array(); goto u1pak; OhbPU: pc5az: goto S1Yd1; lqRWg: $item = array("\165\151\x64" => $order["\155\x65\155\x62\x65\162\63"], "\x63\x6f\x6d\x6d\x69\163\x73\x69\x6f\156" => $order["\143\x6f\x6d\155\x69\163\x73\x69\x6f\156\63"], "\147\x72\x61\x64\145" => 3, "\x72\x65\155\x61\x72\x6b" => "\63\347\xba\247\xe4\275\xa3\xe9\207\x91\x3a\xe8\256\242\345\x8d\x95\345\x8f\267" . $order["\157\x72\x64\x65\162\x73\156"] . "\357\xbc\214\xe7\x94\250\xe6\210\xb7\344\277\xa1\346\201\257\72\x5b\x75\x69\144\x3a" . $order["\165\x69\x64"] . "\135"); goto fw62g; u1pak: if (!($order["\155\x65\x6d\142\145\x72\x31"] && $order["\x63\157\x6d\x6d\151\x73\163\151\157\156\61"] > 0)) { goto RP86i; } goto Q10z7; IEdaJ: MBw4S: goto V19ya; Vjuf_: $memberVip2 = pdo_fetchall("\x53\x45\x4c\105\103\x54\x20\x2a\40\106\122\117\x4d\x20" . tablename($this->table_member_vip) . "\40\127\110\105\122\x45\40\165\151\x64\x3d\72\x75\151\144\x20\x41\x4e\x44\40\166\141\154\x69\x64\151\164\x79\76\72\166\141\154\x69\x64\151\164\x79", array("\x3a\165\151\144" => $order["\x6d\x65\155\142\x65\x72\x32"], "\72\166\141\x6c\x69\x64\151\x74\171" => time())); goto v4N_J; rstWb: if ($comsetting["\163\x61\x6c\145\137\162\141\x6e\153"] == 2) { goto dUQQH; } goto VLaI5; kMc9h: $this->insertToShopCommission($order, $item); goto BQe2R; dS0_k: $update_order["\x63\157\x6d\155\151\163\x73\151\x6f\x6e\62"] = 0; goto fMnFQ; bCbqV: GOJoq: goto A4QCQ; Ut5gb: if (empty($memberVip1)) { goto x898H; } goto tQedo; v4N_J: if (empty($memberVip2)) { goto TNTYf; } goto SISRY; spSkQ: $this->insertToShopCommission($order, $item); goto VHW1F; Hl5fS: if (!($order["\155\145\155\142\x65\x72\63"] && $order["\143\157\155\155\x69\163\x73\151\x6f\156\63"] > 0)) { goto SO3DX; } goto lqRWg; e0itn: if (empty($memberVip3)) { goto MBw4S; } goto kMc9h; TU4LO: goto GOJoq; goto VbGsR; hhEK6: if ($comsetting["\x73\141\154\145\137\x72\x61\156\x6b"] == 2) { goto GamYf; } goto spSkQ; jspep: $update_order["\x63\157\x6d\155\x69\163\163\151\x6f\156\61"] = 0; goto cXqzA; SbxId: SYaFT: goto Bfa7V; fMnFQ: YEAyX: goto OhbPU; eJHyi: x898H: goto jspep; pq5Sy: GamYf: goto Vjuf_; O4UKm: $memberVip3 = pdo_fetchall("\x53\105\114\x45\x43\124\40\x2a\x20\106\122\x4f\x4d\40" . tablename($this->table_member_vip) . "\x20\x57\x48\105\122\x45\40\165\151\x64\75\x3a\x75\x69\x64\x20\x41\116\x44\x20\x76\141\x6c\x69\144\151\x74\x79\76\x3a\166\x61\x6c\151\x64\x69\x74\171", array("\72\x75\151\144" => $order["\x6d\x65\x6d\x62\145\x72\x33"], "\72\166\141\x6c\x69\144\151\164\x79" => time())); goto e0itn; ecT1I: goto gtWsl; goto h9OR4; GesPK: $this->insertToShopCommission($order, $item); goto ecT1I; IZWrD: if (!($order["\x6d\145\155\x62\x65\162\62"] && $order["\143\x6f\x6d\x6d\151\163\x73\x69\157\x6e\62"] > 0)) { goto JmSk7; } goto MJ7DE; VLaI5: $this->insertToShopCommission($order, $item); goto TU4LO; h9OR4: u0PLC: goto O4UKm; S1Yd1: JmSk7: goto Hl5fS; Bfa7V: } private function insertToShopCommission($order, $item) { $data = array("\165\156\151\x61\143\151\144" => $order["\x75\156\151\141\x63\151\x64"], "\157\162\144\145\162\x69\144" => $order["\151\144"], "\165\151\144" => $item["\165\151\x64"], "\x67\x6f\x6f\144\x73\137\x6e\x61\155\145" => $order["\164\151\164\154\145"], "\157\x72\x64\x65\162\137\x61\x6d\x6f\x75\156\164" => $order["\x70\162\x69\143\145"], "\x63\157\155\x6d\x69\x73\163\151\x6f\x6e" => $item["\143\157\155\155\151\x73\163\x69\x6f\156"], "\x67\x72\141\144\x65" => $item["\x67\x72\x61\144\x65"], "\162\x65\x6d\141\162\153" => $item["\x72\x65\x6d\141\162\153"], "\x62\165\x79\x65\x72\x5f\165\x69\144" => $order["\165\x69\144"], "\141\x64\144\x74\x69\155\145" => time()); pdo_insert($this->table_shop_commission_log, $data); } public function sendShopVirtual($order, $shop_setting) { goto p1gBi; A0Zd_: htKnZ: goto B8zBn; p1gBi: $order_goods = pdo_get($this->table_shop_order_goods, array("\x75\156\151\x61\x63\x69\x64" => $order["\x75\x6e\x69\x61\143\151\x64"], "\157\162\144\x65\x72\151\x64" => $order["\x69\144"])); goto QX9Sl; RQxcC: logging_run("\xe8\x99\x9a\346\213\237\345\x95\206\xe5\223\201\345\xba\223\xe5\xad\230\344\270\x8d\350\266\263\357\274\214\xe5\x8f\x91\xe8\xb4\xa7\xe5\244\261\xe8\264\245\xef\xbc\x9a\350\256\xa2\345\x8d\225\xe7\274\226\345\x8f\xb7\xef\xbc\x9a{$order["\x6f\162\144\145\162\x73\156"]}\xef\xbc\x8c\xe5\x95\x86\xe5\223\201\345\x90\x8d\xe7\xa7\xb0\xef\xbc\232{$order_goods["\x74\151\164\154\x65"]}", "\x74\162\141\143\145", "\146\x79\137\154\145\x73\x73\157\156\x76\62\137\x70\x6c\x75\x67\151\x6e\137\x73\150\x6f\160\x5f\x70\141\171\162\x65\x73\165\154\164"); goto fHo_1; s2kl5: pdo_update($this->table_shop_order_goods, array("\166\x69\162\x74\x75\141\154\x5f\x74\x65\170\164" => $virtual_text), array("\x69\x64" => $order_goods["\x69\x64"])); goto XiY0r; fHo_1: return; goto REhvK; mKSvr: foreach ($virtual_list as $v) { goto JgbQw; JgbQw: $virtual_text .= $v["\x76\141\154\165\145"] . "\357\xbc\233"; goto ZUm3K; hx8cd: gjtje: goto Fg9n6; ZUm3K: pdo_update($this->table_shop_virtual, array("\163\164\141\164\x75\x73" => 1, "\157\162\x64\145\162\x73\x6e" => $order["\x6f\x72\x64\145\162\163\156"], "\165\151\144" => $order["\165\151\144"], "\142\165\x79\x5f\164\x69\155\x65" => time()), array("\151\x64" => $v["\x69\144"])); goto hx8cd; Fg9n6: } goto A0Zd_; Fd4Kv: $virtual_list = pdo_fetchall("\x53\105\114\105\x43\x54\40\151\x64\x2c\166\141\154\x75\x65\x20\x46\x52\x4f\x4d\40" . tablename($this->table_shop_virtual) . "\x20\127\x48\105\x52\x45\x20\x75\156\151\141\x63\151\144\75\72\165\156\151\141\143\x69\x64\40\x41\116\104\x20\147\x6f\157\x64\x73\x5f\151\144\75\72\x67\157\157\144\x73\137\151\144\x20\x41\116\104\x20\163\164\x61\164\x75\163\x3d\x3a\163\164\x61\x74\x75\x73\x20\117\122\104\105\122\x20\102\131\x20\151\x64\40\101\123\x43\x20\114\x49\115\x49\x54\40\60\54{$order_goods["\164\x6f\x74\x61\154"]}", array("\x3a\165\156\151\x61\143\151\x64" => $order["\165\156\x69\x61\143\151\144"], "\72\x67\x6f\157\144\x73\137\x69\144" => $order_goods["\x67\157\157\144\x73\x5f\x69\x64"], "\x3a\163\x74\x61\164\165\163" => 0)); goto j7r4r; TlTKT: $update_order = array("\163\x74\141\164\x75\x73" => 2, "\144\x65\x6c\151\x76\145\x72\137\x74\151\155\x65" => time(), "\x61\x75\164\157\x5f\x66\x69\156\x69\x73\150\137\164\x69\x6d\145" => time() + $shop_setting["\146\151\156\151\163\x68\x5f\x6f\x72\x64\145\162"] * 86400); goto R05YV; Fiixo: if (!$virtual_list) { goto KSfWV; } goto mKSvr; B8zBn: $virtual_text = trim($virtual_text, "\357\xbc\233"); goto Lv86T; REhvK: YK7SW: goto Fiixo; R05YV: pdo_update($this->table_shop_order, $update_order, array("\151\x64" => $order["\x69\x64"])); goto EZRqs; CFZ1u: load()->func("\154\157\x67\147\151\x6e\x67"); goto RQxcC; ywi_W: pdo_update($this->table_shop_goods, array("\163\x74\x6f\x63\153" => $total), array("\x75\x6e\x69\141\x63\x69\x64" => $order["\x75\x6e\x69\141\x63\151\x64"], "\151\x64" => $order_goods["\x67\x6f\x6f\x64\163\x5f\x69\x64"])); goto TlTKT; QX9Sl: $goods = pdo_get($this->table_shop_goods, array("\x75\x6e\151\x61\x63\x69\x64" => $order["\165\156\151\x61\143\151\144"], "\151\144" => $order_goods["\x67\157\x6f\144\163\137\151\x64"])); goto Fd4Kv; Lv86T: KSfWV: goto s2kl5; XiY0r: $total = pdo_fetchcolumn("\123\105\114\105\x43\124\40\103\117\125\116\x54\50\52\51\x20\106\x52\117\115\40" . tablename($this->table_shop_virtual) . "\x20\x57\x48\x45\122\x45\x20\x75\156\151\141\143\x69\144\75\x3a\x75\x6e\x69\x61\143\x69\x64\40\x41\x4e\x44\x20\x67\x6f\x6f\144\x73\x5f\151\x64\75\x3a\147\x6f\157\x64\163\137\151\144\x20\101\116\104\x20\163\164\x61\164\165\x73\75\x3a\x73\164\x61\164\165\163", array("\72\165\156\151\x61\x63\x69\144" => $order["\x75\x6e\x69\141\143\x69\144"], "\x3a\147\157\x6f\x64\x73\137\151\x64" => $order_goods["\147\157\157\x64\x73\x5f\x69\x64"], "\72\163\164\141\164\x75\x73" => 0)); goto ywi_W; j7r4r: if (!(count($virtual_list) < $order_goods["\164\157\x74\141\154"])) { goto YK7SW; } goto CFZ1u; EZRqs: } public function updateShopGoodsStock($order) { goto BCdKK; dDYK2: KfN7j: goto NoRdd; BCdKK: $goods_list = pdo_fetchall("\x53\x45\x4c\105\103\124\40\141\56\147\157\157\x64\163\137\151\x64\54\x61\x2e\x73\x6b\165\x5f\151\x64\x2c\141\x2e\164\157\164\x61\154\x2c\x62\x2e\147\x6f\x6f\x64\x73\x5f\x74\x79\x70\x65\54\x62\x2e\x6d\x69\156\x75\163\x5f\164\x6f\x74\x61\x6c\x2c\x62\x2e\163\x74\157\x63\x6b\40\x46\122\x4f\115\x20" . tablename($this->table_shop_order_goods) . "\x20\x61\40\114\x45\x46\x54\x20\112\x4f\111\x4e\x20" . tablename($this->table_shop_goods) . "\40\x62\x20\117\116\x20\x61\56\x67\x6f\x6f\x64\163\137\151\x64\x3d\142\x2e\x69\x64\x20\127\110\105\122\x45\x20\x61\56\x75\156\x69\141\143\x69\144\75\72\165\156\151\x61\x63\x69\144\40\101\116\104\40\x61\56\157\x72\x64\x65\162\x69\x64\x3d\x3a\x6f\162\144\145\162\x69\144", array("\72\x75\x6e\x69\x61\x63\151\144" => $order["\165\x6e\x69\x61\143\x69\x64"], "\x6f\x72\x64\145\162\x69\x64" => $order["\x69\x64"])); goto sz0bY; sz0bY: foreach ($goods_list as $v) { goto rrig2; mRzhq: if (!$v["\x73\153\x75\x5f\x69\144"]) { goto jVmwJ; } goto OMz9m; YIuhd: pdo_update($this->table_shop_goods, array("\x73\x74\x6f\x63\x6b\40\x2d\x3d" => $v["\x74\x6f\164\x61\154"]), array("\165\156\151\141\143\x69\x64" => $order["\165\156\x69\x61\143\151\x64"], "\x69\x64" => $v["\147\157\157\x64\163\x5f\151\x64"])); goto nkFp7; z2qve: goto ga2r3; goto TQvgf; rrig2: if (!($v["\x6d\151\156\165\x73\x5f\164\157\x74\x61\x6c"] != 1)) { goto XFgxv; } goto z2qve; g0iQH: jVmwJ: goto YIuhd; OMz9m: pdo_update($this->table_shop_sku, array("\164\157\164\x61\x6c\x20\55\75" => $v["\164\x6f\x74\x61\154"]), array("\x75\x6e\x69\x61\143\x69\144" => $order["\x75\156\x69\x61\x63\x69\x64"], "\x69\x64" => $v["\x73\153\165\137\151\144"])); goto g0iQH; nkFp7: ga2r3: goto RoLGe; TQvgf: XFgxv: goto mRzhq; RoLGe: } goto dDYK2; NoRdd: } public function sendMessageToUser($setting, $order) { goto ACcIX; ACcIX: global $_W; goto YR00i; YR00i: $uniacid = $order["\x75\156\151\x61\143\x69\x64"]; goto P0v5E; Bag9X: $sendmessage = array("\164\157\165\163\x65\x72" => $fans["\157\160\145\x6e\x69\144"], "\x74\145\155\x70\x6c\x61\164\145\137\151\x64" => $tplmessage["\x62\165\171\163\x75\x63\143"], "\x75\162\x6c" => $url, "\164\157\160\143\157\x6c\x6f\x72" => '', "\144\x61\164\141" => array("\x66\151\x72\x73\x74" => array("\x76\x61\154\165\x65" => $first, "\x63\x6f\154\x6f\x72" => ''), "\x6b\145\171\167\157\162\x64\61" => array("\166\141\154\x75\x65" => $orderContent, "\x63\157\154\157\x72" => ''), "\x6b\145\x79\x77\x6f\x72\144\x32" => array("\x76\x61\154\165\x65" => $order["\164\x6f\164\x61\x6c\x5f\141\x6d\x6f\x75\156\164"] . "\40\xe5\205\x83", "\143\157\x6c\x6f\162" => ''), "\x6b\145\171\x77\157\x72\144\63" => array("\166\x61\154\165\x65" => date("\131\345\271\xb4\x6d\xe6\234\x88\144\346\227\xa5", time()), "\x63\157\x6c\157\x72" => ''), "\x72\145\155\141\162\153" => array("\x76\141\154\165\145" => $remark, "\143\157\x6c\157\x72" => ''))); goto QN1eg; jsw5B: $titl_arr = explode("\73", $order["\x74\151\164\154\x65"]); goto UrWHF; P0v5E: $tplmessage = pdo_get($this->table_tplmessage, array("\165\156\151\141\143\x69\x64" => $uniacid), array("\142\x75\x79\x73\x75\x63\x63")); goto uAoPc; qP0Si: $first = "\346\x82\250\xe7\x9a\x84\350\xae\242\xe5\215\x95\xe5\xb7\262\346\224\257\344\xbb\230\xe6\x88\220\345\x8a\237\xe3\x80\202"; goto U9mMZ; UrWHF: $orderContent = count($titl_arr) == 1 ? $order["\x74\x69\164\154\x65"] : $order["\164\x69\x74\154\145"] . "\x20\347\xad\211" . count($titl_arr) . "\xe4\273\xb6\345\x95\206\xe5\223\201"; goto dxayP; dxayP: $remark = $order["\x69\x73\137\x76\151\162\164\165\x61\154"] ? "\347\x82\271\345\207\xbb\xe6\237\245\xe7\234\x8b\350\xae\242\345\215\x95\xe5\215\241\xe5\xaf\206\344\277\xa1\346\201\xaf" : "\347\202\xb9\345\x87\273\346\237\245\xe7\234\x8b\350\256\xa2\xe5\x8d\x95\xe8\257\xa6\346\x83\205"; goto bg6nE; bg6nE: $fans = pdo_get($this->table_fans, array("\x75\151\144" => $order["\x75\x69\144"]), array("\157\x70\x65\156\x69\x64")); goto Bag9X; uAoPc: $url = $_W["\163\x69\x74\145\x72\x6f\x6f\164"] . "\141\160\160\57\x69\156\144\x65\x78\56\x70\150\x70\77\151\x3d{$uniacid}\x26\x63\75\145\156\164\162\x79\46\x6f\x70\75\144\x65\x74\x61\151\x6c\163\x26\144\x6f\x3d\x73\x68\x6f\x70\x6f\x72\144\145\x72\x26\155\75\146\171\x5f\154\145\163\x73\x6f\x6e\166\62\137\160\x6c\x75\147\x69\x6e\137\x73\x68\x6f\160\x26\157\x72\x64\145\x72\151\x64\75{$order["\151\144"]}"; goto qP0Si; U9mMZ: $order["\164\151\x74\x6c\x65"] = trim($order["\164\151\164\x6c\145"], "\x3b"); goto jsw5B; QN1eg: $this->send_template_message($sendmessage, $uniacid); goto bMkbN; bMkbN: } public function sendToManageAuditRefund($order, $manageopenid, $reason) { goto ej2Ju; CXxLa: $tplmessage = pdo_get($this->table_tplmessage, array("\165\156\x69\141\143\151\144" => $uniacid), array("\141\x70\x70\154\x79\x5f\164\145\141\143\150\145\x72")); goto Jfcyo; cWCGx: return; goto dLBAl; LLd5a: RMwqE: goto Mxi6n; dLBAl: BwVl6: goto nVU9g; SxfCY: $uniacid = $order["\x75\156\x69\x61\143\x69\x64"]; goto CXxLa; nVU9g: $first = "\xe6\x82\250\346\234\211\xe4\xb8\x80\346\x9d\xa1\xe5\x95\206\xe5\x9f\216\xe9\x80\200\xe6\254\276\347\x94\xb3\350\xaf\xb7\347\xad\211\xe5\276\x85\345\xae\241\346\240\270\xe3\200\202"; goto E3XUr; ej2Ju: global $_W; goto SxfCY; tee6J: foreach ($openid_arr as $v) { goto Kpe8c; XdEhq: $this->send_template_message($sendmessage, $uniacid); goto MkZ9p; Kpe8c: if ($v) { goto umdlA; } goto wtZWr; MkZ9p: z7Vxu: goto KW2ck; OCQEM: $sendmessage = array("\x74\157\165\x73\145\x72" => $v, "\x74\145\155\x70\x6c\x61\x74\145\137\151\144" => $tplmessage["\x61\x70\x70\x6c\x79\x5f\164\145\141\143\150\145\x72"], "\165\162\x6c" => '', "\164\x6f\160\x63\157\154\x6f\162" => '', "\x64\141\x74\141" => array("\146\x69\x72\x73\x74" => array("\166\141\x6c\x75\x65" => $first, "\143\157\154\x6f\x72" => ''), "\153\145\x79\x77\x6f\162\x64\61" => array("\166\x61\x6c\x75\x65" => $member["\x6e\x69\x63\x6b\x6e\x61\x6d\x65"] ? $member["\156\x69\143\153\156\x61\x6d\145"] : $member["\162\145\x61\x6c\x6e\141\155\x65"], "\143\x6f\154\157\x72" => ''), "\x6b\145\171\167\157\x72\x64\62" => array("\x76\x61\x6c\165\145" => "\xe8\xae\242\345\x8d\x95\357\xbc\232" . $order["\157\162\x64\x65\162\x73\156"] . "\347\x94\xb3\350\257\xb7\351\x80\x80\xe6\xac\276", "\x63\157\154\157\162" => ''), "\x72\x65\155\x61\x72\153" => array("\166\141\154\165\145" => "\xe9\200\x80\xe6\xac\xbe\345\x8e\237\345\233\240\357\274\x9a{$reason}\12\xe8\xaf\xa6\xe6\203\x85\xe8\xaf\267\xe7\x99\273\345\xbd\x95\xe7\xbd\221\347\xab\x99\xe5\x90\216\xe5\x8f\xb0\xe6\x9f\xa5\xe7\x9c\x8b", "\143\157\x6c\x6f\162" => ''))); goto XdEhq; WYMOd: umdlA: goto OCQEM; wtZWr: return; goto WYMOd; KW2ck: } goto LLd5a; YpX5p: $openid_arr = explode("\x2c", $manageopenid); goto tee6J; E3XUr: $member = pdo_get($this->table_mc_member, array("\x75\x69\x64" => $order["\165\x69\x64"]), array("\156\x69\143\153\x6e\141\155\x65", "\x72\145\141\154\156\141\155\145")); goto YpX5p; Jfcyo: if ($tplmessage["\141\x70\160\154\x79\137\164\145\141\143\150\145\162"]) { goto BwVl6; } goto cWCGx; Mxi6n: } public function sendToUserAuditRefund($order, $data) { goto Vy8zA; ZNdRC: $tplmessage = pdo_get($this->table_tplmessage, array("\165\156\x69\141\x63\x69\144" => $uniacid), array("\x74\145\141\143\x68\145\x72\137\x6e\x6f\164\151\143\145")); goto qkO2E; D1xci: if ($fans["\x6f\160\x65\x6e\x69\x64"]) { goto yP__9; } goto Ywrer; RNgQi: yP__9: goto agbX0; Iuv81: $this->send_template_message($sendmessage, $uniacid); goto UpRvz; Ywrer: return; goto RNgQi; I9mm3: $fans = pdo_get($this->table_fans, array("\165\x6e\151\x61\x63\151\x64" => $uniacid, "\165\151\x64" => $order["\x75\151\144"]), array("\157\x70\x65\x6e\151\144")); goto D1xci; Vy8zA: global $_W; goto hV1gL; qkO2E: if ($tplmessage["\x74\145\x61\x63\150\145\162\x5f\156\x6f\164\x69\x63\x65"]) { goto BpL24; } goto C3UQ6; hV1gL: $uniacid = $order["\165\x6e\x69\141\143\151\144"]; goto ZNdRC; agbX0: $sendmessage = array("\x74\x6f\165\163\x65\162" => $fans["\157\x70\145\x6e\151\144"], "\164\145\155\160\x6c\141\x74\x65\137\151\144" => $tplmessage["\164\145\141\x63\150\x65\x72\x5f\156\157\x74\151\x63\x65"], "\165\162\154" => $data["\165\x72\x6c"], "\x74\157\x70\x63\157\x6c\x6f\x72" => '', "\x64\141\x74\141" => array("\146\x69\162\x73\164" => array("\166\141\154\x75\x65" => $data["\146\x69\162\163\x74"], "\x63\x6f\x6c\157\x72" => ''), "\153\x65\x79\167\157\x72\144\x31" => array("\166\141\154\165\145" => $data["\x6b\145\x79\x77\x6f\x72\144\x31"], "\x63\x6f\x6c\157\x72" => ''), "\x6b\x65\x79\167\x6f\x72\144\62" => array("\x76\x61\x6c\x75\145" => $data["\153\145\x79\x77\x6f\162\144\x32"], "\143\157\x6c\157\x72" => ''), "\153\145\171\x77\157\x72\x64\x33" => array("\166\x61\x6c\x75\145" => $data["\153\x65\x79\167\x6f\x72\x64\63"], "\x63\157\154\157\162" => ''), "\x72\145\155\x61\x72\x6b" => array("\166\x61\154\x75\x65" => $data["\162\145\155\x61\162\153"], "\x63\157\x6c\x6f\162" => ''))); goto Iuv81; xbklM: BpL24: goto I9mm3; C3UQ6: return; goto xbklM; UpRvz: } public function send_template_message($messageDatas, $uniacid = '') { goto GpWUV; w3qD3: return; goto NBL5e; w0Mpz: $messageDatas = urldecode(json_encode($messageDatas)); goto HKoem; X1FLC: return json_decode($ress, true); goto Naj0V; NBL5e: dGx7M: goto l2F5H; qYPp6: $urls = "\150\164\x74\160\x73\72\x2f\57\x61\x70\x69\56\167\x65\151\x78\151\156\x2e\x71\x71\56\x63\x6f\x6d\57\143\x67\151\55\x62\151\156\x2f\x6d\145\163\x73\141\147\145\57\164\x65\x6d\x70\x6c\x61\x74\145\57\x73\145\156\x64\77\x61\143\143\145\x73\163\x5f\164\157\x6b\145\x6e\75" . $access_token; goto w0Mpz; GpWUV: global $_W, $_GPC; goto EWCLT; ZVeW0: $account = uni_fetch($uniacid); goto EwDVH; HKoem: $ress = ihttp_request($urls, $messageDatas); goto X1FLC; l2F5H: if (!$uniacid) { goto akmPI; } goto ZVeW0; qYQUV: load()->classs("\167\x65\151\x78\x69\156\x2e\141\143\x63\157\x75\x6e\x74"); goto wRmn9; fxv2n: $access_token = $account_api->getAccessToken(); goto qYPp6; wRmn9: $account_api = WeixinAccount::create($account); goto fxv2n; EWCLT: if (!(!$messageDatas["\164\x6f\x75\x73\x65\x72"] || !$messageDatas["\164\x65\x6d\160\154\141\164\x65\x5f\x69\x64"])) { goto dGx7M; } goto w3qD3; EwDVH: akmPI: goto qYQUV; Naj0V: } public function updateGoodsComment($comment) { goto SouCL; TR6Q_: pdo_update($this->table_shop_goods, $update_goods, array("\151\144" => $comment["\147\157\x6f\144\x73\137\151\144"])); goto pDh6C; fqUGK: $update_goods = array("\x73\143\157\x72\x65" => round($total[0]["\164\157\164\x61\154\x5f\x73\x63\x6f\x72\x65"] / $total[0]["\x74\x6f\164\x61\154"], 1), "\x75\x70\x64\141\x74\145\137\164\x69\155\145" => time()); goto TR6Q_; SouCL: $total = pdo_fetchall("\x53\105\114\x45\x43\x54\40\123\x55\115\50\163\143\157\162\145\x29\x20\101\123\40\x74\157\164\x61\154\137\163\x63\x6f\162\x65\54\x43\117\125\x4e\124\x28\52\51\40\101\x53\x20\164\x6f\164\x61\x6c\x20\106\x52\x4f\115\40" . tablename($this->table_shop_goods_comment) . "\x20\x57\x48\105\x52\105\x20\x75\156\151\141\x63\x69\x64\75\x3a\x75\x6e\x69\x61\143\151\x64\40\101\116\104\40\147\157\x6f\x64\163\137\151\144\x3d\72\x67\157\x6f\144\163\x5f\x69\x64", array("\72\165\x6e\151\x61\143\151\x64" => $comment["\165\x6e\151\x61\143\151\144"], "\x3a\x67\x6f\157\x64\163\137\151\x64" => $comment["\x67\157\157\x64\163\137\x69\x64"])); goto fqUGK; pDh6C: } public function substrCut($user_name, $head, $foot) { goto wo2nI; wo2nI: $strlen = mb_strlen($user_name, "\165\x74\x66\55\70"); goto Xy4ss; Xy4ss: $firstStr = mb_substr($user_name, 0, $head, "\x75\x74\x66\x2d\70"); goto HiPmS; HiPmS: $lastStr = mb_substr($user_name, -$foot, $foot, "\165\164\146\x2d\70"); goto J9LfR; J9LfR: return $strlen == 2 ? $firstStr . str_repeat("\x2a", mb_strlen($user_name, "\x75\164\146\x2d\x38") - 1) : $firstStr . str_repeat("\52", $strlen - ($head + $foot)) . $lastStr; goto O39NE; O39NE: } public function getDatesBetweenTwoDays($startDate, $endDate) { goto jEoCJ; o8v1X: ydg5S: goto fhwBp; K2Qva: $currentDate = $nextDate; goto PJmh5; jEoCJ: $dates = []; goto IsRLp; iXUgF: $currentDate = $startDate; goto o8v1X; fiRiS: if ($startDate == $endDate) { goto MaGJ1; } goto IcndX; PnCX2: jctGL: goto UQr4q; xcgHS: F6tgu: goto p_Wh_; PJmh5: if ($endDate != $currentDate) { goto ydg5S; } goto aFsbU; Daqe1: goto jctGL; goto xcgHS; fhwBp: $nextDate = date("\131\x2d\x6d\x2d\x64", strtotime($currentDate . "\40\53\x31\40\x64\x61\x79\x73")); goto QQ15D; IsRLp: if (strtotime($startDate) > strtotime($endDate)) { goto F6tgu; } goto fiRiS; hYzvu: return $dates; goto PnCX2; p_Wh_: return $dates; goto dP0zG; aFsbU: WeYVR: goto qXZxb; IcndX: array_push($dates, $startDate); goto iXUgF; dP0zG: goto jctGL; goto C0wTb; q_eAa: array_push($dates, $startDate); goto hYzvu; qXZxb: return $dates; goto Daqe1; QQ15D: array_push($dates, $nextDate); goto K2Qva; C0wTb: MaGJ1: goto q_eAa; UQr4q: } }