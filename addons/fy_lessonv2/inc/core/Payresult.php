<?php
 goto Xa7Re; Xa7Re: defined("\111\x4e\x5f\111\x41") or exit("\101\x63\x63\x65\163\163\x20\104\x65\x6e\151\145\x64"); goto UaHhk; UaHhk: include_once dirname(__FILE__) . "\x2f\x2e\56\57\x2e\56\x2f\x6c\x69\142\x72\141\x72\x79\57\x61\157\x64\151\x61\x6e\x79\165\x6e\x2f\111\x4d\x2f\164\x69\163\56\x70\150\160"; goto rUps1; rUps1: class Payresult extends WeModuleSite { public $table_aliyun_upload = "\146\171\137\154\x65\163\163\157\156\137\x61\154\x69\171\165\156\137\165\x70\x6c\157\141\144"; public $table_aliyunoss_upload = "\x66\x79\x5f\154\145\x73\x73\x6f\x6e\137\141\154\x69\x79\165\156\x6f\163\163\137\165\160\x6c\157\x61\144"; public $table_article = "\x66\171\137\x6c\145\163\x73\x6f\x6e\137\141\x72\164\151\x63\x6c\145"; public $table_article_category = "\146\x79\137\x6c\x65\163\163\x6f\156\137\x61\x72\x74\151\143\154\145\137\x63\141\x74\x65\x67\157\162\171"; public $table_attribute = "\146\x79\137\154\145\x73\x73\x6f\x6e\137\141\164\164\x72\151\142\x75\x74\145"; public $table_banner = "\x66\171\137\x6c\145\x73\163\157\x6e\x5f\142\141\156\156\x65\162"; public $table_cashlog = "\146\x79\x5f\x6c\145\163\163\x6f\x6e\137\143\x61\x73\150\x6c\157\x67"; public $table_category = "\x66\171\137\x6c\145\163\x73\157\156\x5f\x63\x61\x74\x65\147\x6f\x72\171"; public $table_lesson_collect = "\x66\x79\x5f\x6c\145\x73\x73\157\x6e\x5f\143\x6f\154\x6c\x65\x63\164"; public $table_commission_level = "\146\171\x5f\x6c\145\163\x73\x6f\x6e\x5f\143\x6f\155\155\151\163\x73\151\x6f\x6e\x5f\154\x65\x76\x65\154"; public $table_commission_log = "\146\x79\137\x6c\145\x73\x73\157\156\137\x63\157\x6d\x6d\x69\x73\163\x69\x6f\x6e\x5f\x6c\157\x67"; public $table_commission_setting = "\146\x79\x5f\154\x65\x73\163\157\156\137\143\157\x6d\155\x69\x73\x73\151\x6f\156\137\163\x65\x74\x74\151\156\147"; public $table_coupon = "\x66\171\x5f\x6c\x65\163\163\x6f\156\x5f\x63\157\165\160\157\x6e"; public $table_discount = "\x66\x79\x5f\154\145\x73\163\x6f\156\x5f\x64\151\x73\143\x6f\165\x6e\x74"; public $table_discount_lesson = "\x66\x79\137\154\x65\163\163\157\x6e\137\x64\151\x73\x63\x6f\x75\x6e\164\137\x6c\145\x73\x73\157\x6e"; public $table_diy_template = "\146\171\x5f\154\145\x73\x73\x6f\156\x5f\144\151\171\137\x74\x65\155\x70\154\x61\x74\145"; public $table_document = "\x66\x79\137\154\145\163\x73\x6f\156\x5f\x64\157\x63\165\155\x65\156\x74"; public $table_evaluate = "\x66\x79\x5f\154\x65\x73\x73\x6f\156\x5f\145\166\x61\x6c\x75\x61\164\x65"; public $table_evaluate_score = "\x66\x79\x5f\x6c\x65\163\x73\157\x6e\137\x65\x76\x61\x6c\x75\141\x74\x65\x5f\x73\x63\157\x72\145"; public $table_footer_group = "\x66\171\x5f\154\145\x73\163\157\x6e\137\146\x6f\157\164\x65\162\x5f\x67\x72\157\x75\x70"; public $table_lesson_history = "\146\x79\x5f\154\x65\163\x73\x6f\x6e\137\x68\x69\x73\164\x6f\x72\x79"; public $table_index_module = "\146\171\137\154\145\x73\x73\157\x6e\137\x69\x6e\144\145\x78\x5f\x6d\x6f\144\x75\x6c\145"; public $table_inform = "\x66\171\137\154\x65\163\x73\157\x6e\137\x69\156\146\157\162\x6d"; public $table_inform_fans = "\146\x79\x5f\x6c\145\163\x73\157\x6e\x5f\x69\156\x66\157\x72\x6d\137\x66\141\x6e\x73"; public $table_login_pc = "\x66\171\x5f\x6c\x65\x73\163\x6f\x6e\x5f\x6c\157\x67\151\156\x5f\x70\x63"; public $table_recommend_junior = "\146\x79\x5f\x6c\x65\x73\x73\157\156\x5f\x72\x65\x63\157\x6d\x6d\145\156\144\x5f\152\x75\x6e\151\157\162"; public $table_recommend_activity = "\x66\x79\137\154\x65\x73\x73\157\x6e\137\162\x65\x63\157\155\155\145\156\144\x5f\x61\143\x74\151\166\x69\x74\x79"; public $table_market = "\146\171\137\x6c\x65\x73\x73\157\x6e\137\155\141\162\x6b\x65\x74"; public $table_mcoupon = "\146\171\137\x6c\x65\163\163\157\156\x5f\155\x63\x6f\165\160\157\x6e"; public $table_member = "\x66\x79\137\x6c\x65\x73\x73\x6f\x6e\137\155\x65\155\142\x65\162"; public $table_member_bind = "\146\x79\x5f\x6c\145\x73\163\x6f\156\x5f\155\145\155\142\145\x72\x5f\142\151\156\x64"; public $table_member_buyteacher = "\146\171\x5f\x6c\145\x73\163\157\x6e\x5f\155\145\155\142\145\x72\x5f\x62\165\171\164\x65\141\x63\150\145\162"; public $table_member_coupon = "\146\x79\x5f\x6c\145\163\163\157\x6e\x5f\155\145\x6d\x62\x65\162\x5f\143\x6f\165\160\x6f\156"; public $table_member_order = "\x66\171\137\x6c\x65\163\x73\x6f\x6e\137\x6d\145\x6d\142\x65\162\x5f\x6f\x72\x64\145\162"; public $table_member_vip = "\x66\x79\x5f\154\145\163\x73\157\x6e\137\155\145\155\x62\x65\162\137\166\x69\x70"; public $table_navigation = "\146\x79\x5f\154\x65\x73\163\157\156\137\156\141\166\x69\147\141\x74\151\x6f\x6e"; public $table_order = "\146\x79\137\154\145\163\x73\x6f\156\137\x6f\x72\x64\145\x72"; public $table_order_verify = "\146\x79\137\x6c\x65\163\163\x6f\156\137\157\x72\144\x65\162\x5f\x76\x65\x72\x69\146\171"; public $table_lesson_parent = "\146\x79\137\x6c\145\x73\x73\x6f\156\x5f\160\x61\x72\x65\156\x74"; public $table_playrecord = "\x66\171\x5f\x6c\x65\x73\x73\157\156\137\160\x6c\x61\x79\162\x65\143\157\x72\144"; public $table_poster = "\146\171\x5f\154\x65\163\163\157\x6e\137\x70\157\163\x74\145\x72"; public $table_qcloudvod_upload = "\x66\x79\x5f\154\x65\163\x73\157\x6e\137\x71\x63\x6c\157\x75\144\x76\157\x64\137\165\160\154\157\141\x64"; public $table_qcloud_upload = "\x66\171\x5f\154\145\163\163\157\156\x5f\161\x63\x6c\157\x75\x64\137\165\x70\154\157\141\144"; public $table_qiniu_upload = "\146\x79\x5f\x6c\145\163\x73\x6f\x6e\x5f\161\x69\x6e\x69\165\137\x75\x70\154\x6f\x61\144"; public $table_recommend = "\146\171\x5f\x6c\145\163\163\x6f\x6e\137\x72\x65\143\x6f\155\x6d\x65\156\144"; public $table_setting = "\146\x79\x5f\154\145\x73\x73\x6f\x6e\x5f\163\145\x74\164\x69\x6e\147"; public $table_setting_pc = "\x66\171\137\x6c\145\163\163\x6f\156\137\163\x65\164\x74\151\x6e\147\x5f\x70\143"; public $table_signin = "\x66\x79\x5f\x6c\x65\163\163\x6f\156\137\163\x69\x67\156\151\156"; public $table_lesson_son = "\x66\x79\137\x6c\x65\x73\x73\157\x6e\137\163\x6f\156"; public $table_lesson_title = "\146\171\x5f\154\x65\x73\163\157\x6e\x5f\164\x69\x74\154\x65"; public $table_lesson_spec = "\x66\x79\x5f\x6c\145\163\163\157\x6e\137\x73\160\x65\143"; public $table_static = "\146\171\x5f\x6c\145\x73\x73\157\x6e\x5f\x73\x74\x61\164\151\143"; public $table_study_duration = "\146\171\x5f\x6c\x65\x73\163\x6f\156\137\163\x74\x75\144\171\137\144\165\x72\x61\x74\x69\x6f\x6e"; public $table_subscribe_msg = "\146\x79\x5f\154\145\163\163\157\x6e\137\x73\165\142\163\143\x72\151\x62\145\137\155\x73\x67"; public $table_suggest = "\146\171\137\x6c\145\163\163\157\x6e\x5f\163\x75\147\147\145\x73\164"; public $table_suggest_category = "\x66\171\x5f\154\x65\163\163\157\x6e\137\163\165\x67\147\x65\163\x74\137\x63\x61\164\x65\x67\x6f\162\171"; public $table_syslog = "\x66\x79\137\x6c\145\163\x73\x6f\156\137\163\171\163\x6c\x6f\147"; public $table_teacher = "\146\x79\x5f\x6c\x65\163\163\x6f\156\137\x74\145\141\x63\150\x65\162"; public $table_teacher_category = "\146\x79\x5f\x6c\x65\163\x73\x6f\156\x5f\x74\145\141\x63\x68\x65\162\x5f\x63\141\x74\x65\147\157\x72\171"; public $table_teacher_income = "\146\x79\137\x6c\x65\x73\163\x6f\x6e\137\x74\x65\x61\143\x68\x65\162\x5f\151\156\x63\x6f\155\145"; public $table_teacher_order = "\146\171\x5f\x6c\x65\163\163\157\x6e\x5f\x74\x65\x61\x63\x68\145\x72\137\x6f\162\144\x65\162"; public $table_teacher_price = "\146\171\x5f\154\145\x73\x73\x6f\156\x5f\164\x65\141\143\150\x65\x72\137\x70\162\x69\143\145"; public $table_tplmessage = "\146\x79\137\154\x65\163\x73\x6f\156\137\x74\160\154\x6d\x65\163\x73\141\x67\x65"; public $table_vip_level = "\146\x79\x5f\x6c\x65\163\x73\x6f\x6e\x5f\166\x69\x70\137\154\145\166\145\x6c"; public $table_vipcard = "\146\x79\137\154\x65\163\x73\157\156\137\166\x69\160\143\x61\x72\144"; public $table_mc_members = "\x6d\143\x5f\155\145\155\142\145\162\163"; public $table_fans = "\x6d\143\137\x6d\x61\x70\160\151\x6e\147\137\146\x61\156\x73"; public $table_core_paylog = "\x63\157\x72\145\x5f\x70\141\x79\154\x6f\x67"; public $table_users = "\x75\163\145\162\x73"; public $table_live_award = "\x66\x79\x5f\154\x65\163\x73\x6f\156\137\x70\154\x75\x67\x69\156\x5f\154\x69\x76\x65\x5f\141\x77\141\x72\144"; public $table_live_chatrecord = "\x66\171\x5f\154\145\x73\163\x6f\x6e\137\160\154\165\x67\151\x6e\137\x6c\151\166\x65\x5f\143\150\x61\x74\x72\145\143\157\162\x64"; public $table_live_chatroom = "\146\171\137\x6c\x65\x73\x73\x6f\156\137\x70\x6c\x75\x67\151\x6e\137\154\151\x76\x65\x5f\x63\x68\141\164\162\x6f\157\x6d"; public $table_live_stream = "\x66\x79\137\154\145\163\163\157\156\137\x70\x6c\x75\147\151\156\x5f\x6c\x69\166\x65\x5f\163\164\162\145\x61\155"; public $table_exam_course = "\x66\x79\x5f\x6c\x65\163\163\157\x6e\137\160\154\165\x67\x69\x6e\x5f\x65\170\141\155\137\143\157\165\x72\163\145"; public $table_exam_examine = "\146\x79\x5f\154\145\x73\x73\157\x6e\x5f\x70\154\165\147\x69\156\x5f\x65\170\x61\155\137\145\170\x61\x6d\x69\x6e\145"; public $table_exam_examine_record = "\x66\x79\x5f\154\145\163\x73\157\156\x5f\160\x6c\x75\147\151\156\137\145\170\x61\x6d\x5f\145\x78\x61\155\x69\156\x65\x5f\162\x65\143\157\162\144"; public $table_exam_paper = "\x66\x79\137\154\x65\x73\x73\157\156\x5f\x70\x6c\x75\147\151\x6e\137\x65\170\x61\155\137\160\x61\160\145\162"; public $table_shop_commission_log = "\146\171\x5f\154\145\x73\x73\x6f\156\x5f\160\x6c\165\x67\151\x6e\137\x73\x68\157\160\x5f\x63\x6f\x6d\155\x69\163\163\x69\x6f\156\x5f\x6c\x6f\147"; public $table_shop_goods = "\x66\171\137\x6c\x65\x73\163\x6f\156\137\x70\154\x75\147\x69\x6e\137\163\150\157\x70\137\147\157\x6f\144\163"; public $table_shop_order = "\146\x79\137\154\145\163\163\x6f\156\137\160\x6c\x75\147\x69\156\x5f\x73\150\x6f\160\x5f\x6f\x72\144\x65\x72"; public $table_shop_order_goods = "\146\x79\x5f\x6c\x65\163\x73\157\x6e\137\x70\x6c\x75\147\151\x6e\137\163\x68\157\160\137\x6f\162\x64\145\x72\137\x67\x6f\157\144\x73"; public $table_shop_setting = "\x66\x79\137\154\145\163\x73\157\156\x5f\x70\x6c\165\147\x69\156\137\163\x68\157\x70\137\x73\x65\164\164\151\156\x67"; public $table_shop_sku = "\146\171\x5f\154\x65\x73\163\x6f\x6e\137\x70\154\x75\147\151\x6e\137\x73\150\157\x70\137\163\x6b\x75"; public $table_shop_virtual = "\x66\171\137\154\x65\x73\163\157\156\x5f\160\x6c\165\147\x69\156\137\163\x68\157\x70\x5f\x76\151\162\164\165\141\x6c"; public function dealResult($params, $setting, $comsetting, $wechat_type) { goto wfuax; iu4IS: jaVDT: goto INpo7; gh_g0: $data["\x70\x61\171\164\x69\x6d\x65"] = time(); goto oB1mx; KR10z: pdo_insert($this->table_live_chatrecord, $chatrecord); goto quk7k; uMSxB: if (!($lessonorder["\x6d\145\x6d\142\145\x72\x32"] > 0 && $lessonorder["\143\x6f\155\x6d\x69\163\163\x69\157\x6e\62"] > 0)) { goto nfX1j; } goto lh7Z_; CuqT_: $data["\x70\x61\x79\164\x69\155\x65"] = time(); goto baCAj; AQrcO: $successUrl = $_W["\x73\151\x74\x65\x72\157\x6f\x74"] . "\141\x70\x70\57\x69\x6e\x64\x65\170\x2e\160\x68\160\x3f\x69\75{$uniacid}\x26\143\75\145\156\164\162\171\46\151\x73\x70\x61\171\75\x31\x26\144\157\75\166\x69\x70\46\155\75\x66\171\x5f\154\145\x73\163\x6f\156\166\x32"; goto yO9XK; hM9yv: $data["\x70\x61\x79\x74\x79\x70\145"] = $params["\164\x79\160\x65"]; goto L13PW; euBpN: JuNQL: goto iu4IS; EpTHC: if (!(($params["\162\145\x73\165\154\x74"] == "\x73\165\x63\x63\x65\x73\163" && $params["\146\x72\157\x6d"] == "\x6e\157\164\151\x66\x79" || $params["\164\x79\x70\145"] == "\143\162\145\144\151\x74" || $params["\x66\145\x65"] == 0) && ($lessonorder["\x73\164\141\164\165\x73"] == 0 || $lessonorder["\x73\x74\x61\x74\165\x73"] == -1))) { goto p2h4i; } goto GZbWc; Vs9JE: BlTFg: goto KMy8I; tR7e_: if (!($viporder["\x6d\145\155\x62\145\x72\61"] > 0 && $viporder["\x63\x6f\x6d\155\x69\x73\163\151\157\156\61"] > 0)) { goto Z4919; } goto wWhjg; owP2W: $this->updateMemberVip($uid, $vip = 1); goto CmCQb; vqXDv: $lessonmember = pdo_fetch("\x53\105\114\x45\x43\124\x20\x61\x2e\x2a\x2c\x62\x2e\157\160\145\156\151\144\40\x46\122\x4f\x4d\40" . tablename($this->table_member) . "\x20\141\x20\114\105\x46\124\40\112\x4f\x49\116\40" . tablename($this->table_fans) . "\x20\142\40\x4f\x4e\x20\x61\x2e\165\151\x64\75\x62\56\x75\x69\x64\40\127\110\105\x52\x45\40\141\56\165\x6e\151\x61\x63\x69\x64\75\x3a\165\156\x69\141\x63\x69\x64\x20\x41\x4e\x44\x20\x61\56\165\x69\x64\75\72\x75\151\x64", array("\x3a\x75\x6e\x69\141\x63\x69\144" => $uniacid, "\x3a\165\151\144" => $uid)); goto EpTHC; zLWnB: if (!($order_type == "\126")) { goto ODJWX; } goto H13Tx; AhjEb: rnhlB: goto gNM0_; H0rdA: PyZkx: goto pzu39; pEjVd: if (!pdo_update($this->table_teacher_order, $data, array("\157\162\144\145\x72\x73\x6e" => $ordersn))) { goto YIAod; } goto BeMIN; EE9af: $data["\x70\x61\x79\164\171\160\x65"] = $params["\164\162\x61\144\145\x5f\x74\x79\x70\x65"] ? $wechat_type : ''; goto jZxc6; oB1mx: if (!($lessonorder["\166\141\x6c\151\x64\x69\164\x79"] > 0)) { goto PqJSd; } goto rsrSD; Hvnzk: if (!($lessonorder["\x70\x72\151\143\145"] > 0 && $lessonorder["\164\145\141\x63\150\x65\x72\137\x69\156\143\x6f\x6d\x65"] > 0)) { goto AXAaK; } goto qR7oC; gQuki: $chatrecord = array("\165\156\151\141\143\151\x64" => $uniacid, "\165\x69\144" => $awardorder["\165\x69\144"], "\x6c\145\x73\163\157\x6e\151\x64" => $awardorder["\154\145\163\163\157\156\151\x64"], "\162\157\x6f\x6d\151\144" => $chatroom["\162\x6f\x6f\x6d\x69\144"], "\x6e\x61\155\x65" => $nickname, "\142\x6f\144\x79" => urlencode($nickname . "\xe8\265\236\350\xb5\x8f\350\200\201\xe5\270\x88" . $awardorder["\160\x72\x69\143\145"] . "\345\x85\x83\xe7\272\xa2\xe5\214\x85"), "\x74\x69\x6d\x65" => $send_time, "\145\x78\164\x72\141" => "\141\x77\x61\x72\x64", "\163\164\141\164\x75\163" => 1); goto KR10z; UHfEX: $member = pdo_get($this->table_mc_members, array("\165\x6e\x69\x61\143\151\x64" => $uniacid, "\165\151\144" => $awardorder["\165\x69\x64"]), array("\156\x69\143\x6b\156\x61\155\145", "\165\151\144")); goto isZzD; LAMbL: if (!($order_type == "\x4c")) { goto vbCr9; } goto IZkXj; l1jc1: goto XRt3j; goto KjdzO; cNE2n: $successUrl = $_W["\163\151\164\x65\162\x6f\157\164"] . "\141\160\160\x2f\151\x6e\144\145\170\56\160\x68\x70\x3f\x69\x3d{$uniacid}\46\x63\x3d\145\156\164\162\x79\x26\x64\157\75\x6d\171\x74\145\x61\143\x68\145\162\x26\x6d\75\x66\x79\x5f\x6c\x65\163\x73\157\x6e\166\62"; goto T7QM5; hlnnc: if (!empty($params["\164\171\160\145"])) { goto u8soU; } goto oroTT; sHrhB: $data = array("\x73\164\x61\x74\165\163" => $params["\x72\145\x73\x75\x6c\x74"] == "\163\x75\x63\143\x65\x73\163" ? 1 : 0); goto gEShE; gLzFx: $this->sendCommissionToUser($uniacid, $teacher_order["\155\145\x6d\x62\145\x72\x31"], $lessonmember, 3, $setting, $teacher_order, $teacher_order["\143\x6f\155\155\x69\163\x73\x69\x6f\156\x31"], $level = 1, $comsetting); goto G1PFS; SmTy3: pdo_update($this->table_live_award, $data, array("\157\x72\144\x65\162\163\x6e" => $ordersn)); goto LOSV5; c6Ayd: A0cbu: goto kOk9Y; NHzlR: $this->sendCommissionToUser($uniacid, $lessonorder["\155\x65\x6d\x62\145\x72\x31"], $lessonmember, 2, $setting, $lessonorder, $lessonorder["\143\157\x6d\x6d\x69\163\163\151\x6f\156\61"], $level = 1, $comsetting); goto AXTud; aQV6R: if ($lessonorder["\154\x65\163\x73\x6f\156\137\x74\x79\160\x65"] == 1) { goto T05cb; } goto Q_Zia; RRMKQ: if (!($lessonorder["\x69\156\x74\145\x67\x72\141\154"] > 0)) { goto nPLby; } goto x_wFa; m4Xvp: if (!pdo_update($this->table_shop_order, $data, array("\x6f\162\144\x65\x72\x73\x6e" => $ordersn))) { goto JuNQL; } goto Z5jTF; up1pp: $this->staticAmount($uniacid, 1, $viporder["\166\151\160\x6d\x6f\x6e\x65\x79"]); goto ucpmY; Chray: if (!pdo_update($this->table_order, $data, array("\157\162\x64\145\x72\x73\x6e" => $ordersn))) { goto VyuHc; } goto Tgg7i; YGWum: f7xHX: goto QocU1; Vqehp: $msg_data["\x63\x6f\156\x74\145\x6e\x74"] = json_encode(array("\143\x6d\x64" => "\164\151\163\155\x73\147", "\166" => 1, "\x66\162\x6f\155" => "\164\x69\163\x2d\66", "\156\x61\x6d\145" => $nickname, "\164\157" => '', "\142\x6f\x64\x79" => $nickname . "\xe8\265\236\350\xb5\217\xe8\200\x81\xe5\xb8\x88" . $awardorder["\x70\x72\x69\143\145"] . "\345\x85\203\347\xba\xa2\xe5\x8c\x85", "\151\155\x61\147\x65" => '', "\x74\151\155\x65" => $send_time, "\145\170\x74\162\x61" => "\141\167\x61\x72\x64")); goto is1nJ; E5UEP: $uniacid = $teacher_order["\165\x6e\x69\x61\143\x69\144"]; goto OEukm; ayHfq: ODJWX: goto LAMbL; OQFKE: $data = array("\x73\164\x61\164\165\x73" => $params["\x72\145\x73\165\154\164"] == "\x73\165\143\x63\145\163\163" ? 1 : 0); goto kkTKa; odM7B: $this->sendShopVirtual($shoporder); goto v1UVC; RkS5d: $uniacid = $lessonorder["\x75\156\151\141\x63\x69\144"]; goto LUdqd; LUdqd: $uid = $lessonorder["\165\151\x64"]; goto vqXDv; FezUw: PqJSd: goto Chray; SzEI6: $this->sendCouponByBuyLesson($lessonmember, $setting); goto q0pfd; g6FVO: AXAaK: goto TtMmH; zQXAP: goto xf5qC; goto siedC; CkbLg: p2h4i: goto ky2Jl; sCVBC: $data["\x70\x61\171\164\x69\x6d\x65"] = time(); goto pEjVd; awZjF: $lessonmember = pdo_fetch("\123\x45\114\105\x43\124\x20\141\56\52\54\142\56\157\160\145\x6e\x69\x64\x20\106\122\x4f\x4d\40" . tablename($this->table_member) . "\x20\141\x20\x4c\x45\106\x54\40\x4a\x4f\x49\x4e\x20" . tablename($this->table_fans) . "\40\142\x20\117\116\40\x61\x2e\165\151\144\x3d\142\x2e\x75\x69\144\x20\127\x48\105\122\105\40\141\56\x75\156\x69\x61\x63\x69\144\x3d\x3a\x75\156\x69\x61\143\151\x64\x20\101\x4e\104\x20\x61\x2e\x75\151\x64\75\72\x75\151\144", array("\72\x75\x6e\x69\x61\143\151\144" => $uniacid, "\72\165\x69\144" => $uid)); goto joXMu; nyDmq: qnf02: goto pg5QB; tr4vc: $this->staticAmount($uniacid, 2, $lessonorder["\160\162\151\x63\145"]); goto P3Uax; iTox2: $this->sendCommissionToCompany($uniacid, $lessonorder, $setting); goto Vs9JE; xcUah: $uid = $shoporder["\165\151\x64"]; goto izciJ; CmCQb: if (!($viporder["\x69\156\164\x65\147\x72\x61\154"] > 0)) { goto Xh9PH; } goto GoLfV; DQ2z3: $this->sendCommissionToUser($uniacid, $lessonorder["\155\145\155\142\x65\x72\63"], $lessonmember, 2, $setting, $lessonorder, $lessonorder["\143\x6f\155\x6d\x69\x73\x73\151\157\156\x33"], $level = 3, $comsetting); goto eyALr; gEShE: if (!empty($params["\x74\x79\160\145"])) { goto Zr1jF; } goto al9TV; is1nJ: $api->sendMsg($msg_data, $chatroom["\162\x6f\x6f\x6d\x69\x64"]); goto gQuki; EUNuY: goto pyzI9; goto DPYzB; a8yP4: T05cb: goto vuNVY; ydpGD: $this->checkAgentStatus($lessonmember, $comsetting, $teacher_order["\160\162\151\143\145"]); goto mObAm; mVAwh: $shoporder = pdo_fetch("\x53\105\114\x45\103\x54\40\52\x20\x46\x52\x4f\x4d\x20" . tablename($this->table_shop_order) . "\x20\x57\x48\105\x52\x45\40\x6f\162\144\x65\162\x73\x6e\x3d\72\157\162\x64\145\162\163\156", array("\72\157\162\144\145\162\163\x6e" => $ordersn)); goto MM87o; P3Uax: $this->checkAgentStatus($lessonmember, $comsetting, $lessonorder["\x70\x72\151\143\145"]); goto mbwau; NbtyP: if ($shoporder["\151\x73\137\166\x69\x72\164\165\141\154"]) { goto s987T; } goto vrdOl; IZkXj: $lessonorder = pdo_fetch("\123\105\x4c\x45\103\124\x20\x2a\40\x46\x52\x4f\x4d\x20" . tablename($this->table_order) . "\x20\x57\x48\105\122\105\x20\157\162\x64\145\x72\163\x6e\75\x3a\x6f\x72\x64\145\x72\163\156", array("\72\x6f\162\144\145\162\163\x6e" => $ordersn)); goto RkS5d; DCHYO: $data = array("\163\164\141\x74\165\x73" => $params["\x72\x65\x73\x75\154\x74"] == "\163\165\x63\143\145\x73\x73" ? 1 : 0); goto hlnnc; I6lax: if (!($teacher_order["\151\x6e\164\x65\x67\162\141\x6c"] > 0)) { goto nXSzn; } goto BVZFr; qvX5c: JdpfD: goto WU7cA; Vzwkl: ORx0h: goto ESL4D; ztI6c: $teacher_order = pdo_fetch("\123\105\x4c\x45\x43\124\x20\x2a\40\106\122\x4f\115\40" . tablename($this->table_teacher_order) . "\40\127\x48\x45\x52\105\40\157\x72\x64\x65\162\x73\x6e\75\x3a\x6f\162\144\x65\x72\163\x6e", array("\x3a\x6f\x72\x64\x65\162\x73\156" => $ordersn)); goto E5UEP; KB2n4: if (!empty($params["\164\x79\160\145"])) { goto RckW_; } goto EE9af; ANjS1: RckW_: goto SZ4Ks; Xh3VK: $uniacid = $awardorder["\x75\x6e\151\x61\x63\x69\144"]; goto kEA3w; wWhjg: $this->sendCommissionToUser($uniacid, $viporder["\155\145\x6d\x62\145\x72\x31"], $lessonmember, 1, $setting, $viporder, $viporder["\143\x6f\155\x6d\151\163\x73\x69\157\156\61"], $level = 1, $comsetting); goto bMct6; jZxc6: goto tShsZ; goto ANjS1; mObAm: if (!($teacher_order["\155\145\155\x62\x65\x72\61"] > 0 && $teacher_order["\x63\157\155\x6d\x69\163\x73\151\157\156\x31"] > 0)) { goto sZ8JR; } goto gLzFx; joXMu: if (!(($params["\162\145\163\x75\154\164"] == "\163\165\143\143\145\x73\163" && $params["\x66\162\157\155"] == "\x6e\x6f\164\x69\146\171" || $params["\164\x79\160\145"] == "\143\162\x65\144\x69\164") && $teacher_order["\x73\x74\141\164\x75\163"] == 0)) { goto qnf02; } goto WH8nd; wHypm: $ordersn = $params["\164\151\x64"]; goto G6Ule; rPq_z: $data["\160\141\x79\164\171\160\145"] = $params["\x74\x72\141\144\x65\137\164\171\160\145"] ? $wechat_type : ''; goto DQgiC; XRKAE: vbCr9: goto YI4SY; eyALr: SqFWI: goto Hvnzk; gV7iX: oQl0c: goto ua25x; Z7FMn: tShsZ: goto sCVBC; WxVAt: if (!($params["\x66\x72\x6f\x6d"] == "\162\x65\x74\x75\162\x6e")) { goto duK21; } goto KeLOa; QocU1: $this->sendMessageToUser($uniacid, $setting, $teacher_order, 3, $validity); goto dVLtX; qR7oC: $this->sendCommissionToTeacher($uniacid, $lessonorder, $setting, $type = 2); goto g6FVO; bMct6: Z4919: goto EyvMU; A1HGo: $data["\160\141\171\164\x69\155\145"] = time(); goto SmTy3; rHC1t: XRt3j: goto Kv5g7; RP67R: $send_time = time(); goto Vqehp; Z5jTF: pdo_update($this->table_shop_order_goods, array("\163\164\x61\x74\x75\163" => 1, "\x70\141\x79\164\x69\155\x65" => $data["\x70\x61\171\x74\151\x6d\145"]), array("\x6f\x72\144\145\x72\151\x64" => $shoporder["\151\x64"])); goto UednN; DPYzB: u8soU: goto hM9yv; gNf53: cdEFu: goto lfGxJ; HmKqh: header("\114\157\143\x61\x74\151\x6f\156\72" . $successUrl); goto i6t1m; pg5QB: if (!($params["\146\162\x6f\155"] == "\162\145\x74\x75\x72\156")) { goto A0cbu; } goto cNE2n; EyvMU: if (!($viporder["\x6d\x65\x6d\x62\x65\x72\x32"] > 0 && $viporder["\x63\157\155\x6d\151\x73\x73\151\157\156\62"] > 0)) { goto hvbyT; } goto QsKp2; Wd9P8: $chatroom = pdo_fetch("\123\x45\114\105\x43\x54\x20\x2a\40\106\122\x4f\115\40" . tablename($this->table_live_chatroom) . "\40\127\110\105\x52\x45\40\165\156\151\141\x63\x69\x64\x3d\x3a\x75\156\x69\141\x63\151\144\40\101\116\104\x20\164\171\x70\x65\75\72\164\171\x70\145\x20\101\x4e\104\x20\154\145\x73\163\x6f\x6e\x69\144\75\72\154\x65\x73\163\x6f\156\151\144\x20\117\x52\104\105\x52\x20\102\x59\x20\x69\x64\x20\x41\123\x43", array("\x3a\165\x6e\x69\141\x63\151\144" => $uniacid, "\x3a\x74\171\160\x65" => 2, "\72\154\x65\163\163\x6f\x6e\x69\x64" => $awardorder["\154\x65\x73\163\157\x6e\151\x64"])); goto UHfEX; dZxpi: nfX1j: goto vcKpV; yBytM: kFOV4: goto CuqT_; qoPUO: $lessonmember = pdo_fetch("\123\x45\x4c\x45\x43\x54\40\141\56\x2a\x2c\x62\x2e\157\x70\145\156\x69\x64\x20\x46\122\x4f\115\x20" . tablename($this->table_member) . "\40\x61\40\x4c\105\x46\x54\x20\112\x4f\111\x4e\40" . tablename($this->table_fans) . "\x20\142\40\x4f\x4e\x20\x61\x2e\165\151\144\x3d\142\56\165\151\x64\40\x57\110\x45\x52\105\40\x61\x2e\x75\x6e\x69\x61\x63\x69\x64\x3d\x3a\x75\x6e\151\141\143\151\x64\x20\101\x4e\104\x20\141\x2e\x75\x69\144\x3d\x3a\165\151\144", array("\72\165\x6e\151\x61\143\151\x64" => $uniacid, "\x3a\165\x69\144" => $uid)); goto vaJo2; OEukm: $uid = $teacher_order["\x75\x69\x64"]; goto awZjF; yO9XK: message("\350\xb4\xad\xe4\xb9\xb0\346\210\220\xe5\x8a\x9f", $successUrl, "\163\165\x63\143\x65\163\163"); goto azhWn; ky2Jl: if (!($params["\146\x72\x6f\155"] == "\x72\145\164\165\162\x6e")) { goto LZg4S; } goto aQV6R; OxyBi: message("\350\264\xad\344\271\260\xe8\xaf\276\347\xa8\x8b\xe6\x88\x90\xe5\x8a\237", $successUrl, "\x73\165\x63\143\145\163\163"); goto oXT03; vaJo2: if (!(($params["\x72\x65\x73\x75\154\x74"] == "\163\165\143\x63\x65\x73\163" && $params["\146\x72\x6f\155"] == "\156\157\x74\x69\146\x79" || $params["\x74\x79\x70\x65"] == "\143\x72\145\144\x69\x74") && $viporder["\x73\x74\141\164\x75\163"] == 0)) { goto QepLy; } goto sHrhB; CB0rZ: $data["\x70\x61\171\x74\x79\160\x65"] = $params["\x74\171\160\145"]; goto rHC1t; INpo7: if (!($params["\x66\x72\157\155"] == "\x72\x65\164\165\x72\156")) { goto nNQ0C; } goto mnNhk; JiZTs: $this->sendCommissionToUser($uniacid, $viporder["\155\x65\x6d\x62\145\162\x33"], $lessonmember, 1, $setting, $viporder, $viporder["\143\157\x6d\x6d\x69\163\163\151\157\x6e\x33"], $level = 3, $comsetting); goto CcxMM; wfuax: global $_W; goto wHypm; mbwau: if (!($lessonorder["\155\145\x6d\x62\145\x72\x31"] > 0 && $lessonorder["\143\157\155\x6d\151\x73\163\x69\157\x6e\x31"] > 0)) { goto wqSiz; } goto NHzlR; Vc57j: QepLy: goto hcCVX; Kv5g7: $data["\x70\x61\171\164\x69\155\x65"] = time(); goto m4Xvp; i6t1m: duK21: goto H0rdA; hcCVX: if (!($params["\x66\x72\x6f\x6d"] == "\162\x65\164\x75\x72\156")) { goto ZcU4H; } goto AQrcO; fQI4T: if (!($teacher_order["\155\145\155\142\x65\x72\62"] > 0 && $teacher_order["\143\x6f\x6d\x6d\151\x73\x73\x69\x6f\x6e\62"] > 0)) { goto cdEFu; } goto iZrPv; dkHsv: $this->sendOrderMessageToAdmin($setting, $viporder, 1); goto owP2W; YI4SY: if (!($order_type == "\124")) { goto GllpK; } goto ztI6c; BeMIN: $validity = $this->updateTeacherValidity($uniacid, $lessonmember, $teacher_order); goto nfhpF; ykujE: $this->sendCommissionToTeacher($uniacid, $teacher_order, $setting, $type = 3); goto YGWum; iPkDs: $this->sendCommissionToTeacher($uniacid, $awardorder, $setting, $type = 4); goto AhjEb; gNM0_: $im_config = json_decode($setting["\x69\155\x5f\x63\157\x6e\x66\151\147"], true); goto jOSgO; vuNVY: $successUrl = $_W["\163\151\x74\145\162\157\x6f\x74"] . "\x61\x70\x70\x2f\x69\156\144\145\170\x2e\160\150\160\77\x69\x3d{$uniacid}\46\143\x3d\x65\156\164\x72\171\x26\x73\164\141\164\165\163\75\x70\x61\171\145\144\46\x64\157\x3d\155\x79\x6c\145\163\x73\157\156\46\155\75\146\x79\x5f\x6c\145\163\163\157\156\x76\x32"; goto GFCPi; ybg4u: OIG44: goto RIBu2; U8C7j: nPLby: goto SzEI6; dnKlB: YIAod: goto nyDmq; siedC: s987T: goto odM7B; LOSV5: if (!$awardorder["\164\145\x61\x63\x68\x65\162\137\151\x6e\143\157\155\145"]) { goto rnhlB; } goto iPkDs; VVy_F: if (!($viporder["\x6d\145\x6d\x62\145\162\x33"] > 0 && $viporder["\x63\x6f\x6d\x6d\151\163\163\151\157\x6e\63"] > 0)) { goto u3FZY; } goto JiZTs; ESL4D: $data["\x70\x61\x79\x74\x79\x70\145"] = $params["\x74\171\x70\145"]; goto T89Ka; mnNhk: $successUrl = $_W["\163\151\164\x65\162\157\157\164"] . "\x61\160\160\57\x69\x6e\x64\145\170\56\160\150\160\77\x69\x3d{$uniacid}\46\143\x3d\145\x6e\164\x72\x79\x26\157\160\x3d\144\145\x74\141\151\154\x73\46\x64\157\75\x73\150\x6f\x70\x6f\x72\x64\x65\162\x26\155\x3d\146\x79\137\x6c\x65\163\163\157\156\166\x32\x5f\160\154\x75\x67\x69\156\137\x73\150\x6f\160\x26\157\x72\144\x65\162\151\x64\x3d{$shoporder["\151\x64"]}"; goto xt5_T; wfg3W: Xh9PH: goto n2P3O; LAern: if (!empty($params["\x74\x79\160\145"])) { goto ORx0h; } goto rPq_z; Tgg7i: $this->updateLessonNumber($lessonorder["\x6c\x65\163\163\157\156\x69\144"]); goto tr4vc; kEA3w: if (!(($params["\x72\145\163\165\x6c\x74"] == "\x73\165\x63\x63\145\163\x73" && $params["\x66\162\x6f\x6d"] == "\x6e\x6f\x74\151\x66\171" || $params["\164\x79\x70\x65"] == "\143\162\145\144\151\164") && $awardorder["\163\164\141\x74\x75\x73"] == 0)) { goto KJZag; } goto DCHYO; lfGxJ: if (!($teacher_order["\x6d\x65\155\142\x65\162\x33"] > 0 && $teacher_order["\x63\157\155\155\x69\163\163\151\157\156\x33"] > 0)) { goto oQl0c; } goto eVgZH; n2P3O: nm4gA: goto Vc57j; q0pfd: VyuHc: goto CkbLg; qhxe5: nXSzn: goto dnKlB; quk7k: KJZag: goto WxVAt; nfhpF: $this->staticAmount($uniacid, 3, $teacher_order["\x70\162\x69\x63\145"]); goto ydpGD; T7QM5: message("\350\xb4\xad\344\xb9\260\xe6\x88\220\xe5\x8a\x9f", $successUrl, "\163\165\x63\143\145\x73\x73"); goto c6Ayd; kkTKa: if (!empty($params["\x74\x79\160\x65"])) { goto mo885; } goto FMajT; oXT03: goto JdpfD; goto a8yP4; KeLOa: $successUrl = $_W["\163\151\x74\x65\x72\x6f\x6f\164"] . "\x61\x70\x70\x2f\x69\156\x64\x65\170\x2e\160\x68\x70\x3f\151\75{$uniacid}\x26\x63\x3d\145\x6e\164\162\x79\46\151\x64\x3d{$awardorder["\154\x65\x73\x73\x6f\x6e\151\x64"]}\46\x70\154\x61\x79\x3d\x31\x26\x64\x6f\x3d\x6c\145\163\x73\x6f\156\x26\x6d\x3d\x66\171\137\x6c\145\163\163\157\156\x76\62"; goto HmKqh; JL71r: $validity = $this->updateVipValidity($uniacid, $lessonmember, $viporder); goto up1pp; v1UVC: xf5qC: goto ZgbBe; SZ4Ks: $data["\160\141\171\x74\x79\x70\x65"] = $params["\164\x79\160\x65"]; goto Z7FMn; l6Cah: if (!($order_type == "\101")) { goto PyZkx; } goto WARUB; AXTud: wqSiz: goto uMSxB; DQgiC: goto SRAoi; goto Vzwkl; WU7cA: LZg4S: goto XRKAE; WARUB: $awardorder = pdo_get($this->table_live_award, array("\157\162\x64\145\162\x73\156" => $ordersn)); goto Xh3VK; FMajT: $data["\160\141\171\164\x79\x70\x65"] = $params["\164\x72\x61\144\145\x5f\x74\x79\160\145"] ? $wechat_type : ''; goto l1jc1; QsKp2: $this->sendCommissionToUser($uniacid, $viporder["\x6d\x65\x6d\142\x65\x72\x32"], $lessonmember, 1, $setting, $viporder, $viporder["\143\x6f\x6d\155\151\x73\x73\151\157\156\x32"], $level = 2, $comsetting); goto V0Zyu; dVLtX: $this->sendOrderMessageToAdmin($setting, $teacher_order, 3); goto I6lax; GFCPi: message("\346\212\xa5\xe5\x90\215\346\x88\x90\xe5\x8a\237", $successUrl, "\x73\165\143\143\x65\x73\163"); goto qvX5c; al9TV: $data["\x70\141\x79\x74\171\x70\145"] = $params["\164\x72\x61\x64\x65\x5f\164\171\x70\145"] ? $wechat_type : ''; goto Xk7OD; ua25x: if (!($teacher_order["\x70\x72\x69\143\x65"] > 0 && $teacher_order["\164\145\x61\x63\x68\145\x72\137\151\x6e\x63\157\155\x65"] > 0)) { goto f7xHX; } goto ykujE; isZzD: $nickname = $member["\x6e\151\143\153\156\x61\155\145"] . "\x28" . $member["\165\x69\144"] . "\51"; goto RP67R; vrdOl: $this->updateShopGoodsStock($shoporder); goto zQXAP; KMy8I: $this->sendMessageToUser($uniacid, $setting, $lessonorder, 2, $validity = ''); goto FrQqd; Q_Zia: $successUrl = $_W["\x73\x69\x74\x65\x72\x6f\157\x74"] . "\141\x70\160\x2f\x69\x6e\144\x65\170\x2e\160\150\160\77\151\x3d{$uniacid}\x26\x63\x3d\145\156\164\x72\171\x26\151\163\160\141\171\75\x31\x26\x69\x64\x3d{$lessonorder["\154\145\163\163\x6f\156\x69\144"]}\x26\x64\x6f\75\154\x65\x73\x73\x6f\156\x26\x6d\x3d\x66\171\x5f\x6c\145\x73\163\x6f\x6e\x76\62"; goto OxyBi; WH8nd: $data = array("\x73\164\x61\164\x75\163" => $params["\x72\145\163\x75\154\x74"] == "\163\x75\143\143\145\x73\x73" ? 1 : 0); goto KB2n4; jOSgO: $api = new TisApi($im_config["\x61\157\144\151\x61\156\171\x75\156"]["\x61\143\143\x65\163\x73\111\144"], $im_config["\x61\x6f\x64\x69\x61\156\x79\x75\x6e"]["\141\x63\x63\x65\x73\163\113\x65\x79"]); goto Wd9P8; h_hVB: nNQ0C: goto ybg4u; FrQqd: $this->sendOrderMessageToAdmin($setting, $lessonorder, 2); goto RRMKQ; xt5_T: message("\346\x94\xaf\344\273\x98\xe6\x88\x90\xe5\x8a\237", $successUrl, "\163\x75\x63\x63\x65\x73\163"); goto h_hVB; TtMmH: if (!($lessonorder["\160\x72\x69\143\145"] > 0 && $lessonorder["\x63\157\155\x70\141\156\171\x5f\x75\x69\x64"] > 0 && $lessonorder["\x63\x6f\155\160\141\156\171\x5f\x69\x6e\143\x6f\155\x65"] > 0)) { goto BlTFg; } goto iTox2; L13PW: pyzI9: goto A1HGo; kOk9Y: GllpK: goto l6Cah; vcKpV: if (!($lessonorder["\x6d\x65\x6d\x62\x65\x72\63"] > 0 && $lessonorder["\x63\157\155\155\x69\x73\x73\151\x6f\x6e\x33"] > 0)) { goto SqFWI; } goto DQ2z3; GZbWc: $data = array("\163\164\x61\x74\165\163" => $params["\x72\x65\x73\x75\154\164"] == "\x73\165\143\x63\x65\163\x73" ? 1 : 0); goto LAern; N20d2: $uniacid = $viporder["\x75\x6e\x69\141\x63\x69\x64"]; goto QT8AE; izciJ: if (!(($params["\162\x65\x73\x75\x6c\164"] == "\x73\165\x63\x63\145\x73\163" && $params["\146\162\157\x6d"] == "\x6e\x6f\164\151\x66\171" || $params["\164\x79\x70\145"] == "\x63\162\x65\x64\151\x74" || $params["\146\x65\145"] == 0) && ($shoporder["\163\164\x61\x74\x75\163"] == 0 || $shoporder["\x73\164\141\x74\x75\163"] == -1))) { goto jaVDT; } goto OQFKE; NEC4y: $data["\160\x61\171\164\x79\x70\145"] = $params["\x74\171\x70\x65"]; goto yBytM; NQlKG: $this->sendMessageToUser($uniacid, $setting, $viporder, 1, $validity); goto dkHsv; CcxMM: u3FZY: goto NQlKG; rsrSD: $data["\x76\141\x6c\151\144\151\164\x79"] = time() + 86400 * $lessonorder["\166\141\154\x69\144\x69\x74\171"]; goto FezUw; G6Ule: $order_type = substr($ordersn, 0, 1); goto zLWnB; G1PFS: sZ8JR: goto fQI4T; UednN: $this->recordShopCommission($shoporder, $comsetting); goto NbtyP; azhWn: ZcU4H: goto ayHfq; baCAj: if (!pdo_update($this->table_member_order, $data, array("\157\x72\144\145\x72\x73\156" => $ordersn))) { goto nm4gA; } goto JL71r; QT8AE: $uid = $viporder["\165\x69\x64"]; goto qoPUO; ucpmY: $this->checkAgentStatus($lessonmember, $comsetting, $viporder["\x76\151\160\155\157\156\145\171"]); goto tR7e_; V0Zyu: hvbyT: goto VVy_F; eVgZH: $this->sendCommissionToUser($uniacid, $teacher_order["\155\x65\x6d\142\145\162\x33"], $lessonmember, 3, $setting, $teacher_order, $teacher_order["\x63\157\155\155\x69\163\163\151\157\156\x33"], $level = 3, $comsetting); goto gV7iX; T89Ka: SRAoi: goto gh_g0; lh7Z_: $this->sendCommissionToUser($uniacid, $lessonorder["\155\145\x6d\x62\x65\x72\x32"], $lessonmember, 2, $setting, $lessonorder, $lessonorder["\143\157\x6d\x6d\x69\x73\163\151\157\x6e\62"], $level = 2, $comsetting); goto dZxpi; KjdzO: mo885: goto CB0rZ; Xk7OD: goto kFOV4; goto K1zaj; MM87o: $uniacid = $shoporder["\x75\x6e\x69\x61\x63\x69\x64"]; goto xcUah; x_wFa: $this->handleUserIntegral($type = 2, $lessonorder["\x6f\162\x64\145\x72\163\x6e"], $lessonorder["\x75\151\144"], $lessonorder["\151\156\164\145\x67\x72\x61\154"]); goto U8C7j; H13Tx: $viporder = pdo_fetch("\123\105\114\105\103\x54\x20\52\40\106\x52\x4f\x4d\40" . tablename($this->table_member_order) . "\x20\127\110\105\122\x45\40\157\x72\144\x65\162\x73\156\75\x3a\157\x72\144\145\162\x73\x6e", array("\x3a\157\x72\144\x65\x72\163\x6e" => $ordersn)); goto N20d2; K1zaj: Zr1jF: goto NEC4y; iZrPv: $this->sendCommissionToUser($uniacid, $teacher_order["\155\145\155\x62\145\x72\62"], $lessonmember, 3, $setting, $teacher_order, $teacher_order["\x63\x6f\x6d\x6d\151\x73\x73\151\x6f\x6e\x32"], $level = 2, $comsetting); goto gNf53; oroTT: $data["\x70\x61\x79\164\171\x70\x65"] = $params["\164\x72\141\144\145\x5f\x74\171\x70\x65"] ? $wechat_type : ''; goto EUNuY; GoLfV: $this->handleUserIntegral($type = 1, $viporder["\157\162\144\145\162\163\x6e"], $viporder["\165\151\144"], $viporder["\151\x6e\x74\x65\x67\162\141\x6c"]); goto wfg3W; YRM_g: $this->sendOrderMessageToAdmin($setting, $shoporder, 4); goto euBpN; pzu39: if (!($order_type == "\x47")) { goto OIG44; } goto mVAwh; BVZFr: $this->handleUserIntegral($type = 3, $teacher_order["\157\x72\144\145\x72\163\x6e"], $teacher_order["\165\151\144"], $teacher_order["\151\156\x74\x65\147\x72\141\x6c"]); goto qhxe5; ZgbBe: $this->sendMessageToUser($uniacid, $setting, $shoporder, 4, $validity = ''); goto YRM_g; RIBu2: } public function updateVipValidity($uniacid, $lessonmember, $order) { goto s7yHj; NFGa2: pdo_update($this->table_member_vip, $vipData, array("\x69\144" => $memberVip["\x69\144"])); goto hPqBD; eSfy_: goto C_5vk; goto fbZEL; XNDgK: $newLevel = pdo_fetch("\123\x45\114\x45\103\x54\40\x64\x69\x73\x63\x6f\165\156\x74\x20\106\122\117\115\x20" . tablename($this->table_vip_level) . "\40\x57\110\x45\x52\x45\x20\151\144\75\72\151\x64", array("\72\x69\x64" => $order["\154\145\x76\145\x6c\137\151\x64"])); goto AGGz8; uf871: goto hv5Oi; goto SP8ZD; d4HhG: if (time() >= $memberVip["\x76\x61\x6c\151\144\151\x74\171"]) { goto P0MkC; } goto cfAYU; AlaGH: C_5vk: goto NFGa2; AGGz8: if (!empty($memberVip)) { goto uQSu9; } goto s6YTK; yozHx: return $vipData["\166\141\x6c\151\144\x69\164\x79"]; goto a6euH; s7yHj: $memberVip = pdo_fetch("\x53\105\114\105\103\124\x20\52\40\x46\x52\x4f\115\x20" . tablename($this->table_member_vip) . "\40\x57\110\105\122\x45\x20\165\x69\x64\75\x3a\x75\x69\144\40\x41\x4e\104\x20\x6c\x65\166\x65\x6c\137\151\144\x3d\72\x6c\x65\166\145\x6c\137\x69\x64", array("\72\x75\151\x64" => $order["\165\x69\144"], "\72\x6c\x65\x76\145\x6c\x5f\151\144" => $order["\154\145\x76\145\154\x5f\x69\x64"])); goto XNDgK; ktZat: $vipData = array("\x76\x61\x6c\x69\144\x69\164\171" => time() + $order["\166\x69\160\x74\x69\x6d\x65"] * 86400, "\x64\x69\x73\143\x6f\165\156\x74" => $newLevel["\144\151\x73\143\x6f\165\x6e\164"], "\165\160\144\x61\x74\145\137\164\x69\x6d\145" => time()); goto AlaGH; bUPbj: pdo_insert($this->table_member_vip, $vipData); goto uf871; s6YTK: $vipData = array("\165\156\151\x61\x63\151\144" => $uniacid, "\165\x69\x64" => $order["\x75\x69\144"], "\154\145\x76\145\x6c\137\x69\144" => $order["\154\145\x76\x65\154\x5f\x69\144"], "\166\141\154\x69\x64\151\x74\x79" => time() + $order["\x76\x69\x70\x74\151\155\x65"] * 86400, "\144\x69\163\x63\x6f\x75\156\164" => $newLevel["\x64\x69\163\143\x6f\x75\156\x74"], "\x61\x64\x64\164\x69\155\x65" => time()); goto bUPbj; fbZEL: P0MkC: goto ktZat; SP8ZD: uQSu9: goto d4HhG; cfAYU: $vipData = array("\x76\x61\x6c\151\x64\x69\164\x79" => $memberVip["\x76\141\x6c\x69\144\x69\164\x79"] + $order["\x76\151\160\x74\x69\155\x65"] * 86400, "\x64\x69\163\143\157\165\156\164" => $newLevel["\x64\x69\x73\x63\157\165\x6e\x74"], "\x75\160\144\x61\164\145\137\164\x69\155\x65" => time()); goto eSfy_; hPqBD: hv5Oi: goto yozHx; a6euH: } public function staticAmount($uniacid, $type, $orderAmount) { goto iecAz; yzQat: Yck0r: goto Hb27f; TB3KC: if ($type == 3) { goto WR1R4; } goto o5vIa; xUG07: goto c5WZ5; goto yzQat; QCEnx: if ($type == 2) { goto WNqkF; } goto TB3KC; yqhZh: WR1R4: goto nEblG; mIb7F: ZdieF: goto aMYXF; I_04N: GXdc0: goto bIur6; Hw3k5: goto CRf9K; goto yqhZh; sHAyO: JiPRk: goto HMnVZ; OgBOw: $exit = pdo_fetch("\x53\x45\x4c\x45\103\x54\40\x2a\40\106\x52\117\115\40" . tablename($this->table_static) . "\40\127\x48\105\x52\105\x20\165\156\151\x61\143\151\144\75\72\165\x6e\x69\141\143\151\144\40\101\x4e\104\x20\163\x74\x61\x74\151\x63\x5f\x74\x69\x6d\145\x3d\72\x73\x74\x61\x74\151\x63\137\164\151\x6d\x65", array("\x3a\165\x6e\151\x61\x63\151\144" => $uniacid, "\72\163\164\x61\x74\151\x63\x5f\x74\151\x6d\x65" => $today)); goto TFUjv; Piu0Z: WNqkF: goto JPaN9; VTuz0: goto c5WZ5; goto LQP3k; aUf36: KbEC7: goto JPqwj; eRP0p: pdo_insert($this->table_static, $staticData); goto I_04N; JPaN9: $staticData = array("\165\x6e\x69\141\143\151\144" => $uniacid, "\154\x65\163\163\x6f\x6e\117\x72\x64\x65\x72\x5f\156\165\x6d" => 1, "\154\x65\163\163\157\x6e\117\162\144\x65\162\x5f\141\x6d\157\x75\156\164" => $orderAmount, "\x73\164\x61\164\x69\x63\137\164\x69\155\145" => $today); goto Hw3k5; QCID_: c5WZ5: goto f3jjJ; lLIqV: $staticData = array("\154\x65\x73\x73\157\156\117\x72\144\145\162\137\156\165\x6d\x20\53\x3d" => 1, "\154\x65\163\163\157\x6e\117\162\x64\x65\162\137\141\155\157\165\x6e\164\40\53\x3d" => $orderAmount); goto uYkOM; iecAz: $today = strtotime("\x74\157\144\141\x79"); goto OgBOw; X8OjL: goto CRf9K; goto Piu0Z; uYkOM: goto c5WZ5; goto mIb7F; nEblG: $staticData = array("\x75\156\x69\x61\143\x69\144" => $uniacid, "\164\145\x61\143\x68\145\x72\117\162\x64\x65\x72\x5f\x6e\165\x6d" => 1, "\x74\x65\141\143\150\145\x72\x4f\162\144\x65\162\137\x61\x6d\157\x75\156\x74" => $orderAmount, "\163\164\141\164\151\143\x5f\x74\151\155\x65" => $today); goto S4BZM; HMnVZ: $staticData = array("\x75\x6e\x69\141\x63\x69\144" => $uniacid, "\166\x69\x70\117\x72\144\145\x72\137\156\165\155" => 1, "\166\151\160\x4f\162\144\145\162\x5f\x61\155\157\x75\x6e\164" => $orderAmount, "\163\x74\141\x74\x69\x63\x5f\x74\151\155\x65" => $today); goto X8OjL; XMOL7: goto GXdc0; goto aUf36; f3jjJ: pdo_update($this->table_static, $staticData, array("\x75\x6e\151\141\143\x69\x64" => $uniacid, "\x73\x74\x61\164\151\143\x5f\164\151\155\x65" => $today)); goto XMOL7; LQP3k: CyQMh: goto lLIqV; Hb27f: $staticData = array("\x76\151\160\x4f\x72\x64\x65\162\x5f\156\x75\x6d\40\x2b\x3d" => 1, "\166\x69\x70\x4f\162\144\145\162\137\x61\x6d\157\x75\x6e\164\x20\53\75" => $orderAmount); goto VTuz0; TFUjv: if (empty($exit)) { goto KbEC7; } goto y48Nf; o5vIa: goto CRf9K; goto sHAyO; S4BZM: CRf9K: goto eRP0p; aMYXF: $staticData = array("\164\145\x61\x63\150\145\x72\x4f\x72\144\x65\x72\137\x6e\x75\x6d\40\x2b\x3d" => 1, "\x74\x65\x61\143\150\x65\162\117\162\x64\145\162\137\x61\x6d\x6f\165\x6e\164\40\53\75" => $orderAmount); goto QCID_; vtImE: if ($type == 2) { goto CyQMh; } goto DOHEA; y48Nf: if ($type == 1) { goto Yck0r; } goto vtImE; JPqwj: if ($type == 1) { goto JiPRk; } goto QCEnx; DOHEA: if ($type == 3) { goto ZdieF; } goto xUG07; bIur6: } public function checkAgentStatus($member, $comsetting, $price) { goto hJ34W; SprFP: if (empty($upgradeLevel)) { goto MG_pw; } goto buX6q; vi3EZ: $orderTotal = $member["\160\x61\x79\155\145\x6e\x74\137\157\x72\x64\145\162"] ? $member["\x70\x61\x79\x6d\145\156\x74\x5f\x6f\162\144\x65\x72"] + 1 : $this->getMemberOrderNumber($member["\165\151\x64"]); goto Vxx3g; cNyC_: if (!($orderAmount >= $agent_condition["\x6f\162\144\145\162\137\x61\x6d\157\165\156\x74"] && $orderTotal >= $agent_condition["\x6f\162\x64\x65\162\137\x74\x6f\164\x61\x6c"])) { goto lta03; } goto mVDlo; rbIT8: $memberinfo["\141\x67\x65\156\x74\x5f\154\145\x76\x65\154"] = $upgradeLevel; goto Rjryq; Rjryq: qBAcI: goto F6STd; CYlfv: if ($comsetting["\x75\160\147\x72\x61\144\x65\x5f\143\157\x6e\x64\x69\x74\x69\x6f\x6e"] == 3) { goto xjvlA; } goto nwqud; udMPh: xjvlA: goto HIJ6I; ANeS9: if ($comsetting["\165\160\147\162\x61\x64\x65\x5f\x63\157\x6e\144\x69\x74\151\x6f\x6e"] == 2) { goto xrsri; } goto CYlfv; yGkvl: MG_pw: goto YVzzv; YVzzv: goto ViQhu; goto udMPh; buX6q: $memberinfo["\141\x67\145\x6e\164\x5f\x6c\x65\x76\x65\154"] = $upgradeLevel; goto yGkvl; FCgzC: pdo_update($this->table_member, $memberinfo, array("\165\x69\144" => $member["\x75\x69\144"])); goto iwscU; HIJ6I: $upgradeLevel = $this->upgradeAgentLevel($member["\165\156\151\x61\x63\151\x64"], $member["\141\x67\x65\156\164\x5f\x6c\x65\166\x65\x6c"], $orderTotal, $comsetting); goto c4qaF; S4szL: $agent_condition = unserialize($comsetting["\141\x67\145\x6e\x74\x5f\x63\157\156\x64\151\x74\x69\x6f\156"]); goto KXq18; KXq18: if (!($member["\163\164\141\x74\x75\x73"] == 0)) { goto waEVk; } goto cNyC_; eBAXS: lta03: goto keKfg; mVDlo: $memberinfo["\x73\x74\141\164\165\x73"] = 1; goto eBAXS; keKfg: waEVk: goto ANeS9; F6STd: ViQhu: goto FCgzC; Hcbzb: $upgradeLevel = $this->upgradeAgentLevel($member["\x75\x6e\151\x61\x63\151\144"], $member["\x61\x67\x65\156\x74\137\x6c\x65\166\x65\154"], $orderAmount, $comsetting); goto SprFP; hJ34W: $orderAmount = $member["\160\141\171\x6d\x65\156\x74\137\141\x6d\x6f\x75\156\x74"] ? $member["\160\141\x79\x6d\145\x6e\x74\x5f\x61\x6d\x6f\165\156\x74"] + $price : $this->getMemberOrderAmount($member["\165\151\144"]); goto vi3EZ; Vxx3g: $memberinfo = array("\160\x61\171\x6d\x65\x6e\164\x5f\x61\x6d\x6f\x75\x6e\164" => $orderAmount, "\160\141\171\x6d\x65\x6e\x74\137\157\162\144\145\x72" => $orderTotal); goto S4szL; c4qaF: if (empty($upgradeLevel)) { goto qBAcI; } goto rbIT8; nwqud: goto ViQhu; goto uVN4X; uVN4X: xrsri: goto Hcbzb; iwscU: } public function getMemberOrderAmount($uid) { goto PJ3mQ; Ozqc3: $orderAmount = $lessonAmount[0]["\141\155\x6f\165\x6e\164"] + $vipAmount[0]["\x61\x6d\x6f\x75\x6e\x74"]; goto MADQj; MADQj: return $orderAmount; goto Rg0XR; PJ3mQ: $lessonAmount = pdo_fetchall("\123\105\x4c\105\103\x54\x20\x53\x55\x4d\50\160\x72\x69\143\x65\51\40\141\x73\40\141\155\x6f\165\x6e\164\40\x46\x52\117\115\40" . tablename($this->table_order) . "\40\x57\x48\105\122\105\40\x75\151\144\x3d\72\165\151\144\40\101\x4e\x44\40\163\164\141\164\165\x73\x3e\75\72\163\164\x61\164\165\163", array("\x3a\165\x69\x64" => $uid, "\x3a\163\x74\141\x74\165\x73" => 1)); goto hGwHg; hGwHg: $vipAmount = pdo_fetchall("\x53\105\x4c\x45\x43\x54\x20\123\x55\x4d\50\x76\151\160\x6d\157\156\x65\x79\x29\40\x61\x73\40\141\155\157\165\156\164\x20\106\122\117\115\x20" . tablename($this->table_member_order) . "\40\127\110\x45\122\105\x20\x75\151\144\x3d\72\x75\151\144\40\x41\x4e\104\x20\x73\164\x61\x74\165\x73\75\x3a\163\x74\141\164\165\x73", array("\x3a\165\151\x64" => $uid, "\x3a\163\164\x61\164\x75\x73" => 1)); goto Ozqc3; Rg0XR: } public function getMemberOrderNumber($uid) { goto wZy1h; EC10Q: return $orderTotal; goto bHrHT; wZy1h: $lessonTotal = pdo_fetchcolumn("\123\x45\114\105\103\124\x20\103\x4f\125\116\x54\x28\52\x29\40\106\122\x4f\115\40" . tablename($this->table_order) . "\x20\127\x48\105\x52\x45\x20\165\x69\144\x3d\x3a\165\151\x64\x20\x41\x4e\104\40\x73\164\141\164\165\163\76\x3d\72\x73\x74\141\x74\165\x73\40", array("\72\x75\151\x64" => $uid, "\72\163\164\x61\x74\165\163" => 1)); goto mSY44; uzdPV: $orderTotal = $lessonTotal + $vipTotal; goto EC10Q; mSY44: $vipTotal = pdo_fetchcolumn("\x53\x45\114\105\x43\124\40\x43\117\x55\116\x54\x28\x2a\51\40\x46\122\x4f\x4d\x20" . tablename($this->table_member_order) . "\x20\x57\110\105\122\x45\x20\x75\151\144\x3d\72\165\151\144\40\x41\116\104\x20\x73\x74\x61\164\x75\163\x3d\x3a\163\164\x61\x74\x75\x73", array("\x3a\165\151\x64" => $uid, "\x3a\x73\x74\x61\x74\x75\163" => 1)); goto uzdPV; bHrHT: } public function upgradeAgentLevel($uniacid, $agentLevel, $total_commission, $comsetting) { goto ZTxBg; ksYy1: DnNCS: goto IVHlz; iOjFD: kTASc: goto PDZlx; saT7L: if (empty($levellist)) { goto kFhFR; } goto WEHoI; Ef_Th: return $upgradeLevel; goto lQJ5n; lQJ5n: kFhFR: goto oOSrL; A6omr: goto J6ir6; goto YIqv2; ZTxBg: $levellist = pdo_fetchall("\123\105\114\105\x43\124\40\x2a\40\x46\x52\117\x4d\x20" . tablename($this->table_commission_level) . "\40\x57\110\105\x52\105\40\165\x6e\151\x61\143\x69\144\x3d\72\x75\x6e\x69\141\143\x69\x64\x20\117\122\104\x45\122\x20\x42\131\x20\151\144\x20\101\123\x43", array("\x3a\165\156\151\141\143\x69\144" => $uniacid)); goto saT7L; IVHlz: DU0wB: goto A6omr; G24kB: dD78j: goto xxhio; cZPuU: if (!($level["\x75\x70\x64\141\x74\x65\155\x6f\156\145\171"] > 0 && $total_commission >= $level["\x75\x70\144\141\164\x65\x6d\157\x6e\x65\171"])) { goto DU0wB; } goto nbICR; nbICR: foreach ($levellist as $key => $value) { goto naOrh; WsD_1: ynj9a: goto gjqFp; UV1_J: qm8Hy: goto wTZ5g; HTfWg: goto rWBra; goto WsD_1; o3ny0: t97qT: goto yLARl; gjqFp: $upgradeLevel = intval($levellist[$key + 1]["\151\144"]); goto J4zl6; J4zl6: rWBra: goto UV1_J; naOrh: if (!($value["\151\144"] == $level["\151\144"])) { goto t97qT; } goto X34HW; yLARl: if ($value["\165\x70\144\x61\x74\x65\155\157\x6e\145\x79"] > 0 && $total_commission >= $value["\x75\x70\144\141\x74\x65\x6d\157\156\x65\171"]) { goto ynj9a; } goto lEBLw; X34HW: $levelkey = $key; goto o3ny0; lEBLw: goto bKwsC; goto HTfWg; wTZ5g: } goto fsfMf; N732I: $upgradeLevel = $levellist[0]["\151\144"]; goto pGGr9; xTeMw: if (!($upgradeLevel == $level["\151\144"])) { goto DnNCS; } goto Iy3Na; fsfMf: bKwsC: goto xTeMw; Iy3Na: $upgradeLevel = $levellist[$levelkey + 1]["\151\144"]; goto ksYy1; YIqv2: cTDR4: goto Lkm0N; xxhio: if (!empty($upgradeLevel)) { goto RKZcV; } goto N732I; pGGr9: RKZcV: goto iOjFD; jMx_m: foreach ($levellist as $key => $value) { goto bTvLI; ifBy7: Ew3bR: goto OQIHp; QSMmY: IlSPO: goto lVYpB; bTvLI: if ($value["\165\160\144\141\x74\145\155\157\x6e\x65\171"] > 0 && $total_commission >= $value["\x75\160\x64\x61\164\145\x6d\157\156\145\171"]) { goto Ew3bR; } goto T0RMU; OQIHp: $upgradeLevel = intval($levellist[$key + 1]["\x69\144"]); goto QSMmY; MURl6: goto IlSPO; goto ifBy7; lVYpB: maEWC: goto hKGPJ; T0RMU: goto dD78j; goto MURl6; hKGPJ: } goto G24kB; jGxU_: $level = pdo_fetch("\123\105\114\x45\103\x54\x20\52\40\x46\122\117\115\40" . tablename($this->table_commission_level) . "\40\x57\x48\x45\x52\x45\x20\151\x64\x3d\72\151\x64", array("\72\x69\144" => $agentLevel)); goto cZPuU; WEHoI: if ($agentLevel == 0) { goto cTDR4; } goto jGxU_; PDZlx: J6ir6: goto Ef_Th; Lkm0N: $commission = unserialize($comsetting["\x63\x6f\x6d\155\151\x73\163\151\x6f\x6e"]); goto HXxUu; HXxUu: if (!($commission["\x75\160\x64\x61\164\x65\x6d\157\156\x65\171"] > 0 && $total_commission >= $commission["\x75\160\144\x61\164\145\155\157\x6e\145\x79"])) { goto kTASc; } goto jMx_m; oOSrL: } public function sendCommissionToUser($uniacid, $uid, $lessonmember, $type, $setting, $order, $commission, $level, $comsetting) { goto e07ZD; qFvIs: pdo_update($this->table_member_order, array("\143\157\155\155\x69\x73\163\x69\157\156\62" => 0), array("\151\x64" => $order["\x69\144"])); goto HNb9W; Xz9DR: $first = $cnotice_format["\166\151\160\137\x66\151\162\163\164"] ? $cnotice_format["\166\151\160\137\146\x69\162\x73\x74"] : "\346\x82\xa8\xe8\216\267\345\xbe\227\344\xba\x86\xe4\270\200\347\xac\224\xe6\226\xb0\347\x9a\204\x56\x49\120\xe5\210\x86\xe9\224\x80\xe4\xbd\xa3\351\207\x91\xe3\x80\x82"; goto pvLTi; KeO3o: $this->changecommisson($order, "{$orderContent}\345\x88\x86\xe9\x94\200\350\256\242\xe5\215\x95", $uid, $commission, $level, $level . "\xe7\xba\xa7\344\xbd\xa3\xe9\207\x91\x3a\xe8\256\242\xe5\x8d\225\345\x8f\267" . $order["\157\x72\144\145\162\x73\x6e"], $customer["\x6e\x69\x63\153\156\x61\155\x65"], $senddata, $comsetting, $type); goto jk5dh; bgnht: if ($type == 2) { goto pI1ip; } goto P3ibu; dmirU: $orderContent = "\x5b{$order["\x74\145\x61\x63\x68\145\162\x5f\156\141\x6d\x65"]}\135\xe8\xae\xb2\xe5\xb8\210\xe6\x9c\x8d\345\212\241\55{$order["\157\x72\144\145\x72\x74\x69\155\145"]}\345\244\xa9"; goto Z0Jpw; bU7XY: goto UQVCe; goto AYYmX; G62Gf: $cnotice_format = json_decode($tplmessage["\143\x6e\157\164\x69\143\x65\x5f\146\x6f\x72\155\x61\164"], true); goto Vsul2; pvLTi: $orderContent = "\133{$order["\x6c\145\x76\x65\154\137\x6e\x61\x6d\x65"]}\135\xe6\x9c\215\xe5\x8a\241\55{$order["\x76\x69\x70\164\151\x6d\145"]}\xe5\xa4\251"; goto SdKfs; Iy7WD: $memberVip = pdo_fetchall("\x53\x45\114\105\x43\124\40\x2a\40\x46\122\117\x4d\x20" . tablename($this->table_member_vip) . "\x20\x57\x48\105\122\105\x20\165\x69\144\75\72\x75\x69\144\x20\101\116\104\40\166\141\x6c\151\144\151\x74\171\76\72\x76\141\154\x69\144\151\x74\x79", array("\x3a\165\151\144" => $uid, "\x3a\x76\141\x6c\151\x64\x69\x74\x79" => time())); goto HCBhX; e07ZD: global $_W; goto Ne21q; NAiCR: goto ThiS9; goto kFSqG; oVgiT: if ($level == 1) { goto WIWGC; } goto aKaev; Ym7fH: CflxH: goto Y3IqF; kFSqG: WIWGC: goto ilR2t; rbiiR: yVKQX: goto VyYGa; TIyoc: $customer = pdo_fetch("\x53\x45\x4c\105\103\124\40\x6e\x69\x63\x6b\x6e\x61\155\145\40\x46\122\x4f\115\40" . tablename($this->table_mc_members) . "\40\x57\110\x45\x52\105\40\165\151\x64\x3d\x3a\165\151\x64", array("\x3a\x75\151\144" => $order["\x75\151\144"])); goto ikolF; NnboN: $price = $order["\160\x72\x69\143\x65"]; goto w0WJe; jk5dh: goto lbi6M; goto NGT6Z; IwC_2: $orderContent = "\350\257\xbe\xe7\xa8\213\xef\274\x9a\xe3\200\212{$order["\x62\157\x6f\x6b\x6e\141\x6d\145"]}\343\x80\x8b"; goto NnboN; VyYGa: $this->changecommisson($order, "{$orderContent}\xe5\x88\x86\xe9\x94\200\xe8\xae\242\345\x8d\225", $uid, $commission, $level, $level . "\xe7\272\xa7\344\xbd\243\351\x87\x91\72\350\256\242\345\x8d\x95\345\x8f\267" . $order["\x6f\x72\x64\145\162\163\x6e"], $customer["\156\151\x63\153\156\141\155\145"], $senddata, $comsetting, $type); goto Ym7fH; HCBhX: if (!empty($memberVip)) { goto yVKQX; } goto oVgiT; ZdXKN: rZpQr: goto qFvIs; P3ibu: if ($type == 3) { goto kd6a0; } goto bU7XY; nlHXf: goto ThiS9; goto ZdXKN; tM6yD: pdo_update($this->table_member_order, array("\x63\x6f\155\155\x69\x73\163\x69\157\156\x33" => 0), array("\x69\144" => $order["\x69\x64"])); goto kKYHG; YWhIS: $first = $cnotice_format["\x6c\145\x73\163\157\x6e\x5f\146\x69\162\x73\x74"] ? $cnotice_format["\x6c\x65\163\163\157\x6e\x5f\146\151\162\163\x74"] : "\xe6\202\xa8\xe8\216\xb7\xe5\276\x97\xe4\xba\x86\344\270\200\347\xac\224\346\x96\xb0\xe7\232\204\xe8\xaf\276\xe7\xa8\213\xe5\210\x86\351\x94\x80\344\275\243\xe9\x87\221\xe3\x80\202"; goto IwC_2; KP2Y1: goto UQVCe; goto pqsrh; kKYHG: ThiS9: goto X2IQq; AYYmX: KUYNn: goto Xz9DR; Wn6ii: $member = pdo_fetch("\x53\x45\x4c\x45\103\x54\40\157\160\145\x6e\151\144\x20\x46\x52\117\115\40" . tablename($this->table_fans) . "\40\127\x48\x45\x52\x45\40\165\151\144\75\x3a\165\151\x64", array("\x3a\165\151\144" => $uid)); goto TIyoc; HNb9W: goto ThiS9; goto y23Ru; Ne21q: $tplmessage = pdo_fetch("\123\x45\114\x45\103\x54\40\143\x6e\157\164\151\143\145\x2c\143\x6e\x6f\164\x69\143\145\137\146\157\x72\155\x61\164\x20\x46\122\117\x4d\x20" . tablename($this->table_tplmessage) . "\x20\127\x48\105\122\105\40\x75\156\x69\x61\143\x69\144\75\72\x75\x6e\x69\141\143\x69\x64", array("\72\x75\156\x69\141\143\151\144" => $uniacid)); goto G62Gf; y23Ru: bkWG5: goto tM6yD; aKaev: if ($level == 2) { goto rZpQr; } goto BJQkS; NGT6Z: dNTFB: goto Iy7WD; SFqbS: if ($comsetting["\x73\141\154\145\x5f\162\141\x6e\x6b"] == 2) { goto dNTFB; } goto KeO3o; KiyE9: $remark = $cnotice_format["\166\x69\x70\x5f\x72\145\x6d\141\162\x6b"] ? $cnotice_format["\166\151\x70\x5f\x72\145\155\x61\162\x6b"] : "\347\x82\271\xe5\207\xbb\xe8\xaf\246\xe6\x83\205\xe5\215\263\xe5\217\xaf\xe6\237\245\347\x9c\x8b\344\275\243\351\207\221\346\x98\x8e\xe7\xbb\x86\xe3\x80\x82"; goto pSlW9; pSlW9: goto UQVCe; goto txdX5; Y3IqF: lbi6M: goto H_HEs; Tk1jt: $first = $cnotice_format["\142\x75\x79\164\145\141\143\x68\x65\162\x5f\146\151\162\x73\x74"] ? $cnotice_format["\142\x75\x79\164\x65\x61\x63\x68\x65\x72\x5f\x66\151\x72\163\x74"] : "\346\x82\250\350\x8e\xb7\xe5\276\227\344\xba\x86\344\xb8\x80\xe7\xac\x94\xe6\226\260\347\x9a\x84\345\210\x86\351\224\x80\344\xbd\243\351\207\x91\xe3\200\202"; goto dmirU; Vsul2: if ($type == 1) { goto KUYNn; } goto bgnht; ilR2t: pdo_update($this->table_member_order, array("\143\157\x6d\x6d\151\x73\163\151\x6f\x6e\61" => 0), array("\x69\x64" => $order["\151\144"])); goto nlHXf; Z0Jpw: $price = $order["\x70\x72\151\143\145"]; goto LovrI; ikolF: $senddata = array("\157\x70\145\156\151\x64" => $member["\x6f\160\x65\x6e\x69\x64"], "\143\156\x6f\x74\151\143\145" => $tplmessage["\143\x6e\157\164\x69\x63\145"], "\x75\162\154" => $_W["\163\151\x74\x65\x72\157\x6f\164"] . "\141\x70\160\57\x69\156\144\145\x78\x2e\160\150\x70\x3f\151\x3d{$uniacid}\46\143\75\x65\x6e\x74\162\x79\46\x6f\160\75\143\x6f\155\155\151\163\x73\x69\x6f\x6e\x6c\x6f\147\x26\x64\x6f\75\x63\157\155\155\151\163\163\151\157\156\x26\155\75\146\171\x5f\154\145\x73\x73\157\156\166\x32", "\146\x69\162\x73\164" => $first, "\153\x65\x79\x77\157\162\x64\61" => "{$commission}\xe5\205\203", "\153\x65\171\167\157\162\144\62" => "{$price}\xe5\x85\x83", "\x6b\145\x79\x77\x6f\x72\144\x33" => date("\x59\345\271\264\155\xe6\234\x88\144\xe6\x97\245\x20\110\72\151", time()), "\x72\145\155\141\162\153" => "\xe4\xb8\x8b\347\272\247\xe6\x88\x90\xe5\x91\x98\357\xbc\x9a{$customer["\x6e\151\143\x6b\x6e\x61\x6d\145"]}\xa\346\266\210\350\xb4\271\xe5\x86\205\xe5\xae\271\357\274\232{$orderContent}\xa" . $remark); goto SFqbS; txdX5: pI1ip: goto YWhIS; w0WJe: $remark = $cnotice_format["\x6c\x65\x73\163\157\156\137\x72\x65\155\x61\x72\x6b"] ? $cnotice_format["\x6c\x65\x73\163\x6f\x6e\x5f\162\x65\155\141\x72\153"] : "\347\202\xb9\345\207\273\xe8\xaf\xa6\xe6\203\205\xe5\215\xb3\345\217\xaf\xe6\x9f\245\xe7\x9c\213\344\xbd\xa3\xe9\207\221\xe6\x98\216\xe7\273\x86\xe3\200\202"; goto KP2Y1; X2IQq: goto CflxH; goto rbiiR; BJQkS: if ($level == 3) { goto bkWG5; } goto NAiCR; DXwOr: UQVCe: goto Wn6ii; LovrI: $remark = $cnotice_format["\x62\165\171\x74\145\x61\x63\150\145\162\x5f\162\x65\155\141\162\153"] ? $cnotice_format["\142\x75\x79\x74\x65\141\x63\150\145\x72\137\162\x65\155\x61\162\153"] : "\347\202\xb9\xe5\x87\xbb\350\xaf\246\346\x83\205\xe5\x8d\263\xe5\x8f\257\xe6\237\xa5\xe7\x9c\x8b\xe4\275\243\xe9\207\221\xe6\x98\x8e\xe7\xbb\x86\xe3\x80\x82"; goto DXwOr; pqsrh: kd6a0: goto Tk1jt; SdKfs: $price = $order["\166\151\160\155\157\156\x65\171"]; goto KiyE9; H_HEs: } public function changecommisson($order, $bookname, $uid, $change_num, $grade, $remark, $customer_name, $senddata, $comsetting, $type) { goto QMz8x; u5sYt: $updatearr["\143\x6f\x6d\x6d\151\x73\163\x69\x6f\156\x33"] = 0; goto nWf4T; nZwvk: $source = 2; goto OEvdh; ckhTC: AgqZ2: goto TaPaH; g9Amf: QJHvi: goto Rx_Wc; ioxrx: pdo_insert($this->table_commission_log, $logarr); goto Wul8d; zJt1e: if ($type == 2) { goto AgqZ2; } goto ObcQ0; ELBre: if ($grade == 1) { goto aJN2W; } goto KA_8k; ftceF: $upgradeLevel = $this->upgradeAgentLevel($uniacid, $agentMember["\141\147\x65\x6e\x74\x5f\154\x65\166\145\154"], $total_commission, $comsetting); goto PxQt7; PxQt7: if (empty($upgradeLevel)) { goto dVQpO; } goto NNNsZ; dlzrF: load()->model("\x6d\x63"); goto vEvEQ; HFMq6: pdo_update($this->table_order, $updatearr, array("\x69\144" => $order["\151\x64"])); goto xys5N; R7Erm: goto UDI6U; goto GJsXE; rsvW8: if (!pdo_update($this->table_member, $memupdate, array("\x75\151\x64" => $agentMember["\165\151\x64"]))) { goto KGERs; } goto bnus0; TaPaH: $source = 1; goto LgsfG; ObcQ0: if ($type == 3) { goto wegy1; } goto kd3j7; QoirP: goto UDI6U; goto d7wXL; kd3j7: goto pNm4U; goto LlG6x; C2Tfz: TAXky: goto kg0wP; or4jB: $updatearr["\x63\x6f\155\x6d\151\163\x73\x69\x6f\156\61"] = 0; goto R7Erm; uYcd1: aJN2W: goto or4jB; LlG6x: hl4My: goto nZwvk; QMz8x: global $_W; goto jD5HW; bnus0: if (!$comsetting["\143\x6f\155\x6d\151\163\163\x69\x6f\156\137\x63\x72\x65\x64\151\x74"]) { goto wbWy1; } goto dlzrF; twvjd: dVQpO: goto C2Tfz; O2SEo: if ($grade == 3) { goto PmOZo; } goto uMJXH; Qigy2: $uniacid = $agentMember["\x75\x6e\x69\x61\x63\151\144"]; goto JlBie; KPuoR: $logarr = array("\165\156\x69\x61\143\151\x64" => $uniacid, "\x6f\162\144\145\162\151\x64" => $order["\x69\x64"], "\165\151\x64" => $uid, "\142\x6f\157\x6b\x6e\141\155\x65" => $bookname, "\x6f\x72\x64\145\162\x5f\141\x6d\x6f\165\x6e\x74" => $order["\x76\151\160\x6d\x6f\x6e\145\171"] ? $order["\x76\x69\x70\x6d\157\x6e\145\x79"] : $order["\160\162\151\x63\x65"], "\143\150\x61\x6e\147\145\x5f\156\x75\x6d" => $change_num, "\147\x72\x61\x64\145" => $grade, "\x72\145\155\x61\162\153" => $remark, "\142\165\171\145\x72\137\x75\x69\x64" => $order["\165\151\x64"], "\163\x6f\x75\x72\143\x65" => $source, "\x61\144\144\x74\x69\155\145" => time()); goto ioxrx; d7wXL: PmOZo: goto u5sYt; Wul8d: $this->commissionMessage($senddata, $uniacid); goto Zw6ZJ; gTlQK: pNm4U: goto KPuoR; UQW83: $source = 3; goto gTlQK; KA_8k: if ($grade == 2) { goto yUo39; } goto O2SEo; Rx_Wc: $memupdate = array(); goto dZU4S; nWf4T: UDI6U: goto HFMq6; uMJXH: goto UDI6U; goto uYcd1; kg0wP: $memupdate["\156\x6f\x70\x61\x79\137\143\x6f\155\x6d\151\x73\x73\x69\157\156"] = $agentMember["\x6e\x6f\160\x61\x79\137\143\x6f\x6d\x6d\151\x73\163\151\157\156"] + $change_num; goto rsvW8; Zw6ZJ: klISM: goto MNTB5; oL8Pq: wbWy1: goto i8XYN; dZU4S: if (!($comsetting["\165\160\x67\162\x61\x64\x65\x5f\x63\x6f\156\144\151\164\x69\x6f\x6e"] == 1)) { goto TAXky; } goto bU_kE; SBtvP: wegy1: goto UQW83; NNNsZ: $memupdate["\x61\x67\x65\x6e\164\x5f\x6c\145\166\x65\154"] = $upgradeLevel; goto twvjd; W4pgI: $updatearr["\143\157\155\x6d\151\163\x73\x69\157\x6e\x32"] = 0; goto QoirP; bU_kE: $total_commission = $agentMember["\x70\141\171\x5f\143\x6f\155\x6d\x69\163\x73\x69\157\156"] + $agentMember["\156\x6f\x70\141\171\137\x63\157\155\x6d\x69\163\x73\151\157\x6e"] + $change_num; goto ftceF; jD5HW: $agentMember = pdo_fetch("\x53\x45\x4c\x45\x43\x54\40\x2a\x20\x46\x52\117\x4d\40" . tablename($this->table_member) . "\40\x57\110\105\122\x45\40\x75\x69\x64\x3d\x3a\x75\151\144", array("\72\x75\x69\144" => $uid)); goto Qigy2; OEvdh: goto pNm4U; goto ckhTC; xys5N: goto klISM; goto g9Amf; Q4yxX: if ($type == 1) { goto hl4My; } goto zJt1e; i8XYN: KGERs: goto Q4yxX; LgsfG: goto pNm4U; goto SBtvP; JlBie: if ($agentMember["\163\x74\141\164\x75\x73"] == 1) { goto QJHvi; } goto ELBre; GJsXE: yUo39: goto W4pgI; vEvEQ: mc_credit_update($uid, "\143\162\x65\x64\151\164\x31", intval($change_num), array(0, $remark, "\146\x79\x5f\x6c\145\x73\x73\x6f\156\166\62")); goto oL8Pq; MNTB5: } public function commissionMessage($data, $uniacid) { $message = array("\x74\x6f\x75\x73\x65\162" => $data["\157\x70\145\156\151\x64"], "\x74\x65\x6d\x70\154\141\x74\x65\x5f\151\144" => $data["\143\x6e\x6f\x74\x69\x63\x65"], "\x75\162\154" => $data["\x75\162\154"], "\x74\157\x70\x63\157\x6c\x6f\162" => '', "\x64\x61\164\141" => array("\146\x69\162\163\x74" => array("\166\141\x6c\165\x65" => $data["\x66\x69\162\163\164"], "\143\x6f\x6c\x6f\x72" => ''), "\153\x65\171\167\x6f\162\x64\61" => array("\166\141\154\165\145" => $data["\x6b\145\x79\x77\157\x72\x64\61"], "\x63\x6f\x6c\x6f\162" => ''), "\153\145\171\x77\157\x72\x64\x32" => array("\166\141\x6c\x75\x65" => $data["\153\x65\171\x77\157\x72\x64\62"], "\x63\157\x6c\x6f\x72" => ''), "\x6b\x65\x79\167\157\162\x64\63" => array("\166\141\x6c\x75\x65" => $data["\x6b\x65\x79\x77\x6f\162\144\x33"], "\143\x6f\x6c\157\x72" => ''), "\162\145\155\x61\162\x6b" => array("\x76\x61\154\165\145" => $data["\x72\x65\155\141\x72\x6b"], "\143\x6f\154\x6f\x72" => ''))); $this->send_template_message($message, $uniacid); } public function send_template_message($messageDatas, $uniacid = '') { goto q7n9W; fV38a: bVwSQ: goto kJilC; nCOBH: $access_token = $account_api->getAccessToken(); goto j8ix2; y7bQJ: return json_decode($ress, true); goto Ut6yr; j8ix2: $urls = "\150\x74\x74\160\x73\x3a\x2f\57\x61\160\151\56\167\x65\x69\170\x69\x6e\x2e\161\161\56\x63\157\x6d\x2f\143\x67\151\x2d\142\151\x6e\x2f\x6d\145\163\163\x61\x67\145\x2f\x74\145\x6d\x70\x6c\x61\x74\x65\x2f\x73\145\156\x64\77\x61\143\143\145\x73\163\137\x74\x6f\153\x65\x6e\75" . $access_token; goto e34QT; kJilC: load()->classs("\167\x65\x69\x78\x69\x6e\x2e\x61\143\143\157\x75\x6e\164"); goto FpSTy; Ptiir: $ress = $this->http_request($urls, $messageDatas); goto y7bQJ; FpSTy: $account_api = WeixinAccount::create($account); goto nCOBH; q7n9W: global $_W, $_GPC; goto rkZTV; IvP2n: return; goto y0lvc; e34QT: $messageDatas = urldecode(json_encode($messageDatas)); goto Ptiir; t2KbE: $account = uni_fetch($uniacid); goto fV38a; DUiD8: if (!$uniacid) { goto bVwSQ; } goto t2KbE; rkZTV: if (!(!$messageDatas["\164\x6f\x75\x73\x65\162"] || !$messageDatas["\164\145\155\160\154\x61\164\145\x5f\x69\144"])) { goto q9jRM; } goto IvP2n; y0lvc: q9jRM: goto DUiD8; Ut6yr: } public function http_request($url, $messageDatas = null) { goto yb_0b; QP_su: curl_close($curl); goto GP804; UUDYh: $output = curl_exec($curl); goto QP_su; ndV3S: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); goto TxlXo; bhGF2: curl_setopt($curl, CURLOPT_URL, $url); goto ndV3S; TxlXo: curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); goto raemV; l2RUo: Hm0vL: goto BQNIj; PH8Oc: curl_setopt($curl, CURLOPT_POST, 1); goto ckozp; yb_0b: $curl = curl_init(); goto bhGF2; raemV: if (empty($messageDatas)) { goto Hm0vL; } goto PH8Oc; GP804: return $output; goto xTW1B; BQNIj: curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); goto UUDYh; ckozp: curl_setopt($curl, CURLOPT_POSTFIELDS, $messageDatas); goto l2RUo; xTW1B: } public function sendMessageToUser($uniacid, $setting, $order, $type, $validity) { goto R7HcC; ps9Vn: $price = $order["\166\151\160\155\157\156\x65\171"]; goto Usm8B; P041Z: goto Itl2Z; goto ONEyk; R7HcC: global $_W; goto UzVNH; KdYkG: if ($type == 2) { goto VrzmV; } goto JHMDO; JHMDO: if ($type == 3) { goto peNfJ; } goto XvTOc; D5pSP: $remark = "\xe6\234\x89\346\x95\210\xe6\x9c\x9f\xe8\207\263\357\274\x9a" . date("\x59\xe5\xb9\264\x6d\346\x9c\x88\144\346\x97\xa5", $validity) . "\12" . $integral; goto ggja7; QsSSt: $first = $buysucc_format["\146\x69\162\163\x74\63"] ? $buysucc_format["\146\x69\x72\163\164\x33"] : "\xe6\x82\250\xe5\xb7\xb2\350\xb4\255\xe4\xb9\260\346\210\x90\345\212\237\xe3\200\202"; goto mK9fL; AB8GE: $first = $buysucc_format["\146\x69\x72\x73\164\x31"] ? $buysucc_format["\x66\151\162\x73\164\61"] : "\xe6\x82\250\345\267\262\xe8\264\xad\xe4\xb9\260\xe6\x88\220\xe5\212\x9f\343\200\202"; goto ZwrP1; ccbhG: $remark = $buysucc_format["\x72\x65\155\x61\162\x6b\64"] ? $buysucc_format["\x72\145\155\x61\162\x6b\x34"] : $remark; goto LJ7fg; dgYt9: goto Itl2Z; goto IcFEI; NEv7Y: $url = $_W["\163\151\164\x65\162\x6f\157\x74"] . "\141\x70\160\57\x69\x6e\144\x65\x78\56\x70\x68\x70\x3f\151\x3d{$uniacid}\46\143\75\145\x6e\164\x72\171\x26\x64\x6f\75\155\x79\x6c\x65\163\163\x6f\156\46\x6d\75\146\x79\x5f\x6c\145\163\x73\157\x6e\x76\62"; goto hSe0_; IcFEI: u1go0: goto GYI1y; SLZ3H: goto Itl2Z; goto apDQe; amxea: $first = $buysucc_format["\146\151\162\x73\x74\64"] ? $buysucc_format["\146\151\x72\x73\164\x34"] : "\346\202\xa8\xe7\232\204\xe8\256\242\345\x8d\225\xe5\267\xb2\346\224\257\xe4\273\230\xe6\210\220\345\x8a\x9f\xe3\x80\x82"; goto pxGyR; BdIO9: $remark .= "\xa" . $buysucc_format["\x72\x65\155\141\x72\x6b\x32"] . $integral; goto Z7NoY; GYI1y: $url = $_W["\x73\151\x74\145\162\157\x6f\164"] . "\141\x70\x70\x2f\151\156\x64\145\170\x2e\160\150\160\x3f\151\x3d{$uniacid}\x26\143\75\x65\156\164\162\171\x26\144\x6f\75\166\151\160\x26\155\75\x66\x79\x5f\154\145\163\x73\157\x6e\x76\x32"; goto AB8GE; IAO2C: if ($type == 1) { goto u1go0; } goto KdYkG; WjmK8: m38g1: goto BtuoK; UzVNH: $tplmessage = pdo_fetch("\123\105\114\105\103\x54\40\142\x75\x79\x73\x75\143\x63\x2c\x62\x75\x79\x73\x75\143\x63\x5f\x66\157\x72\155\x61\164\40\x46\x52\117\115\x20" . tablename($this->table_tplmessage) . "\x20\x57\110\105\122\105\40\x75\156\151\x61\x63\151\x64\75\72\x75\x6e\151\141\x63\x69\144", array("\72\x75\156\151\141\143\151\144" => $uniacid)); goto HCSG0; BOJyt: $titl_arr = explode("\73", $order["\x74\x69\x74\x6c\145"]); goto vjRFY; pxGyR: $order["\x74\x69\x74\154\x65"] = trim($order["\x74\x69\x74\154\145"], "\x3b"); goto BOJyt; qEf7f: $price = $order["\x70\x72\x69\143\x65"]; goto AKCmF; AKCmF: $remark = $integral; goto aJ0WP; FYiZO: $fans = pdo_get($this->table_fans, array("\165\x69\144" => $order["\x75\151\144"]), array("\x6f\x70\x65\156\151\144")); goto L6jnK; XvTOc: if ($type == 4) { goto m38g1; } goto dgYt9; uLMn8: $remark = $order["\151\x73\137\166\x69\x72\164\x75\x61\154"] ? "\xe7\202\xb9\xe5\207\273\346\x9f\xa5\xe7\234\x8b\350\256\xa2\xe5\x8d\x95\xe5\215\241\xe5\xaf\206\xe4\277\xa1\346\201\257" : "\347\x82\271\xe5\x87\273\346\x9f\245\347\234\x8b\xe8\256\242\xe5\215\225\350\xaf\xa6\xe6\203\x85"; goto ccbhG; ZwrP1: $orderContent = "\xe8\264\xad\344\271\xb0\x5b{$order["\154\x65\x76\x65\x6c\x5f\x6e\x61\x6d\x65"]}\135\346\x9c\x8d\xe5\212\xa1\55{$order["\166\151\x70\x74\151\155\x65"]}\345\244\xa9"; goto ps9Vn; ct9sd: $orderContent = "\xe3\200\212{$order["\142\157\157\153\x6e\x61\x6d\x65"]}\xe3\x80\x8b"; goto qEf7f; Usm8B: $remark = "\xe6\x9c\211\xe6\x95\210\xe6\x9c\x9f\350\x87\xb3\xef\xbc\x9a" . date("\x59\345\xb9\xb4\155\xe6\234\x88\144\xe6\227\xa5", $validity) . "\12" . $integral; goto mkrIX; p2qWX: i4ixh: goto IAO2C; hSe0_: $first = $buysucc_format["\x66\x69\162\x73\164\x32"] ? $buysucc_format["\x66\x69\x72\163\x74\62"] : "\xe6\202\xa8\345\xb7\xb2\350\264\xad\344\271\260\346\210\x90\xe5\212\x9f\xe3\x80\x82"; goto ct9sd; HCSG0: $buysucc_format = json_decode($tplmessage["\142\165\171\163\x75\143\x63\137\146\x6f\162\155\x61\164"], true); goto m6yHZ; cGr3G: fvLzb: goto jEqTI; mK9fL: $orderContent = "\xe8\xb4\255\xe4\xb9\260\x5b{$order["\164\145\x61\143\x68\145\x72\137\156\x61\155\x65"]}\x5d\350\256\262\345\270\210\xe6\x9c\x8d\xe5\212\241\x2d{$order["\x6f\x72\144\x65\162\164\x69\155\145"]}\345\244\xa9"; goto C4qIy; CgFsL: $integral = "\xe8\265\240\xe9\200\x81\347\247\257\xe5\210\206\xef\274\232{$order["\151\156\x74\145\x67\x72\x61\154"]}\40\xe7\xa7\xaf\xe5\x88\206"; goto p2qWX; ONEyk: VrzmV: goto NEv7Y; LJ7fg: Itl2Z: goto FYiZO; jEqTI: goto Itl2Z; goto WjmK8; J5EsL: $remark .= "\12" . $buysucc_format["\x72\x65\155\x61\162\153\x33"]; goto cGr3G; m6yHZ: if (!$order["\151\x6e\164\145\147\162\141\154"]) { goto i4ixh; } goto CgFsL; C4qIy: $price = $order["\x70\x72\x69\x63\145"]; goto D5pSP; vjRFY: $orderContent = count($titl_arr) == 1 ? $order["\164\151\164\x6c\145"] : $order["\164\151\164\x6c\x65"] . "\40\xe7\255\211" . count($titl_arr) . "\xe4\xbb\266\345\225\x86\xe5\223\x81"; goto b4cLQ; mkrIX: if (empty($buysucc_format["\x72\x65\155\141\x72\x6b\61"])) { goto Ug5lj; } goto lcSFq; L6jnK: $sendmessage = array("\x74\x6f\165\x73\145\162" => $fans["\157\x70\145\x6e\151\144"], "\x74\145\155\x70\154\141\x74\145\137\x69\x64" => $tplmessage["\x62\x75\x79\x73\x75\143\143"], "\165\x72\x6c" => $url, "\164\x6f\x70\143\x6f\154\x6f\162" => '', "\144\x61\x74\141" => array("\146\x69\x72\163\164" => array("\166\x61\x6c\x75\145" => $first, "\x63\157\x6c\x6f\162" => ''), "\153\145\171\167\x6f\162\144\x31" => array("\166\x61\154\x75\145" => $orderContent, "\143\x6f\x6c\x6f\162" => ''), "\153\x65\x79\167\157\162\144\x32" => array("\x76\141\154\x75\x65" => $price . "\x20\xe5\x85\x83", "\143\157\x6c\157\x72" => ''), "\x6b\x65\171\x77\x6f\x72\144\x33" => array("\x76\141\x6c\x75\x65" => date("\x59\345\271\xb4\x6d\346\x9c\x88\144\346\227\245", time()), "\x63\157\154\157\x72" => ''), "\x72\x65\x6d\141\162\x6b" => array("\166\141\x6c\x75\x65" => $remark, "\x63\157\x6c\157\x72" => ''))); goto wrNDw; apDQe: peNfJ: goto ZSBVO; WN0P9: Ug5lj: goto P041Z; Z7NoY: EBo0t: goto SLZ3H; BtuoK: $url = $_W["\163\x69\164\145\x72\157\157\x74"] . "\x61\160\160\x2f\x69\156\144\x65\170\56\160\150\160\x3f\x69\x3d{$uniacid}\46\143\x3d\x65\156\164\162\171\x26\x6f\160\x3d\144\x65\x74\141\x69\x6c\163\x26\x64\157\x3d\x73\x68\157\160\157\162\144\145\x72\46\155\x3d\146\171\137\154\145\163\x73\157\156\x76\x32\137\160\x6c\x75\147\151\x6e\x5f\163\150\157\x70\x26\157\x72\x64\145\x72\151\x64\x3d{$order["\151\x64"]}"; goto amxea; lcSFq: $remark .= "\xa" . $buysucc_format["\162\145\155\141\162\153\x31"]; goto WN0P9; b4cLQ: $price = $order["\x74\157\164\141\154\x5f\141\x6d\157\x75\x6e\x74"]; goto uLMn8; wrNDw: $this->send_template_message($sendmessage, $uniacid); goto PBChA; ggja7: if (empty($buysucc_format["\x72\x65\x6d\141\162\153\x31"])) { goto fvLzb; } goto J5EsL; aJ0WP: if (empty($buysucc_format["\x72\x65\155\141\x72\x6b\x32"])) { goto EBo0t; } goto BdIO9; ZSBVO: $url = $_W["\x73\151\x74\145\x72\x6f\157\x74"] . "\x61\160\x70\57\x69\156\144\x65\x78\56\160\150\x70\77\151\75{$uniacid}\46\143\x3d\x65\x6e\164\x72\x79\x26\x64\x6f\75\x6d\x79\x74\145\141\x63\150\x65\x72\46\x6d\75\146\x79\137\x6c\x65\x73\163\157\156\166\x32"; goto QsSSt; PBChA: } public function sendOrderMessageToAdmin($setting, $order, $type) { goto d3_iF; djm0o: cache_write("\146\x79\137\154\145\163\163\157\x6e\x5f" . $order["\x75\156\151\x61\143\151\x64"] . "\137\x73\150\157\x70\x5f\x73\145\x74\x74\151\156\x67", $shop_setting); goto ZrqwL; xCP6C: QwiJQ: goto TS1Y4; UsGET: kAzO0: goto r91Bl; uBdqa: $manage = explode("\54", $setting["\x6d\141\156\x61\x67\x65\x6f\160\145\156\x69\x64"]); goto cTlfp; WPRKA: $amount = "\xef\277\xa5" . $order["\164\x6f\x74\141\154\137\x61\x6d\x6f\165\x6e\164"]; goto Fl1hs; yB_r_: $first = $neworder_format["\154\x65\x73\163\157\x6e\137\146\151\162\x73\x74"] ? $neworder_format["\154\145\163\163\157\156\137\146\151\x72\163\x74"] : "\346\x82\xa8\346\234\x89\344\xb8\x80\xe6\x9d\241\346\226\260\347\232\x84\350\257\276\347\250\213\350\xae\xa2\345\215\225\346\xb6\210\xe6\201\xaf"; goto Ytl0n; Imz3v: $orderContent = "\345\225\206\345\223\201\344\xbf\241\xe6\x81\xaf\357\274\x9a{$order["\x74\x69\x74\154\145"]}\12"; goto I1INN; corNe: $neworder_format = json_decode($tplmessage["\x6e\x65\x77\157\x72\x64\145\162\x5f\x66\157\162\155\141\x74"], true); goto HLr0D; nR_dt: goto ZdXzl; goto IbxRK; ISlj_: vkEW0: goto yB_r_; QKIk3: $amount = "\xef\277\xa5" . $order["\160\162\151\x63\145"]; goto w44VB; m7Ged: $amount = "\357\xbf\xa5" . $order["\160\x72\151\x63\145"]; goto Oh4Sm; lHaUk: if (!$order["\151\x6e\164\x65\147\x72\x61\154"]) { goto kAzO0; } goto gfysK; r91Bl: $remark = "\xe8\xaf\246\346\x83\205\xe8\xaf\267\347\x99\xbb\345\275\x95\xe7\xbd\221\347\xab\x99\345\220\216\345\217\xb0\xe6\237\245\347\x9c\x8b\xe3\x80\202"; goto KCCJe; wxOPl: $amount = "\357\277\xa5" . $order["\x76\x69\160\x6d\x6f\x6e\145\171"]; goto GRDyu; PDKb4: if ($type == 2) { goto vkEW0; } goto jzWxM; w44VB: $paytype = $order["\x63\x6f\165\x70\157\x6e\137\x61\x6d\x6f\x75\156\x74"] ? "\50\344\274\230\346\x83\xa0\xe5\x88\xb8\xe5\xb7\262\xe6\212\xb5\346\211\243" . $order["\143\157\x75\x70\157\x6e\137\x61\155\x6f\x75\156\x74"] . "\xe5\x85\203\51" : ''; goto XDhPd; P8f0t: X_yBe: goto EgyjU; XDhPd: $remark = $neworder_format["\154\145\x73\163\x6f\156\x5f\x72\145\155\x61\162\x6b"] ? $neworder_format["\154\x65\163\163\157\156\x5f\x72\x65\155\x61\x72\x6b"] : "\350\257\246\xe6\203\x85\350\xaf\267\xe7\231\273\xe5\xbd\x95\xe7\xbd\x91\347\253\x99\xe5\220\x8e\xe5\x8f\xb0\346\237\xa5\347\x9c\213\xe3\x80\202"; goto HvJqH; Drrbc: goto ZdXzl; goto ISlj_; Oh4Sm: $remark = $neworder_format["\142\x75\171\x74\x65\141\143\x68\145\x72\x5f\162\x65\x6d\141\x72\x6b"] ? $neworder_format["\142\x75\x79\164\145\141\143\x68\x65\x72\137\x72\x65\155\x61\x72\153"] : "\350\xaf\246\346\x83\x85\xe8\257\267\xe7\x99\xbb\xe5\xbd\x95\347\275\x91\347\xab\x99\xe5\x90\x8e\xe5\x8f\xb0\xe6\237\xa5\xe7\x9c\213\xe3\x80\x82"; goto nR_dt; udTAr: hTrR_: goto Cwi_A; TS1Y4: $first = $neworder_format["\x62\165\171\x74\145\x61\x63\x68\x65\x72\x5f\x66\151\x72\163\164"] ? $neworder_format["\x62\x75\x79\164\x65\141\143\150\x65\x72\137\x66\151\162\163\164"] : "\xe6\x82\250\346\234\x89\344\xb8\x80\xe6\235\xa1\xe6\226\260\xe7\x9a\204\xe8\xb4\255\xe4\xb9\xb0\350\xae\262\345\270\210\xe8\xae\xa2\345\215\225\xe6\266\210\346\201\xaf"; goto uU5nj; uU5nj: $orderContent = "\xe8\264\255\344\xb9\260\x5b{$order["\x74\145\x61\x63\150\145\162\x5f\156\x61\155\145"]}\135\350\256\262\345\270\x88\346\234\x8d\345\x8a\xa1\x2d{$order["\x6f\x72\x64\x65\x72\164\x69\155\x65"]}\345\244\xa9\xa"; goto m7Ged; d3_iF: $tplmessage = pdo_fetch("\x53\105\x4c\105\103\124\x20\156\x65\x77\157\162\x64\145\162\54\x20\x6e\x65\x77\x6f\162\x64\145\162\137\x66\157\x72\155\141\164\40\106\x52\117\x4d\x20" . tablename($this->table_tplmessage) . "\40\x57\110\x45\x52\105\40\165\x6e\x69\141\143\151\144\75\x3a\165\x6e\151\x61\x63\151\144", array("\x3a\165\156\151\141\143\x69\x64" => $order["\165\156\x69\141\x63\151\144"])); goto corNe; KDPw6: $first = "\346\202\250\346\234\x89\344\xb8\200\346\235\241\xe5\225\206\345\x9f\216\xe6\x96\xb0\xe8\xae\xa2\345\x8d\225\346\266\x88\xe6\x81\257"; goto Imz3v; KCCJe: $shop_setting = cache_load("\146\171\137\154\145\163\x73\x6f\x6e\x5f" . $order["\x75\156\151\141\143\151\x64"] . "\x5f\163\x68\x6f\160\x5f\163\145\164\x74\x69\156\x67"); goto ACo2Z; HLr0D: if ($type == 1) { goto hTrR_; } goto PDKb4; GRDyu: $remark = $neworder_format["\x76\x69\x70\x5f\162\x65\155\141\162\x6b"] ? $neworder_format["\166\151\x70\137\162\x65\155\x61\162\x6b"] : "\xe8\257\246\346\203\x85\350\257\267\347\231\273\xe5\xbd\x95\347\275\221\347\xab\231\xe5\x90\x8e\xe5\x8f\xb0\346\237\245\347\234\x8b\343\200\x82"; goto Drrbc; Cwi_A: $first = $neworder_format["\166\151\x70\x5f\146\151\x72\x73\164"] ? $neworder_format["\166\151\160\137\146\x69\162\x73\164"] : "\xe6\202\250\346\x9c\x89\344\270\x80\346\235\241\346\226\260\xe7\232\x84\126\x49\120\xe8\xae\xa2\345\x8d\x95\xe6\xb6\x88\346\201\257"; goto F0EfL; HyAj4: goto ZdXzl; goto udTAr; jzWxM: if ($type == 3) { goto QwiJQ; } goto cwuei; HvJqH: goto ZdXzl; goto xCP6C; UIJTj: $amount = $amount ? $amount . "\xef\274\214" . $integral : $integral; goto UsGET; cTlfp: foreach ($manage as $manageopenid) { goto KrejV; KrejV: $sendneworder = array("\x74\x6f\x75\x73\145\x72" => $manageopenid, "\x74\x65\x6d\160\154\141\164\x65\x5f\x69\144" => $tplmessage["\156\145\x77\157\162\144\145\x72"], "\165\162\x6c" => '', "\164\157\x70\143\x6f\x6c\x6f\162" => "\43\67\102\66\70\105\x45", "\144\141\x74\141" => array("\x66\151\x72\163\x74" => array("\166\141\x6c\x75\x65" => $first, "\x63\x6f\x6c\157\x72" => ''), "\153\145\171\x77\x6f\x72\x64\x31" => array("\x76\141\x6c\x75\x65" => $order["\157\162\x64\x65\x72\x73\x6e"], "\143\x6f\154\157\162" => ''), "\153\x65\x79\x77\157\162\x64\62" => array("\166\x61\154\x75\x65" => "{$amount}{$paytype}", "\x63\157\x6c\157\162" => ''), "\153\x65\x79\167\157\162\x64\x33" => array("\166\141\x6c\x75\x65" => date("\x59\xe5\xb9\xb4\x6d\346\234\x88\x64\346\227\xa5\40\110\72\151", $order["\141\x64\x64\x74\151\x6d\x65"]), "\143\157\154\157\x72" => ''), "\x72\x65\x6d\x61\162\x6b" => array("\166\141\x6c\165\145" => $orderContent . $remark, "\x63\x6f\x6c\157\162" => ''))); goto QMkDI; QMkDI: $this->send_template_message($sendneworder, $order["\165\x6e\x69\x61\x63\151\144"]); goto tArgh; tArgh: UTkUy: goto B7lIP; B7lIP: } goto P8f0t; F0EfL: $orderContent = "\350\264\255\xe4\xb9\xb0\133{$order["\x6c\145\x76\145\154\137\156\x61\155\x65"]}\x5d\xe6\234\x8d\345\212\xa1\55{$order["\x76\151\x70\x74\x69\155\145"]}\345\xa4\xa9\12"; goto wxOPl; ZrqwL: CLV_d: goto lhBBz; gfysK: $integral = $order["\151\156\x74\x65\x67\162\x61\154"] . "\347\247\257\345\210\x86"; goto UIJTj; I1INN: if (!($order["\x74\157\x74\x61\154\x5f\141\155\x6f\x75\156\x74"] > 0)) { goto S6eJW; } goto WPRKA; IbxRK: jM863: goto KDPw6; lhBBz: $setting["\155\x61\x6e\x61\x67\x65\157\x70\145\156\151\144"] = $shop_setting["\155\x61\156\x61\x67\x65\x6f\160\145\x6e\151\144"]; goto CR3Fb; slaRE: $shop_setting = pdo_get($this->table_shop_setting, array("\165\x6e\151\x61\x63\151\144" => $order["\165\156\151\141\143\x69\144"])); goto djm0o; ACo2Z: if (!empty($shop_setting)) { goto CLV_d; } goto slaRE; cwuei: if ($type == 4) { goto jM863; } goto HyAj4; Fl1hs: S6eJW: goto lHaUk; CR3Fb: ZdXzl: goto uBdqa; Ytl0n: $orderContent = "\xe8\257\xbe\347\xa8\x8b\357\xbc\x9a\xe3\200\x8a{$order["\x62\157\x6f\x6b\156\141\x6d\145"]}\343\200\213\12"; goto QKIk3; EgyjU: } public function updateMemberVip($uid, $vip) { return pdo_update($this->table_member, array("\x76\151\160" => $vip), array("\x75\x69\144" => $uid)); } public function handleUserIntegral($type, $ordersn, $uid, $integral) { goto DYnBY; c62II: aG2FS: goto NjxL7; DYnBY: $modules = pdo_get("\155\x6f\144\165\154\145\163", array("\x6e\x61\155\x65" => "\x66\171\137\x6c\145\x73\x73\157\156\166\x32"), array("\164\x69\164\154\x65")); goto Eg1VW; NjxL7: $typeName = $modules_title . "\350\xb4\255\xe4\271\xb0\350\xae\262\345\xb8\x88\xe8\256\242\xe5\215\225"; goto e0Sis; wVBlq: if ($type == 2) { goto KABZR; } goto vH9fg; GU8HX: $typeName = $modules_title . "\x56\111\120\xe8\256\xa2\xe5\x8d\225"; goto xjGHR; xjGHR: goto AXvsB; goto H4qip; D9cJX: goto AXvsB; goto HXkXT; Eg1VW: $modules_title = $modules["\x74\151\164\x6c\x65"] ? $modules["\x74\x69\164\x6c\145"] : "\345\276\xae\xe8\xaf\xbe\345\240\202"; goto u5Cda; H4qip: KABZR: goto mRNhD; HXkXT: TeKHU: goto GU8HX; e0Sis: AXvsB: goto di73x; bHsCe: goto AXvsB; goto c62II; u5Cda: if ($type == 1) { goto TeKHU; } goto wVBlq; vH9fg: if ($type == 3) { goto aG2FS; } goto D9cJX; NKlds: $log = array("\x30" => '', "\x31" => $typeName . "\xef\274\x9a{$ordersn}", "\62" => "\146\171\x5f\x6c\145\163\x73\157\x6e\166\62", "\63" => '', "\64" => '', "\x35" => ''); goto aYxf7; di73x: load()->model("\x6d\143"); goto NKlds; aYxf7: mc_credit_update($uid, "\x63\x72\x65\144\x69\164\61", $integral, $log); goto OWGBl; mRNhD: $typeName = $modules_title . "\350\xaf\xbe\xe7\250\x8b\350\xae\xa2\xe5\x8d\225"; goto bHsCe; OWGBl: } public function updateLessonNumber($lessonid) { pdo_update($this->table_lesson_parent, array("\142\165\171\156\165\x6d\40\x2b\75" => 1), array("\151\144" => $lessonid)); } public function sendCommissionToTeacher($uniacid, $order, $setting, $type) { goto LeWBu; ZoEMo: Cbmkl: goto GFgtO; M1uIt: if (!($nopay_lesson <= 0)) { goto Cbmkl; } goto tqCAK; wKrey: hlfNO: goto FTvNX; Psfzg: hjRL6: goto emJX8; n9mhw: $bookname = $order["\142\157\157\153\x6e\x61\155\x65"]; goto GT1fS; AnzZs: $this->commissionMessage($sendteacher, $uniacid); goto EbxC5; FNRUm: $teachermember = pdo_fetch("\x53\105\x4c\x45\x43\124\x20\151\x64\x2c\x75\x69\144\54\156\157\160\x61\x79\x5f\154\x65\163\x73\157\x6e\x20\x46\x52\x4f\x4d\x20" . tablename($this->table_member) . "\40\127\x48\105\122\105\x20\165\x69\x64\x3d\x3a\x75\x69\x64", array("\x3a\165\151\x64" => $teacher["\165\x69\144"])); goto WQWQi; Hom3S: $teacher = pdo_fetch("\123\x45\114\x45\x43\124\40\141\x2e\x75\151\x64\x2c\x61\56\x74\x65\x61\143\x68\x65\x72\54\x62\x2e\157\x70\145\x6e\x69\144\40\x46\122\117\115\x20" . tablename($this->table_teacher) . "\40\x61\40\114\105\106\124\x20\x4a\x4f\x49\116\x20" . tablename($this->table_fans) . "\40\142\40\x4f\116\40\141\56\x75\x69\144\x3d\142\x2e\165\151\x64\40\127\x48\105\122\105\x20\141\56\x69\x64\75\x3a\x69\x64", array("\72\x69\144" => $order["\x74\x65\x61\x63\x68\145\x72\151\144"])); goto rgfxD; cRi4_: $sendteacher = array("\157\x70\145\x6e\151\144" => $teacher["\x6f\160\x65\156\151\144"], "\143\x6e\x6f\x74\x69\x63\145" => $tplmessage["\143\x6e\157\164\x69\x63\x65"], "\x75\x72\x6c" => $_W["\x73\151\164\145\162\x6f\157\164"] . "\x61\x70\x70\57\151\156\x64\x65\170\x2e\x70\150\160\x3f\x69\x3d{$uniacid}\46\143\x3d\x65\156\164\x72\x79\x26\144\157\x3d\151\156\x63\x6f\x6d\x65\46\155\x3d\x66\x79\x5f\154\x65\163\x73\x6f\x6e\166\x32", "\146\x69\162\163\x74" => $tpl_first, "\153\x65\171\x77\x6f\162\x64\x31" => $nopay_lesson . "\345\205\x83", "\x6b\145\171\x77\157\162\144\62" => $order["\x70\x72\151\x63\x65"] . "\xe5\205\203", "\x6b\x65\x79\x77\x6f\x72\x64\63" => date("\x59\xe5\xb9\xb4\155\346\234\x88\x64\xe6\227\245\x20\x48\x3a\x69", time()), "\x72\145\155\141\x72\x6b" => $tpl_remark); goto AnzZs; kgym6: if (!($type != 4)) { goto p3Zx1; } goto cRi4_; Oxwby: SQmL6: goto OJat1; tqCAK: return; goto ZoEMo; OJat1: $bookname = "\346\x89\x93\xe8\xb5\217\133{$order["\142\157\x6f\x6b\x6e\x61\x6d\x65"]}\x5d\350\xaf\276\xe7\xa8\x8b"; goto m8kYy; afOda: $cnotice_format = json_decode($tplmessage["\x63\x6e\157\x74\151\x63\145\x5f\146\x6f\162\x6d\x61\x74"], true); goto VyCiU; LeWBu: global $_W; goto Hom3S; unPnn: $tplmessage = pdo_get($this->table_tplmessage, array("\x75\x6e\151\141\x63\151\x64" => $uniacid), array("\x63\156\x6f\x74\151\143\x65", "\x63\x6e\157\164\151\x63\x65\x5f\146\x6f\162\155\x61\x74")); goto afOda; G4s9U: $tpl_remark = $cnotice_format["\164\145\x61\143\x68\145\162\137\x72\145\x6d\x61\x72\x6b"] ? $cnotice_format["\x74\145\141\x63\150\145\162\137\x72\145\x6d\x61\162\x6b"] : "\xe8\xaf\246\346\x83\x85\350\xaf\xb7\350\xbf\x9b\xe5\x85\245\350\256\xb2\xe5\xb8\210\xe4\xb8\xad\345\277\203\346\237\xa5\347\x9c\x8b\350\xaf\xbe\xe7\250\x8b\346\224\xb6\345\x85\245\xe3\x80\x82"; goto TBSfN; D1ZeV: $tpl_remark = $cnotice_format["\x62\x75\x79\x74\x65\141\x63\x68\145\x72\137\x72\x65\155\141\162\x6b"] ? $cnotice_format["\x62\x75\x79\164\x65\x61\143\x68\145\162\x5f\x72\145\155\141\x72\x6b"] : "\xe8\xaf\246\xe6\x83\x85\xe8\257\267\xe8\277\233\xe5\205\xa5\xe8\xae\262\345\270\210\xe4\270\255\xe5\xbf\x83\xe6\x9f\245\xe7\234\213\343\x80\x82"; goto kI4ye; VyCiU: if ($type == 2) { goto JbN1Q; } goto TYT5f; XOmOI: pdo_insert($this->table_teacher_income, $incomedata); goto kgym6; GT1fS: $tpl_first = $cnotice_format["\164\145\141\143\150\145\162\x5f\x66\151\162\163\x74"] ? $cnotice_format["\x74\145\x61\x63\150\x65\x72\137\x66\151\x72\163\164"] : "\346\x82\xa8\xe7\x9a\x84\350\257\276\347\250\213\xe3\x80\212{$order["\142\x6f\157\153\x6e\x61\155\x65"]}\xe3\x80\x8b\xe6\210\x90\345\212\x9f\345\x87\272\345\224\xae\357\274\214\346\x82\250\350\x8e\267\xe5\xbe\227\344\xba\206\xe4\xb8\200\347\xac\x94\xe6\x96\260\347\232\x84\350\257\xbe\xe7\xa8\x8b\344\275\243\xe9\x87\x91\xe3\200\x82"; goto G4s9U; WQWQi: $nopay_lesson = round($order["\160\162\151\x63\145"] * $order["\164\x65\x61\143\150\145\x72\137\151\156\143\x6f\x6d\145"] * 0.01, 2); goto M1uIt; QE9ry: if ($type == 4) { goto SQmL6; } goto sS3BF; kI4ye: goto Zw2UC; goto Oxwby; sS3BF: goto Zw2UC; goto cKXra; i4bSv: $incomedata = array("\x75\156\151\141\143\x69\144" => $uniacid, "\x75\x69\x64" => $teacher["\165\151\144"], "\x74\145\141\x63\x68\x65\x72" => $teacher["\x74\145\x61\143\x68\x65\162"], "\157\x72\144\145\162\163\156" => $order["\157\x72\x64\145\162\x73\156"], "\157\162\x64\145\x72\164\171\160\145" => $type, "\142\x6f\x6f\153\156\141\155\x65" => $bookname, "\x6f\162\144\145\162\160\162\x69\x63\145" => $order["\x70\162\x69\x63\145"], "\x74\x65\x61\x63\150\145\x72\x5f\x69\x6e\143\x6f\x6d\x65" => $order["\164\145\141\143\x68\145\x72\x5f\151\156\143\x6f\x6d\145"], "\151\156\143\x6f\x6d\145\137\141\155\x6f\x75\156\164" => $nopay_lesson, "\141\x64\x64\164\151\155\x65" => time()); goto XOmOI; GFgtO: pdo_update($this->table_member, array("\156\x6f\x70\x61\x79\x5f\x6c\145\x73\163\157\156" => $teachermember["\156\157\160\x61\171\137\x6c\145\163\x73\x6f\156"] + $nopay_lesson), array("\x75\x69\x64" => $teacher["\x75\x69\x64"])); goto unPnn; rgfxD: if (!($teacher["\x75\x69\x64"] > 0)) { goto hjRL6; } goto FNRUm; TYT5f: if ($type == 3) { goto hlfNO; } goto QE9ry; cKXra: JbN1Q: goto n9mhw; FTvNX: $bookname = "\345\207\xba\345\x94\256\xe8\256\xb2\xe5\270\210\xe6\234\x8d\345\212\xa1\x2d{$order["\x6f\x72\144\x65\x72\164\x69\155\x65"]}\xe5\244\xa9"; goto jSIji; TBSfN: goto Zw2UC; goto wKrey; jSIji: $tpl_first = $cnotice_format["\142\165\171\x74\145\141\x63\150\145\x72\137\146\151\162\163\x74"] ? $cnotice_format["\x62\165\171\x74\145\x61\x63\x68\x65\162\137\x66\151\x72\x73\164"] : "\346\202\250\347\232\x84\350\256\262\345\270\x88\xe6\234\x8d\xe5\x8a\xa1\xe6\x88\x90\xe5\x8a\237\345\x87\xba\345\224\xae\xef\xbc\214\xe6\x82\xa8\350\x8e\xb7\xe5\276\227\344\xba\206\xe4\xb8\x80\347\xac\x94\346\226\260\347\x9a\204\344\275\243\351\207\x91\343\x80\202"; goto D1ZeV; m8kYy: Zw2UC: goto i4bSv; EbxC5: p3Zx1: goto Psfzg; emJX8: } public function sendCommissionToCompany($uniacid, $order, $setting) { goto qlYnn; y6EYn: $nopay_commission = round($order["\160\x72\x69\x63\x65"] * $order["\x63\x6f\x6d\x70\x61\156\171\137\151\156\143\x6f\x6d\145"] * 0.01, 2); goto m3Y0Z; sS8n6: $member = pdo_fetch("\123\x45\x4c\x45\x43\x54\x20\x69\x64\x2c\x75\151\144\54\156\157\x70\141\171\x5f\143\157\x6d\x6d\151\163\x73\151\157\156\40\x46\122\x4f\x4d\40" . tablename($this->table_member) . "\x20\x57\110\x45\122\x45\x20\165\151\144\x3d\72\165\151\x64", array("\72\x75\x69\144" => $order["\x63\x6f\x6d\160\x61\x6e\171\x5f\x75\151\144"])); goto y6EYn; iYEHV: $this->commissionMessage($sendteacher, $uniacid); goto B1sCs; qlYnn: global $_W; goto YIqzp; WP9Jt: pdo_insert($this->table_commission_log, $incomedata); goto cw5V4; a5OpX: $incomedata = array("\x75\156\x69\x61\x63\x69\144" => $uniacid, "\x6f\x72\x64\x65\162\151\x64" => $order["\151\144"], "\165\151\144" => $order["\x63\157\155\x70\141\x6e\x79\137\x75\151\144"], "\x6e\151\x63\153\156\141\155\x65" => $order["\157\162\144\145\162\163\156"], "\x62\157\157\x6b\x6e\141\x6d\x65" => $order["\x62\x6f\x6f\153\x6e\x61\x6d\145"], "\143\150\141\x6e\147\x65\x5f\x6e\x75\155" => $nopay_commission, "\147\162\141\x64\x65" => 0, "\x72\x65\155\x61\x72\153" => "\xe4\270\213\xe7\xba\247\350\256\262\345\270\x88\xe8\257\xbe\xe7\250\x8b\343\200\212{$order["\142\x6f\x6f\x6b\156\x61\155\145"]}\xe3\x80\x8b\346\x88\220\xe5\212\x9f\345\x87\xba\xe5\x94\256\357\xbc\214\350\256\242\345\x8d\x95\347\274\226\xe5\x8f\xb7\357\274\232" . $order["\x6f\x72\144\x65\162\163\156"], "\143\x6f\x6d\x70\x61\x6e\171\x5f\151\x6e\143\x6f\155\x65" => 1, "\x61\x64\144\x74\x69\x6d\x65" => time()); goto WP9Jt; YIqzp: $fans = pdo_get($this->table_fans, array("\165\151\x64" => $order["\x63\157\x6d\160\141\x6e\x79\137\x75\151\x64"]), array("\157\160\x65\156\151\144", "\156\x69\143\x6b\156\x61\155\x65")); goto sS8n6; cw5V4: $tplmessage = pdo_get($this->table_tplmessage, array("\x75\x6e\x69\141\x63\x69\144" => $uniacid), array("\x63\156\x6f\164\151\x63\145")); goto Bo3Bx; m3Y0Z: pdo_update($this->table_member, array("\x6e\157\x70\x61\171\137\143\157\155\155\x69\x73\x73\x69\x6f\x6e" => $member["\156\157\160\x61\171\137\x63\157\x6d\155\x69\x73\x73\x69\x6f\156"] + $nopay_commission), array("\165\151\x64" => $order["\143\x6f\x6d\x70\x61\156\171\x5f\x75\151\x64"])); goto a5OpX; Bo3Bx: $sendteacher = array("\157\x70\145\156\151\x64" => $fans["\157\160\x65\x6e\x69\x64"], "\143\x6e\x6f\x74\151\x63\145" => $tplmessage["\143\x6e\157\x74\151\143\145"], "\x75\162\x6c" => $_W["\x73\x69\164\x65\162\157\x6f\x74"] . "\x61\x70\160\57\151\156\x64\145\x78\56\x70\x68\x70\77\151\x3d{$uniacid}\46\143\75\145\156\164\162\171\46\x6f\160\x3d\143\x6f\x6d\155\x69\x73\163\151\157\x6e\154\157\147\x26\144\x6f\x3d\143\157\155\155\151\163\163\151\157\x6e\x26\x6d\x3d\146\x79\137\154\145\x73\163\157\156\x76\62", "\x66\x69\x72\x73\x74" => "\xe6\x82\xa8\xe7\x9a\x84\344\xb8\x8b\xe7\xba\247\xe8\256\xb2\xe5\270\x88\xe8\257\276\347\250\213\343\x80\212{$order["\x62\157\157\153\x6e\x61\x6d\x65"]}\343\200\x8b\346\210\220\345\x8a\x9f\345\x87\xba\xe5\x94\256\xef\xbc\214\346\202\250\xe8\216\xb7\345\xbe\227\344\xba\206\xe4\270\x80\xe7\xac\x94\xe6\226\260\347\232\204\344\275\xa3\xe9\x87\221\343\200\x82", "\153\145\x79\167\157\x72\144\61" => $nopay_commission . "\xe5\205\x83", "\153\145\x79\x77\157\x72\x64\x32" => $order["\160\162\151\x63\145"] . "\xe5\x85\203", "\x6b\145\171\x77\157\162\144\63" => date("\x59\55\155\x2d\144\x20\110\x3a\151", time()), "\x72\145\155\141\x72\153" => "\350\xaf\xa6\xe6\x83\x85\xe8\xaf\267\xe8\xbf\233\345\205\xa5\xe4\275\243\xe9\x87\221\xe6\230\216\347\xbb\x86\346\x9f\xa5\347\234\213\343\x80\202"); goto iYEHV; B1sCs: } public function sendCouponByBuyLesson($member, $setting) { goto Bud2G; JTtCX: $buyTotal = pdo_fetchcolumn("\x53\105\x4c\x45\103\x54\x20\x43\117\x55\116\x54\50\52\51\40\106\122\117\x4d\x20" . tablename($this->table_member_coupon) . "\x20\x57\x48\105\x52\105\x20\165\151\x64\75\72\x75\151\144\x20\x41\116\104\x20\x73\157\x75\162\143\x65\x3d\72\163\x6f\165\162\143\x65", array("\72\165\x69\144" => $member["\x75\151\x64"], "\x73\x6f\165\x72\x63\145" => 2)); goto mmmnn; embGn: QkvQX: goto lOxXf; mmmnn: if (!($buyTotal >= $market["\x62\x75\171\137\154\x65\163\163\x6f\x6e\137\x74\x69\155\x65"])) { goto QkvQX; } goto RsFOC; NtF9y: $this->send_template_message($sendmessage, $uniacid); goto MuiYt; Mf9Ok: $custom = array("\x6d\x73\x67\x74\x79\160\x65" => "\164\x65\x78\164", "\164\145\x78\x74" => array("\x63\157\156\x74\145\156\x74" => urlencode("\346\201\255\xe5\226\x9c\xe6\202\250\350\xb4\255\344\271\xb0\xe6\210\220\xe5\212\237\xef\274\x8c\347\263\xbb\347\273\237\xe8\xb5\xa0\346\202\xa8" . $t . "\xe5\xbc\240\xe4\274\230\346\203\240\xe5\210\270\xe5\xb7\xb2\xe5\217\x91\346\224\276\xe5\x88\xb0\346\202\xa8\347\232\x84\345\270\220\xe5\x8f\267\357\xbc\214\xe8\xaf\xb7\346\263\xa8\346\204\x8f\346\x9f\xa5\346\224\266\xe3\200\x82\134\156\x5c\x6e\xe8\xb4\xa6\346\210\xb7\xe5\x90\215\xef\xbc\x9a" . $fans["\156\151\x63\153\156\x61\x6d\145"] . "\x5c\x6e\xe6\225\xb0\xe9\x87\217\357\274\232" . $t . "\xe5\xbc\xa0\x5c\x6e\346\227\xb6\351\x97\xb4\xef\xbc\x9a" . date("\131\345\271\264\x6d\346\234\210\x64\346\x97\245", time()) . "\x5c\156\x5c\x6e" . $receive_coupon_format["\x72\x65\155\141\162\x6b"] . "\x3c\141\40\x68\x72\x65\146\x3d\x5c\x22" . $url . "\x5c\x22\x3e\347\x82\xb9\345\207\273\346\xad\xa4\345\244\x84\345\217\xaf\xe6\x9f\xa5\xe7\x9c\x8b\350\257\246\346\203\x85\74\x2f\x61\x3e")), "\x74\157\x75\163\x65\x72" => $fans["\x6f\160\145\156\151\x64"]); goto L2fXI; b9oZS: UEE9Z: goto v814v; wSNBb: lDVjq: goto tkwHr; lOxXf: UJ4XG: goto zfLEJ; WjBer: $account_api->sendCustomNotice($custom); goto FShkB; qX9YI: foreach ($buyLesson as $item) { goto nIqzx; JuaXL: JsAiD: goto Jz_dR; NkWjR: $lessonCoupon = array("\165\x6e\x69\141\x63\x69\144" => $uniacid, "\x75\151\x64" => $member["\x75\x69\144"], "\x61\155\x6f\x75\x6e\164" => $coupon["\x61\155\x6f\x75\x6e\x74"], "\143\157\156\144\151\164\x69\x6f\156\163" => $coupon["\x63\157\156\x64\x69\x74\x69\157\x6e\163"], "\166\141\154\x69\x64\x69\164\x79" => $coupon["\166\x61\154\151\x64\151\x74\171\137\x74\171\x70\145"] == 1 ? $coupon["\144\x61\x79\163\x31"] : time() + $coupon["\x64\x61\171\163\62"] * 86400, "\165\163\145\137\x74\x79\x70\x65" => $coupon["\165\x73\x65\137\x74\171\x70\145"], "\143\141\164\145\x67\157\x72\x79\x5f\x69\x64" => $coupon["\x63\141\164\x65\147\157\x72\x79\137\151\144"], "\154\145\163\x73\x6f\x6e\x5f\x69\144\x73" => $coupon["\x6c\x65\163\163\x6f\156\137\151\144\163"], "\x73\x74\x61\x74\165\x73" => 0, "\x73\157\165\162\143\145" => 2, "\143\157\165\160\157\156\x5f\x69\144" => $coupon["\151\144"], "\141\x64\x64\164\x69\155\145" => time()); goto LNFgP; nIqzx: $coupon = pdo_fetch("\123\x45\114\105\x43\x54\x20\x2a\x20\106\x52\117\x4d\40" . tablename($this->table_mcoupon) . "\40\x57\110\x45\x52\x45\40\151\144\75\72\151\x64", array("\72\151\x64" => $item)); goto Gt1_y; LNFgP: if (!pdo_insert($this->table_member_coupon, $lessonCoupon)) { goto JsAiD; } goto QaLeQ; Jz_dR: gr2E3: goto KuXLX; Gt1_y: if (!empty($coupon)) { goto XEyd5; } goto GodpC; K_DdJ: $coupon_amount += $coupon["\x61\155\x6f\x75\156\164"]; goto JuaXL; GodpC: goto gr2E3; goto yFzEE; QaLeQ: $t++; goto K_DdJ; yFzEE: XEyd5: goto NkWjR; KuXLX: } goto MlBVB; oVGlc: if ($tplmessage["\x72\x65\143\145\x69\x76\145\x5f\x63\x6f\165\160\157\156"]) { goto lDVjq; } goto Mf9Ok; L2fXI: $account_api = WeAccount::create(); goto WjBer; afSBL: $tplmessage = pdo_fetch("\123\105\114\105\x43\x54\x20\x72\145\143\145\x69\x76\145\x5f\143\x6f\165\160\157\156\54\40\162\x65\143\145\x69\x76\145\x5f\x63\157\x75\160\157\156\x5f\x66\x6f\x72\155\141\164\40\106\x52\117\115\x20" . tablename($this->table_tplmessage) . "\40\127\x48\x45\x52\x45\40\165\156\x69\141\143\x69\144\75\x3a\x75\x6e\x69\141\143\151\x64", array("\72\x75\x6e\x69\x61\x63\151\x64" => $uniacid)); goto DBbYI; h3lO2: if (empty($buyLesson)) { goto UEE9Z; } goto HiFuw; RsFOC: return; goto embGn; UHb6x: if (!$t) { goto pcms1; } goto jGs1N; zfLEJ: $t = $coupon_amount = 0; goto qX9YI; DBbYI: $receive_coupon_format = json_decode($tplmessage["\x72\145\143\145\151\166\x65\x5f\143\157\x75\160\x6f\156\x5f\x66\157\162\x6d\x61\164"], true); goto oVGlc; cFQr4: $url = $_W["\163\x69\x74\x65\x72\x6f\x6f\164"] . "\141\160\160\x2f\151\x6e\144\145\x78\x2e\160\150\x70\77\151\75{$uniacid}\x26\143\x3d\145\156\x74\x72\171\46\144\157\x3d\x63\x6f\x75\160\157\156\46\155\x3d\x66\x79\x5f\x6c\145\x73\163\157\156\x76\x32"; goto h3lO2; Bud2G: global $_W; goto zExau; MlBVB: Diu8S: goto UHb6x; jGs1N: $fans = pdo_fetch("\x53\105\x4c\105\x43\x54\x20\157\x70\145\156\151\144\54\156\151\x63\x6b\156\141\x6d\145\x20\x46\122\117\x4d\40" . tablename($this->table_fans) . "\x20\x57\x48\x45\x52\x45\40\165\151\x64\75\x3a\x75\151\x64", array("\x3a\x75\151\x64" => $member["\x75\x69\144"])); goto afSBL; MuiYt: i_F0M: goto v8Ior; tkwHr: $sendmessage = array("\x74\x6f\x75\163\145\162" => $fans["\157\160\x65\x6e\151\x64"], "\x74\x65\155\x70\154\141\164\x65\137\x69\144" => $tplmessage["\x72\x65\143\x65\x69\x76\x65\137\x63\157\x75\160\x6f\156"], "\x75\162\154" => $url, "\164\x6f\160\143\x6f\x6c\x6f\162" => "\43\x37\102\x36\x38\x45\105", "\x64\x61\x74\141" => array("\146\x69\x72\163\164" => array("\166\x61\154\x75\x65" => "\346\x81\xad\345\x96\234\346\202\250\xe8\264\255\344\xb9\260\346\x88\x90\345\x8a\x9f\357\xbc\x8c\347\xb3\xbb\xe7\xbb\x9f\350\xb5\xa0\346\x82\250{$t}\345\274\240\344\274\x98\xe6\x83\240\xe5\x88\270\345\xb7\xb2\345\x8f\221\xe6\224\xbe\345\x88\xb0\xe6\x82\250\xe7\232\204\xe5\270\220\xe5\217\267\357\274\x8c\xe8\xaf\xb7\xe6\263\250\346\x84\217\xe6\237\245\xe6\224\xb6\343\200\202", "\143\157\154\157\162" => "\x23\x32\63\x39\62\105\101"), "\x6b\x65\x79\x77\x6f\162\x64\x31" => array("\166\x61\x6c\x75\x65" => "\344\xbb\xb7\345\x80\274" . $coupon_amount . "\345\x85\203\347\232\204\344\xbc\230\346\203\240\xe5\x88\270" . $t . "\40\xe5\274\240", "\143\157\x6c\157\x72" => ''), "\153\x65\171\167\x6f\162\144\62" => array("\x76\141\154\x75\x65" => date("\131\xe5\271\xb4\155\346\x9c\x88\144\xe6\227\xa5", time()), "\x63\157\154\x6f\162" => ''), "\162\145\155\141\x72\153" => array("\166\x61\x6c\x75\145" => $receive_coupon_format["\x72\x65\155\x61\162\x6b"] ? $receive_coupon_format["\162\145\155\141\162\153"] : "\347\x82\271\345\x87\xbb\350\xaf\xa6\xe6\x83\205\xe5\x8f\257\xe6\x9f\245\xe7\234\x8b\346\x82\xa8\347\232\x84\345\xb8\220\345\217\xb7\xe4\xbc\230\346\x83\xa0\345\210\270\350\257\xa6\xe6\x83\x85\345\223\xa6\176", "\x63\x6f\x6c\157\162" => ''))); goto NtF9y; zExau: $uniacid = $setting["\x75\156\151\x61\x63\x69\144"]; goto oVZbh; v8Ior: pcms1: goto b9oZS; oVZbh: $market = pdo_fetch("\x53\105\114\105\103\x54\x20\x2a\40\106\122\117\x4d\40" . tablename($this->table_market) . "\40\x57\110\105\x52\105\40\165\156\x69\141\143\151\144\x3d\x3a\165\x6e\151\141\x63\x69\x64", array("\72\x75\156\x69\x61\143\151\144" => $uniacid)); goto tuCNA; tuCNA: $buyLesson = json_decode($market["\x62\165\x79\137\154\145\x73\163\157\x6e"], true); goto cFQr4; FShkB: goto i_F0M; goto wSNBb; HiFuw: if (!($market["\x62\x75\x79\137\x6c\x65\x73\163\157\156\x5f\x74\x69\x6d\x65"] > 0)) { goto UJ4XG; } goto JTtCX; v814v: } public function updateTeacherValidity($uniacid, $lessonmember, $order) { goto nwW4I; QTg8N: $data = array("\x75\156\x69\141\143\x69\x64" => $uniacid, "\165\x69\144" => $order["\165\151\x64"], "\164\145\141\143\x68\145\162\151\144" => $order["\164\145\x61\x63\x68\145\162\x69\144"], "\166\x61\x6c\x69\x64\x69\164\x79" => time() + $order["\x6f\x72\x64\x65\162\164\x69\155\x65"] * 86400, "\x61\144\144\x74\x69\x6d\145" => time(), "\165\160\x64\x61\164\x65\x5f\x74\x69\155\x65" => time()); goto lh1Eg; pPqGP: goto Cyj60; goto DfVDM; AZ65q: if (!empty($buyTeacher)) { goto JtMZx; } goto QTg8N; YeJ_Y: $data = array("\166\141\154\x69\144\151\x74\171" => $buyTeacher["\166\141\154\x69\x64\x69\164\171"] + $order["\157\162\144\x65\x72\164\151\155\145"] * 86400, "\x75\160\x64\141\164\x65\x5f\164\151\x6d\x65" => time()); goto pMKRi; rgkL3: if (time() >= $buyTeacher["\166\x61\x6c\151\x64\x69\164\x79"]) { goto kOIsF; } goto YeJ_Y; CehyF: sd0Kf: goto PMgNu; Ndlh_: $data = array("\166\141\x6c\x69\x64\151\x74\x79" => time() + $order["\x6f\x72\144\x65\x72\x74\151\155\x65"] * 86400, "\165\160\144\141\164\145\137\x74\151\155\x65" => time()); goto CehyF; DfVDM: JtMZx: goto rgkL3; uycMu: kOIsF: goto Ndlh_; pMKRi: goto sd0Kf; goto uycMu; PMgNu: pdo_update($this->table_member_buyteacher, $data, array("\151\x64" => $buyTeacher["\x69\144"])); goto glr7b; c9xGK: return $data["\166\x61\x6c\151\x64\x69\x74\x79"]; goto z7AIB; nwW4I: $buyTeacher = pdo_get($this->table_member_buyteacher, array("\165\151\144" => $order["\165\x69\x64"], "\x74\145\141\143\150\145\x72\x69\144" => $order["\164\x65\x61\x63\x68\145\162\x69\144"])); goto AZ65q; glr7b: Cyj60: goto c9xGK; lh1Eg: pdo_insert($this->table_member_buyteacher, $data); goto pPqGP; z7AIB: } public function recordShopCommission($order, $comsetting) { goto NVn5Q; Kopfu: if (empty($memberVip2)) { goto Z9xVi; } goto KH4rk; gqbw0: Nw6f7: goto qTydy; cCCIN: Zl7LY: goto n3Crb; nDmWY: Z9xVi: goto zqDzd; JWhya: AoZPJ: goto h632o; GHzeQ: goto Nw6f7; goto mHyc9; LbINk: O8jYa: goto D3ELY; qTydy: N7gqx: goto Apubk; qgICo: $this->insertToShopCommission($order, $item); goto LmzIx; Pnlgr: if (!($order["\x6d\x65\155\x62\145\162\x31"] && $order["\143\157\155\155\x69\163\x73\151\x6f\156\x31"] > 0)) { goto mou0_; } goto OvcwP; SkKhJ: if (!($order["\x6d\x65\155\x62\145\x72\x33"] && $order["\x63\157\155\x6d\x69\x73\163\x69\x6f\x6e\x33"] > 0)) { goto TPERx; } goto ZytwO; OVWF0: $item = array("\165\151\144" => $order["\155\x65\x6d\142\145\x72\x32"], "\x63\x6f\155\x6d\x69\x73\163\151\157\156" => $order["\143\157\155\x6d\x69\163\x73\151\157\156\62"], "\x67\x72\x61\x64\145" => 2, "\162\145\155\x61\162\x6b" => "\62\347\272\xa7\xe4\275\243\351\207\221\72\xe8\xae\242\345\x8d\x95\xe5\x8f\xb7" . $order["\x6f\162\x64\145\x72\x73\156"] . "\357\274\x8c\347\x94\250\346\210\xb7\xe4\277\xa1\xe6\x81\257\72\x5b\165\151\144\x3a" . $order["\x75\151\144"] . "\x5d"); goto KgKFp; OzqPQ: UcfaU: goto tHJ1w; p8bzd: if (empty($update_order)) { goto rb9K5; } goto Io7XH; tHJ1w: TJQEL: goto OitI2; cVhLo: if ($comsetting["\x73\141\x6c\x65\137\x72\x61\156\153"] == 2) { goto Zl7LY; } goto PacbT; YL0BZ: goto N7gqx; goto cCCIN; PeviG: $memberVip1 = pdo_fetchall("\123\x45\x4c\105\x43\124\x20\52\40\106\x52\x4f\115\40" . tablename($this->table_member_vip) . "\40\127\110\x45\x52\x45\40\x75\151\x64\75\72\x75\151\144\x20\x41\116\x44\x20\x76\141\154\x69\144\x69\164\x79\x3e\x3a\166\x61\154\x69\x64\151\164\171", array("\72\165\151\144" => $order["\x6d\x65\x6d\142\145\162\x31"], "\x3a\166\x61\154\151\x64\x69\x74\171" => time())); goto nhIIi; D3ELY: WimGM: goto SkKhJ; Uo7C7: if (!($order["\x6d\145\155\x62\x65\162\x32"] && $order["\143\x6f\155\155\x69\x73\163\151\x6f\156\x32"] > 0)) { goto WimGM; } goto OVWF0; ON7oi: $this->insertToShopCommission($order, $item); goto GHzeQ; n3Crb: $memberVip3 = pdo_fetchall("\123\105\x4c\105\x43\124\x20\52\40\x46\x52\117\115\40" . tablename($this->table_member_vip) . "\40\x57\x48\x45\122\x45\x20\165\151\x64\x3d\72\165\x69\144\x20\x41\x4e\x44\x20\166\x61\x6c\151\x64\151\164\x79\x3e\72\166\141\x6c\x69\144\x69\x74\x79", array("\72\165\151\x64" => $order["\155\x65\x6d\142\145\x72\63"], "\72\166\x61\154\151\x64\x69\164\x79" => time())); goto hQfFO; nhIIi: if (empty($memberVip1)) { goto SGQjz; } goto x0NZ1; W6m9y: if ($comsetting["\163\x61\x6c\145\x5f\162\141\x6e\x6b"] == 2) { goto xqE0G; } goto qgICo; aPhfJ: $update_order["\143\157\155\x6d\x69\163\x73\x69\157\156\x33"] = 0; goto gqbw0; OvcwP: $item = array("\x75\x69\144" => $order["\x6d\145\x6d\142\x65\162\61"], "\143\157\155\x6d\151\163\163\x69\157\x6e" => $order["\143\157\155\155\151\163\163\151\157\156\61"], "\x67\162\x61\x64\x65" => 1, "\162\x65\x6d\x61\162\x6b" => "\x31\347\xba\xa7\344\xbd\xa3\xe9\207\221\72\xe8\256\xa2\345\x8d\225\xe5\x8f\xb7" . $order["\157\162\x64\x65\162\x73\156"] . "\357\274\214\xe7\x94\xa8\xe6\210\267\344\277\xa1\xe6\201\257\x3a\133\x75\151\x64\72" . $order["\165\151\144"] . "\x5d"); goto W6m9y; wHJZc: SGQjz: goto i1SAP; OitI2: mou0_: goto Uo7C7; PacbT: $this->insertToShopCommission($order, $item); goto YL0BZ; KH4rk: $this->insertToShopCommission($order, $item); goto XFz_N; YSyJr: rb9K5: goto RIpa1; h632o: $memberVip2 = pdo_fetchall("\x53\x45\114\105\x43\124\x20\52\40\106\x52\x4f\x4d\x20" . tablename($this->table_member_vip) . "\40\x57\110\x45\122\x45\40\x75\x69\x64\75\72\165\151\x64\x20\x41\x4e\104\40\166\141\154\151\x64\151\164\x79\x3e\x3a\x76\141\x6c\x69\144\151\164\171", array("\x3a\165\x69\x64" => $order["\x6d\x65\155\x62\x65\x72\62"], "\72\166\x61\x6c\x69\x64\151\x74\171" => time())); goto Kopfu; KgKFp: if ($comsetting["\x73\x61\154\x65\x5f\162\x61\156\x6b"] == 2) { goto AoZPJ; } goto LLbYl; ZytwO: $item = array("\165\151\x64" => $order["\155\x65\155\x62\145\x72\x33"], "\x63\157\155\x6d\x69\x73\x73\151\157\156" => $order["\x63\157\x6d\x6d\x69\x73\x73\151\x6f\156\63"], "\x67\162\x61\x64\x65" => 3, "\162\145\155\x61\x72\x6b" => "\63\347\272\247\xe4\275\243\xe9\x87\221\x3a\xe8\xae\xa2\xe5\x8d\x95\345\217\267" . $order["\157\x72\x64\x65\x72\163\156"] . "\357\274\214\347\x94\xa8\xe6\210\xb7\344\xbf\241\xe6\201\257\x3a\x5b\x75\x69\x64\x3a" . $order["\165\x69\144"] . "\135"); goto cVhLo; i1SAP: $update_order["\x63\x6f\155\x6d\x69\x73\163\x69\x6f\x6e\x31"] = 0; goto OzqPQ; zqDzd: $update_order["\143\x6f\x6d\155\x69\x73\x73\x69\157\x6e\62"] = 0; goto R3Aw9; DjY4k: goto UcfaU; goto wHJZc; NVn5Q: $update_order = array(); goto Pnlgr; mut_w: goto O8jYa; goto JWhya; R3Aw9: cJ47G: goto LbINk; x0NZ1: $this->insertToShopCommission($order, $item); goto DjY4k; WEo4s: xqE0G: goto PeviG; hQfFO: if (empty($memberVip3)) { goto dyDi5; } goto ON7oi; mHyc9: dyDi5: goto aPhfJ; oJrkJ: pdo_update($this->table_shop_order_goods, $update_order, array("\157\x72\144\145\162\151\x64" => $order["\151\144"])); goto YSyJr; LmzIx: goto TJQEL; goto WEo4s; LLbYl: $this->insertToShopCommission($order, $item); goto mut_w; XFz_N: goto cJ47G; goto nDmWY; Io7XH: pdo_update($this->table_shop_order, $update_order, array("\x69\x64" => $order["\151\144"])); goto oJrkJ; Apubk: TPERx: goto p8bzd; RIpa1: } private function insertToShopCommission($order, $item) { $data = array("\x75\156\151\141\x63\151\x64" => $order["\165\x6e\x69\141\x63\151\x64"], "\157\x72\x64\145\162\x69\144" => $order["\151\x64"], "\165\151\x64" => $item["\x75\x69\144"], "\147\x6f\157\144\163\x5f\156\x61\155\x65" => $order["\164\151\x74\154\x65"], "\x6f\x72\144\145\x72\x5f\141\155\157\165\156\x74" => $order["\160\162\151\143\x65"], "\x63\x6f\155\155\x69\163\x73\151\157\x6e" => $item["\143\157\155\155\151\163\163\x69\157\x6e"], "\147\x72\x61\144\145" => $item["\x67\162\141\x64\145"], "\162\145\155\x61\162\x6b" => $item["\x72\x65\x6d\x61\x72\153"], "\142\x75\x79\145\x72\137\x75\x69\144" => $order["\x75\x69\144"], "\x61\144\x64\164\151\155\x65" => time()); pdo_insert($this->table_shop_commission_log, $data); } public function sendShopVirtual($order) { goto pKe9s; kLS_R: cache_write("\146\x79\x5f\x6c\x65\163\x73\x6f\x6e\137" . $order["\x75\x6e\151\x61\x63\151\144"] . "\x5f\x73\x68\x6f\160\x5f\x73\x65\x74\164\x69\x6e\147", $shop_setting); goto eorCL; WniUj: $virtual_list = pdo_fetchall("\x53\105\114\x45\103\124\x20\x69\x64\x2c\x76\x61\x6c\x75\145\40\106\122\117\x4d\x20" . tablename($this->table_shop_virtual) . "\40\x57\110\x45\x52\105\40\165\x6e\151\141\x63\151\144\75\x3a\165\x6e\x69\x61\x63\x69\144\40\101\x4e\104\x20\x67\157\157\x64\x73\137\x69\x64\x3d\72\147\157\157\144\x73\x5f\x69\x64\40\x41\x4e\x44\40\x73\164\x61\164\165\163\75\72\x73\x74\141\x74\x75\163\x20\117\x52\x44\x45\x52\40\102\131\x20\x69\x64\40\x41\x53\x43\x20\114\111\115\x49\124\40\x30\54{$order_goods["\x74\157\164\x61\x6c"]}", array("\72\165\x6e\x69\x61\143\151\x64" => $order["\165\156\x69\x61\143\151\144"], "\72\147\x6f\157\x64\x73\x5f\151\144" => $order_goods["\x67\x6f\x6f\x64\x73\137\x69\144"], "\72\x73\164\141\x74\165\x73" => 0)); goto QAxUC; RBcHR: return; goto R73z1; HLqQ4: $goods = pdo_get($this->table_shop_goods, array("\x75\156\151\141\x63\151\144" => $order["\x75\156\x69\x61\x63\x69\144"], "\x69\144" => $order_goods["\x67\157\x6f\144\x73\x5f\151\144"])); goto WniUj; dwa8A: $total = pdo_fetchcolumn("\123\105\114\x45\103\x54\x20\103\117\125\116\124\x28\x2a\x29\x20\x46\x52\117\x4d\40" . tablename($this->table_shop_virtual) . "\x20\127\110\105\x52\x45\40\165\x6e\151\x61\143\151\144\x3d\x3a\x75\x6e\151\x61\x63\151\x64\40\x41\x4e\104\40\x67\x6f\x6f\x64\163\137\x69\144\x3d\x3a\x67\157\157\144\163\x5f\x69\x64\x20\x41\116\x44\40\x73\164\x61\x74\165\x73\x3d\x3a\163\164\141\164\165\163", array("\x3a\165\x6e\x69\141\x63\151\144" => $order["\x75\x6e\x69\141\143\x69\144"], "\x3a\x67\157\x6f\x64\x73\x5f\151\144" => $order_goods["\147\157\157\x64\x73\x5f\x69\144"], "\72\x73\x74\141\164\165\163" => 0)); goto ryEsD; ZquE1: $shop_setting = pdo_get($this->table_shop_setting, array("\x75\x6e\x69\141\143\x69\x64" => $order["\x75\x6e\151\x61\x63\x69\144"])); goto kLS_R; QAxUC: if (!(count($virtual_list) < $order_goods["\x74\157\164\141\154"])) { goto lN7Xs; } goto BXWou; ryEsD: pdo_update($this->table_shop_goods, array("\163\x74\x6f\143\153" => $total), array("\x75\156\x69\141\143\151\x64" => $order["\x75\x6e\x69\141\x63\151\x64"], "\x69\144" => $order_goods["\147\x6f\x6f\144\163\x5f\x69\144"])); goto mB2sK; VicW0: pdo_update($this->table_shop_order, $update_order, array("\151\144" => $order["\x69\144"])); goto eiDiu; GMZFZ: F8LrR: goto MuW36; KHN2C: foreach ($virtual_list as $v) { goto MvO2Q; MvO2Q: $virtual_text .= $v["\166\x61\154\165\145"] . "\xef\xbc\x9b"; goto l9UMV; l9UMV: pdo_update($this->table_shop_virtual, array("\x73\164\141\x74\165\x73" => 1, "\x6f\x72\x64\145\x72\x73\x6e" => $order["\x6f\162\144\145\x72\163\x6e"], "\165\x69\x64" => $order["\165\x69\144"], "\x62\x75\171\x5f\x74\x69\x6d\x65" => time()), array("\x69\144" => $v["\151\x64"])); goto ilkN2; ilkN2: Mlxco: goto iDWKG; iDWKG: } goto GMZFZ; vaDqU: if (!$virtual_list) { goto BJGfp; } goto KHN2C; R73z1: lN7Xs: goto vaDqU; MuW36: $virtual_text = trim($virtual_text, "\357\274\x9b"); goto lxzwt; AFA0S: if (!empty($shop_setting)) { goto hvsIj; } goto ZquE1; lxzwt: BJGfp: goto AOQmg; AOQmg: pdo_update($this->table_shop_order_goods, array("\x76\151\162\x74\x75\x61\x6c\137\164\x65\x78\164" => $virtual_text), array("\x69\x64" => $order_goods["\151\x64"])); goto dwa8A; QVrz1: logging_run("\xe8\231\x9a\346\x8b\x9f\345\x95\x86\xe5\223\x81\xe5\272\x93\345\255\230\344\270\215\xe8\266\263\xef\xbc\x8c\345\x8f\221\xe8\264\247\xe5\xa4\xb1\xe8\xb4\245\357\274\232\xe8\xae\242\345\x8d\225\347\xbc\226\xe5\217\xb7\357\274\232{$order["\157\162\x64\x65\162\x73\156"]}\xef\xbc\x8c\345\225\206\xe5\223\x81\xe5\220\215\347\247\xb0\357\274\232{$order_goods["\x74\x69\x74\x6c\145"]}", "\x74\162\141\143\145", "\x66\x79\x5f\154\x65\x73\163\157\156\166\62\137\160\154\x75\x67\x69\x6e\137\163\x68\x6f\160\137\x70\x61\171\x72\145\163\165\x6c\x74"); goto RBcHR; mB2sK: $shop_setting = cache_load("\146\171\x5f\154\145\163\163\157\x6e\137" . $order["\165\x6e\151\141\x63\x69\144"] . "\137\x73\x68\157\160\137\163\x65\164\164\x69\156\x67"); goto AFA0S; BXWou: load()->func("\154\x6f\x67\x67\x69\156\147"); goto QVrz1; pKe9s: $order_goods = pdo_get($this->table_shop_order_goods, array("\x75\x6e\151\x61\x63\x69\x64" => $order["\x75\x6e\x69\x61\143\x69\x64"], "\157\162\144\145\162\151\144" => $order["\x69\x64"])); goto HLqQ4; eorCL: hvsIj: goto NfNg_; NfNg_: $update_order = array("\163\x74\x61\x74\x75\x73" => 2, "\144\x65\x6c\x69\166\x65\x72\x5f\x74\151\x6d\x65" => time(), "\141\x75\x74\157\x5f\146\x69\156\x69\x73\150\137\x74\x69\x6d\145" => time() + $shop_setting["\146\151\156\151\163\150\137\157\x72\x64\x65\162"] * 86400); goto VicW0; eiDiu: } public function updateShopGoodsStock($order) { goto V4xWO; PGYAU: foreach ($goods_list as $v) { goto xUkB0; Zb9GU: goto aUOGg; goto L63xu; L63xu: mGPaa: goto si3Wl; EPnof: l00Mw: goto PNLzZ; PNLzZ: pdo_update($this->table_shop_goods, array("\163\164\157\x63\x6b\x20\x2d\x3d" => $v["\x74\x6f\x74\141\x6c"]), array("\x75\x6e\151\x61\143\x69\x64" => $order["\165\156\x69\x61\143\151\144"], "\x69\144" => $v["\147\157\x6f\x64\x73\x5f\x69\144"])); goto hqp6O; iC_RN: pdo_update($this->table_shop_sku, array("\164\157\164\x61\154\x20\55\x3d" => $v["\x74\157\x74\141\x6c"]), array("\165\x6e\151\x61\x63\x69\144" => $order["\165\x6e\151\x61\x63\x69\x64"], "\151\144" => $v["\163\x6b\165\x5f\x69\x64"])); goto EPnof; si3Wl: if (!$v["\163\153\165\x5f\151\144"]) { goto l00Mw; } goto iC_RN; hqp6O: aUOGg: goto OpRHm; xUkB0: if (!($v["\x6d\x69\156\165\163\x5f\164\157\164\x61\154"] != 1)) { goto mGPaa; } goto Zb9GU; OpRHm: } goto NcpoW; V4xWO: $goods_list = pdo_fetchall("\123\x45\x4c\x45\103\124\x20\x61\x2e\x67\x6f\x6f\x64\163\137\151\144\x2c\141\56\163\x6b\165\137\151\144\54\x61\x2e\x74\157\164\141\x6c\x2c\x62\56\x67\x6f\157\x64\163\x5f\164\171\160\145\x2c\x62\x2e\x6d\x69\156\165\x73\137\x74\157\164\141\x6c\54\142\56\163\x74\157\x63\x6b\x20\106\122\117\115\x20" . tablename($this->table_shop_order_goods) . "\40\x61\40\x4c\x45\106\x54\40\112\117\x49\116\40" . tablename($this->table_shop_goods) . "\40\x62\40\117\116\x20\x61\56\147\x6f\x6f\x64\x73\137\151\144\x3d\x62\x2e\x69\144\40\x57\x48\105\x52\x45\x20\141\x2e\165\x6e\151\141\x63\x69\144\75\72\165\156\x69\141\x63\x69\x64\40\x41\x4e\x44\x20\x61\56\x6f\162\x64\x65\162\x69\144\75\72\x6f\x72\x64\145\162\x69\144", array("\x3a\x75\x6e\151\141\x63\151\x64" => $order["\x75\156\151\x61\143\151\x64"], "\x6f\x72\x64\145\x72\151\144" => $order["\151\x64"])); goto PGYAU; NcpoW: W4vZk: goto b5V8e; b5V8e: } }