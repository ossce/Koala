<?php
 goto RiOqR; XI16e: $push_url = $server_url . $stream_sign; goto KEdnw; NvndP: $data = array("\x75\x6e\151\141\x63\x69\x64" => $uniacid, "\164\171\x70\x65" => 2, "\154\x69\x76\x65\137\163\160\x65\x65\x64" => intval($video_live["\154\151\166\x65\x5f\163\x70\x65\x65\144"]), "\163\x74\x72\x65\141\155\137\156\141\155\x65" => $stream_name, "\163\145\x72\166\145\x72\137\x75\162\x6c" => $server_url, "\163\x74\162\145\141\155\x5f\163\151\x67\x6e" => $stream_sign, "\160\154\x61\171\x5f\165\162\x6c" => $play_url, "\x76\x61\154\151\x64\x69\x74\171" => $timestamp1, "\x61\x64\144\x74\x69\155\145" => time()); goto rvJAa; kBic2: $uid = 0; goto OGpgv; IepcW: if (!$video_live["\x6c\151\166\x65\137\x73\x70\x65\145\x64"]) { goto Msm1C; } goto V5Vcm; V5Vcm: $protocols = "\141\x72\164\x63\72\x2f\x2f"; goto qrVX8; Tb0w3: $live_info["\164\x79\x70\145"] = 2; goto VdErW; VdErW: $live_info["\x6c\x69\166\x65\x5f\x73\160\145\145\x64"] = intval($video_live["\x6c\151\166\145\x5f\x73\160\145\145\144"]); goto xjWQ6; KTz1a: if ($res) { goto Jirnx; } goto yxBy7; bZWJ6: q1d0X: goto dvrF7; QP6Ga: $stream_name = $stream_pre . "\x5f" . $uniacid . "\137" . $lessonid; goto y5VSI; KEdnw: if ($video_live["\x61\154\x69\171\x75\x6e"]["\x74\x72\141\x6e\x73\143\157\144\x69\156\x67\137\151\144"]) { goto q1d0X; } goto BAiyo; rvJAa: $res = pdo_insert($this->table_live_stream, $data); goto AIsto; BEyhd: $uri = $appName . $stream_name; goto zPCfO; yxBy7: message("\xe7\224\237\xe6\x88\x90\xe7\x9b\xb4\xe6\222\255\xe6\xb5\201\345\xa4\xb1\350\xb4\245\xef\xbc\x8c\350\xaf\267\xe7\250\x8d\345\x80\231\xe9\x87\215\xe8\xaf\x95"); goto s2uGJ; QdkVB: message("\347\x94\x9f\346\x88\220\347\233\xb4\346\x92\xad\xe6\265\201\346\210\x90\xe5\212\237", $this->createWebUrl("\154\151\x76\145", array("\x6f\x70" => "\x73\x74\x72\145\141\x6d\x44\145\x74\141\151\x6c\163", "\x69\x64" => $id)), "\x73\165\143\x63\145\163\163"); goto nwfGd; R2r33: $lessonid = intval($_GPC["\154\145\163\x73\157\x6e\x69\x64"]); goto iypEb; D3yJT: $rand = random(32, true); goto CLJDq; qx3ms: $live_info = json_decode($lesson["\x6c\151\166\x65\x5f\151\x6e\x66\x6f"], true); goto Tb0w3; y5VSI: $appName = "\x2f\154\151\x76\x65\x2f"; goto BEyhd; ecohP: message("\xe8\257\xb7\351\x80\x89\346\213\xa9\xe7\x9b\xb4\346\x92\xad\xe8\xaf\xbe\347\250\213"); goto LvqqJ; qrVX8: goto PmwjS; goto m8vKQ; I38dB: $stream_pre = trim($_GPC["\163\x74\x72\x65\x61\155\137\x70\x72\145"]) ? trim($_GPC["\x73\164\162\x65\x61\155\137\x70\162\x65"]) : random(6); goto QP6Ga; zPCfO: $timestamp1 = time() + 60 * $video_live["\x61\154\151\x79\165\156"]["\x70\165\163\x68\137\166\x61\x6c\x69\x64\151\164\171"]; goto j_hu6; xjWQ6: $live_info["\x73\x74\162\145\141\155\x5f\x6e\x61\155\145"] = $stream_name; goto MfrK_; LvqqJ: YwYrs: goto I38dB; CLJDq: $uid = 0; goto HShvS; RiOqR: if (!checksubmit()) { goto vSn1m; } goto R2r33; C0JJA: $stream_sign = $stream_name . "\77\x61\165\x74\150\137\x6b\x65\x79\75" . $timestamp1 . "\55" . $rand . "\55" . $uid . "\x2d" . $hashValue; goto XI16e; s2uGJ: goto wMsIJ; goto YxLuM; mrV4m: goto ofbid; goto bZWJ6; iypEb: $lesson = pdo_get($this->table_lesson_parent, array("\165\x6e\x69\141\143\151\x64" => $uniacid, "\151\x64" => $lessonid, "\154\145\163\x73\x6f\x6e\137\164\171\160\145" => 3), array("\154\151\x76\145\x5f\151\x6e\x66\x6f")); goto J4xm6; j_hu6: $rand = random(32, true); goto kBic2; LonBZ: $protocols = $_W["\x73\x69\x74\145\163\143\150\145\x6d\145"]; goto BI1TE; BI1TE: PmwjS: goto BGzgR; J4xm6: if (!empty($lesson)) { goto YwYrs; } goto ecohP; OGpgv: $hashValue = md5($uri . "\x2d" . $timestamp1 . "\x2d" . $rand . "\x2d" . $uid . "\x2d" . $video_live["\x61\x6c\151\x79\x75\156"]["\x70\x75\x73\x68\137\x6b\145\171"]); goto kk2AH; BAiyo: $uri = $appName . $stream_name; goto mrV4m; BGzgR: $timestamp2 = time() + 60 * $video_live["\x61\154\151\x79\x75\156"]["\x70\154\141\171\x5f\166\x61\154\151\144\151\164\x79"]; goto D3yJT; urn2r: ofbid: goto IepcW; HShvS: $hashValue = md5($uri . "\x2d" . $timestamp2 . "\x2d" . $rand . "\55" . $uid . "\55" . $video_live["\x61\x6c\151\171\165\x6e"]["\x70\154\141\171\137\153\x65\x79"]); goto ykEhp; kk2AH: $server_url = "\162\164\x6d\x70\72\x2f\57" . $video_live["\x61\x6c\151\171\x75\156"]["\160\x75\163\150\x5f\x64\157\x6d\x61\151\156"] . $appName; goto C0JJA; nwfGd: wMsIJ: goto vKRoP; dvrF7: $uri = $appName . $stream_name . "\x5f" . $video_live["\x61\154\151\x79\165\156"]["\x74\162\141\156\x73\x63\x6f\144\x69\x6e\x67\x5f\151\144"]; goto urn2r; YxLuM: Jirnx: goto qx3ms; m8vKQ: Msm1C: goto ZA1YM; VrU15: pdo_update($this->table_lesson_parent, array("\x6c\151\166\145\137\x69\156\146\157" => json_encode($live_info)), array("\x69\144" => $lessonid)); goto QdkVB; MfrK_: $live_info["\x75\160\x64\x61\x74\145\137\x74\x69\155\x65"] = time(); goto VrU15; ykEhp: $play_url = $protocols . $video_live["\141\x6c\x69\171\165\156"]["\160\154\x61\x79\137\144\x6f\155\141\151\156"] . $uri . "\77\141\165\x74\150\137\x6b\x65\x79\x3d" . $timestamp2 . "\x2d" . $rand . "\x2d" . $uid . "\55" . $hashValue; goto NvndP; ZA1YM: $uri .= "\x2e\155\x33\165\x38"; goto LonBZ; AIsto: $id = pdo_insertid(); goto KTz1a; vKRoP: vSn1m: