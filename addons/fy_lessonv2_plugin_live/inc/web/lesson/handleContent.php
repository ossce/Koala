<?php
 goto rTY7e; u3aoq: if (!(empty($ids) || !is_array($ids))) { goto I0bAh; } goto tBVtq; JQg5i: itoast("\345\x88\xa0\xe9\x99\xa4\xe6\210\220\345\212\x9f", '', "\163\165\x63\x63\145\x73\163"); goto z52z6; rTY7e: $handle_type = $_GPC["\150\141\x6e\144\x6c\x65\x5f\164\x79\160\145"]; goto eJmp0; tBVtq: message("\346\xb6\x88\xe6\x81\xaf\344\xb8\x8d\345\255\x98\345\x9c\xa8\346\x88\x96\345\xb7\262\345\xae\241\346\xa0\xb8", $this->createWebUrl("\154\145\x73\x73\x6f\156", array("\157\x70" => "\141\165\144\x69\164\103\x6f\156\164\145\156\164", "\151\144" => $lessonid)), "\145\162\x72\x6f\162"); goto LcRYD; LJC5Y: goto yf90y; goto QaIj5; PEv2f: message("\350\xaf\xa5\xe8\257\276\347\xa8\x8b\344\xb8\x8d\345\xad\230\345\234\250", '', "\145\x72\x72\x6f\162"); goto ws9uS; z52z6: mclf2: goto sz7EI; ZI4_p: message("\345\210\xa0\351\x99\244\345\244\261\350\264\xa5\357\xbc\x8c\346\xb6\210\xe6\201\257\xe4\270\x8d\345\xad\x98\xe5\x9c\xa8\xe6\x88\226\345\xb7\262\345\256\241\346\240\xb8", $this->createWebUrl("\x6c\x65\163\163\x6f\156", array("\157\x70" => "\x61\x75\x64\151\x74\103\x6f\x6e\x74\x65\156\x74", "\151\144" => $lessonid)), "\x65\162\162\x6f\162"); goto hPZru; ss2Iq: if ($handle_type == "\x70\141\x73\163") { goto v7WjH; } goto A2tVZ; QaIj5: fScKi: goto csbRg; pKs9n: if (pdo_delete($this->table_live_chatrecord, array("\x75\x6e\x69\x61\143\x69\144" => $uniacid, "\x69\x64" => $id, "\x6c\145\163\163\x6f\x6e\151\x64" => $lessonid, "\x72\157\157\x6d\x69\144" => $chatroom["\x72\157\157\155\151\144"], "\x73\x74\141\164\x75\x73" => 0))) { goto mrJQi; } goto ZI4_p; iwgHl: v7WjH: goto o37Rz; ws9uS: hwAsX: goto vY2A1; gRDFi: message("\350\257\xa5\350\257\276\347\xa8\213\xe4\xb8\215\346\230\xaf\xe7\x9b\xb4\346\x92\xad\xe8\257\276\347\xa8\x8b", '', "\x65\x72\x72\x6f\162"); goto vEQYA; m78Vw: $lesson = pdo_get($this->table_lesson_parent, array("\165\156\x69\x61\x63\151\144" => $uniacid, "\151\x64" => $lessonid)); goto cQawG; LcRYD: I0bAh: goto y5VoW; cwotv: mrJQi: goto JQg5i; vY2A1: if (!($lesson["\154\x65\x73\x73\x6f\x6e\x5f\x74\171\x70\x65"] != 3)) { goto sA7d2; } goto gRDFi; o37Rz: $ids = explode("\54", $_GPC["\151\x64\x73"]); goto u3aoq; B5F_T: $chatroom = pdo_fetch("\x53\105\114\105\x43\x54\x20\52\x20\106\122\x4f\115\x20" . tablename($this->table_live_chatroom) . "\40\x57\110\x45\x52\x45\40\165\156\x69\141\143\x69\144\x3d\72\165\x6e\151\x61\x63\151\x64\x20\101\x4e\x44\x20\x74\x79\x70\x65\75\72\164\171\x70\145\x20\x41\x4e\x44\x20\x6c\145\x73\163\157\156\151\144\x3d\72\154\145\x73\x73\x6f\x6e\151\144\x20\x4f\x52\x44\x45\x52\40\x42\131\x20\x69\144\x20\101\123\x43", array("\72\165\156\151\x61\143\151\x64" => $uniacid, "\x3a\164\x79\160\145" => 2, "\72\154\145\163\163\157\156\x69\144" => $lessonid)); goto rR56h; eJmp0: $lessonid = intval($_GPC["\x6c\x65\163\x73\157\156\x69\144"]); goto m78Vw; LIxxr: cie22: goto HWRWv; LZ5Lu: $api = new TisApi($im_config["\x61\x6f\144\x69\141\x6e\x79\165\x6e"]["\141\143\143\145\x73\163\111\x64"], $im_config["\x61\x6f\144\151\x61\156\171\x75\x6e"]["\x61\x63\143\145\x73\163\x4b\x65\171"]); goto ss2Iq; A2tVZ: if ($handle_type == "\144\145\154\x65\164\145") { goto fScKi; } goto kL008; rR56h: $im_config = json_decode($setting["\x69\x6d\137\x63\x6f\x6e\x66\x69\x67"], true); goto LZ5Lu; csbRg: $id = intval($_GPC["\151\x64"]); goto pKs9n; kL008: goto yf90y; goto iwgHl; hPZru: goto mclf2; goto cwotv; y5VoW: foreach ($ids as $id) { goto n63Gz; zoAvX: if (!($res["\106\154\141\147"] == 100)) { goto MTuHS; } goto Duvud; Duvud: pdo_update($this->table_live_chatrecord, array("\x73\164\141\x74\x75\x73" => 1), array("\165\x6e\151\x61\143\x69\x64" => $uniacid, "\151\x64" => $id)); goto ZzzOa; aVo2p: $res = $api->sendMsg($msg_data, $chatroom["\x72\x6f\157\155\x69\x64"]); goto zoAvX; N2_od: Ntfr1: goto KStqt; n63Gz: $chat_record = pdo_get($this->table_live_chatrecord, array("\x75\x6e\x69\x61\143\x69\x64" => $uniacid, "\x69\144" => $id, "\x6c\x65\163\x73\157\x6e\x69\x64" => $lessonid, "\162\x6f\x6f\x6d\151\x64" => $chatroom["\x72\157\157\x6d\151\x64"], "\x73\164\x61\164\x75\163" => 0)); goto h3XtC; ZzzOa: MTuHS: goto N2_od; vhrs0: pUA84: goto ud1Uq; h3XtC: if (!empty($chat_record)) { goto pUA84; } goto aU0UQ; aU0UQ: message("\xe6\xb6\x88\346\201\257\xe4\xb8\x8d\345\xad\230\xe5\234\xa8\346\x88\226\345\267\262\xe5\256\xa1\xe6\xa0\xb8", $this->createWebUrl("\x6c\145\x73\163\x6f\x6e", array("\157\x70" => "\141\x75\x64\151\x74\103\x6f\156\164\145\x6e\164", "\151\x64" => $lessonid)), "\145\162\162\157\162"); goto vhrs0; ud1Uq: $msg_data["\143\157\156\x74\145\x6e\x74"] = json_encode(array("\143\x6d\144" => "\164\151\163\x6d\163\x67", "\x76" => 1, "\x66\162\x6f\155" => "\164\151\163\55\66", "\156\x61\x6d\x65" => $chat_record["\156\x61\155\x65"], "\x74\x6f" => '', "\142\157\x64\x79" => $chat_record["\x62\157\144\x79"], "\x69\x6d\x61\x67\145" => '', "\164\151\155\145" => intval($chat_record["\164\x69\155\145"]), "\145\x78\164\162\x61" => $chat_record["\145\x78\x74\162\141"])); goto aVo2p; KStqt: } goto LIxxr; vEQYA: sA7d2: goto B5F_T; HWRWv: itoast("\xe5\256\241\346\240\xb8\346\210\220\xe5\212\237", '', "\163\165\x63\143\145\x73\163"); goto LJC5Y; cQawG: if (!empty($lesson)) { goto hwAsX; } goto PEv2f; sz7EI: yf90y: